"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[4655],{8131:function(e,r,s){s.r(r),s.d(r,{default:function(){return u}});var o=s(51464);function a(e,r,s,a,l,t){const d=(0,o.g2)("el-alert"),n=(0,o.g2)("el-input"),u=(0,o.g2)("el-form-item"),w=(0,o.g2)("sc-password-strength"),m=(0,o.g2)("el-button"),i=(0,o.g2)("el-form"),c=(0,o.g2)("el-card");return(0,o.uX)(),(0,o.Wv)(c,{shadow:"never",header:"修改密码"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{title:"密码更新成功后，您将被重定向到登录页面，您可以使用新密码重新登录。",type:"info","show-icon":"",style:{"margin-bottom":"15px"}}),(0,o.bF)(i,{ref:"form",model:l.form,rules:l.rules,"label-width":"120px",style:{"margin-top":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(u,{label:"当前密码",prop:"userPassword"},{default:(0,o.k6)((()=>[(0,o.bF)(n,{modelValue:l.form.userPassword,"onUpdate:modelValue":r[0]||(r[0]=e=>l.form.userPassword=e),type:"password","show-password":"",placeholder:"请输入当前密码"},null,8,["modelValue"]),r[4]||(r[4]=(0,o.Lk)("div",{class:"el-form-item-msg"},"必须提供当前登录用户密码才能进行更改",-1))])),_:1}),(0,o.bF)(u,{label:"新密码",prop:"newPassword"},{default:(0,o.k6)((()=>[(0,o.bF)(n,{modelValue:l.form.newPassword,"onUpdate:modelValue":r[1]||(r[1]=e=>l.form.newPassword=e),type:"password","show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"]),(0,o.bF)(w,{modelValue:l.form.newPassword,"onUpdate:modelValue":r[2]||(r[2]=e=>l.form.newPassword=e)},null,8,["modelValue"]),r[5]||(r[5]=(0,o.Lk)("div",{class:"el-form-item-msg"},"请输入包含英文、数字的8位以上密码",-1))])),_:1}),(0,o.bF)(u,{label:"确认新密码",prop:"confirmNewPassword"},{default:(0,o.k6)((()=>[(0,o.bF)(n,{modelValue:l.form.confirmNewPassword,"onUpdate:modelValue":r[3]||(r[3]=e=>l.form.confirmNewPassword=e),type:"password","show-password":"",placeholder:"请再次输入新密码"},null,8,["modelValue"])])),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(m,{type:"primary",onClick:t.save},{default:(0,o.k6)((()=>r[6]||(r[6]=[(0,o.eW)("保存密码")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1})}var l=s(46379),t={components:{scPasswordStrength:l.A},data(){return{form:{userPassword:"",newPassword:"",confirmNewPassword:""},rules:{userPassword:[{required:!0,message:"请输入当前密码"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,r,s)=>r?r.length<8||r.length>16?s(new Error("密码长度必须在 8 到 16 个字符之间")):/[a-zA-Z]/.test(r)&&/\d/.test(r)?void s():s(new Error("密码必须包含至少一个字母和一个数字")):s(new Error("请输入新密码")),trigger:"blur"}],confirmNewPassword:[{required:!0,message:"请再次输入新密码"},{validator:(e,r,s)=>{r!==this.form.newPassword?s(new Error("两次输入密码不一致")):s()}}]}}},methods:{async save(){try{var e=this.$TOOL.data.get("USER_INFO");const r={account_:e.account_,password_:this.form.userPassword,newPassword_:this.form.newPassword};await this.$apiIAM.user.changePassword.post(r),this.$refs.form.validate((e=>{if(!e)return!1;this.$alert("密码修改成功，是否跳转至登录页使用新密码登录","修改成功",{type:"success",center:!0}).then((()=>{this.$router.replace({path:"/login"})})).catch((()=>{}))}))}catch(r){console.error("Error in loginController:",r)}}}},d=s(51456);const n=(0,d.A)(t,[["render",a]]);var u=n}}]);