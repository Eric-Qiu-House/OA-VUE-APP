"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[6776],{2799:function(e,l,a){a.r(l),a.d(l,{default:function(){return m}});var t=a(20641),u=a(53751);function s(e,l,a,s,o,n){const i=(0,t.g2)("el-option"),r=(0,t.g2)("el-select"),m=(0,t.g2)("el-form-item"),d=(0,t.g2)("el-form"),c=(0,t.g2)("el-button"),g=(0,t.g2)("sc-dialog");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:o.visible,"onUpdate:modelValue":l[5]||(l[5]=e=>o.visible=e),title:"发布至 ？",onClosed:l[6]||(l[6]=l=>e.$emit("closed"))},{footer:(0,t.k6)((()=>[(0,t.bF)(c,{onClick:l[4]||(l[4]=e=>o.visible=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取 消")])),_:1}),(0,t.bF)(c,{type:"primary",onClick:n.gitArticleAPI},{default:(0,t.k6)((()=>[(0,t.eW)("确 定")])),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(d,{ref:"formData",style:{"max-width":"600px"},model:o.formData,rules:o.rules,"label-width":"auto",class:"demo-ruleForm"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"主页菜单：",prop:"menu_class_"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:o.formData.menu_class_,"onUpdate:modelValue":l[0]||(l[0]=e=>o.formData.menu_class_=e),placeholder:"Select",style:{width:"240px"},onChange:l[1]||(l[1]=e=>n.changeMainMenu(o.formData.menu_class_))},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.mainMenu,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e.id_,label:e.folder_name_,value:e.id_},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bo)((0,t.bF)(m,{label:"子页菜单：",prop:"belong_to_"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:o.formData.belong_to_,"onUpdate:modelValue":l[2]||(l[2]=e=>o.formData.belong_to_=e),placeholder:"Select",style:{width:"240px"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.subMenu,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e.id_,label:e.menu_name_ch_,value:e.id_},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},512),[[u.aG,null!=o.formData.menu_class_]]),(0,t.bF)(m,{label:"语言类型：",prop:"language_"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:o.formData.language_,"onUpdate:modelValue":l[3]||(l[3]=e=>o.formData.language_=e),placeholder:"Select",style:{width:"240px"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.language,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}var o=a(20163),n={props:{message:Object},data(){return{visible:!0,formData:{menu_class_:null,belong_to_:null,language_:""},mainMenu:[],subMenu:[],subMenuCache:[],language:[{value:"0",label:"中文"},{value:"1",label:"英文"}],rules:{menu_class_:[{required:!0,message:"请选择发布的 主页菜单",trigger:"blur"}],belong_to_:[{required:!0,message:"请选择发布的 子菜单",trigger:"blur"}],language_:[{required:!0,message:"请选择文章语言类型",trigger:"blur"}]}}},mounted(){this.formData=this.message,this.getMenu(),this.getMenuChild()},methods:{async getMenu(){var e=await this.$fileApi.file.menu.get();this.mainMenu=e},async getMenuChild(){var e=await this.$cmsApi.inquireMenu.get();this.subMenuCache=e,this.subMenu=e},changeMainMenu(e){console.log(e),this.formData.belong_to_="",this.subMenu=this.subMenuCache.filter((l=>l.form_==e))},submitForm(){this.$refs.formData.validate((e=>{e||console.log("Form validation failed")}))},resetForm(){this.$refs.formData.resetFields()},async gitArticleAPI(){const e=this.formData;try{e.id_?(await this.$cmsApi.updata.post(e),(0,o.nk)({message:"修改成功.",type:"success"})):(await this.$cmsApi.add.post(e),(0,o.nk)({message:"添加成功.",type:"success"})),this.$router.back()}catch(l){console.error("Error updating data:",l)}}}},i=a(66262);const r=(0,i.A)(n,[["render",s]]);var m=r}}]);