"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[6776],{40709:function(e,a,l){l.r(a),l.d(a,{default:function(){return d}});var t=l(51464),u=l(45883);function s(e,a,l,s,n,o){const i=(0,t.g2)("el-option"),r=(0,t.g2)("el-select"),d=(0,t.g2)("el-form-item"),m=(0,t.g2)("el-form"),_=(0,t.g2)("el-button"),c=(0,t.g2)("sc-dialog");return(0,t.uX)(),(0,t.Wv)(c,{modelValue:n.visible,"onUpdate:modelValue":a[5]||(a[5]=e=>n.visible=e),title:"发布至 ？",onClosed:a[6]||(a[6]=a=>e.$emit("closed"))},{footer:(0,t.k6)((()=>[(0,t.bF)(_,{onClick:a[4]||(a[4]=e=>n.visible=!1)},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("取 消")]))),_:1}),(0,t.bF)(_,{type:"primary",onClick:o.gitArticleAPI},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("确 定")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(m,{ref:"formData",style:{"max-width":"600px"},model:n.formData,rules:n.rules,"label-width":"auto",class:"demo-ruleForm"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"主页菜单：",prop:"menu_class_"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:n.formData.menu_class_,"onUpdate:modelValue":a[0]||(a[0]=e=>n.formData.menu_class_=e),placeholder:"Select",style:{width:"240px"},onChange:a[1]||(a[1]=e=>o.changeMainMenu(n.formData.menu_class_))},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.mainMenu,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e.id_,label:e.folder_name_,value:e.id_},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bo)((0,t.bF)(d,{label:"子页菜单：",prop:"belong_to_"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:n.formData.belong_to_,"onUpdate:modelValue":a[2]||(a[2]=e=>n.formData.belong_to_=e),placeholder:"Select",style:{width:"240px"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.subMenu,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e.id_,label:e.menu_name_ch_,value:e.id_},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},512),[[u.aG,null!=n.formData.menu_class_]]),(0,t.bF)(d,{label:"语言类型：",prop:"language_"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:n.formData.language_,"onUpdate:modelValue":a[3]||(a[3]=e=>n.formData.language_=e),placeholder:"Select",style:{width:"240px"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.language,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}l(64660),l(40772);var n=l(74174),o={props:{message:Object},data(){var e=this.$TOOL.data.get("USER_INFO");return{visible:!0,formData:{menu_class_:null,belong_to_:null,language_:"",update_by_:e.id_,updater_:e.fullname_},mainMenu:[],subMenu:[],subMenuCache:[],language:[{value:"0",label:"中文"},{value:"1",label:"英文"}],rules:{menu_class_:[{required:!0,message:"请选择发布的 主页菜单",trigger:"blur"}],belong_to_:[{required:!0,message:"请选择发布的 子菜单",trigger:"blur"}],language_:[{required:!0,message:"请选择文章语言类型",trigger:"blur"}]}}},mounted(){this.formData=this.message,this.getMenu(),this.getMenuChild()},methods:{async getMenu(){var e=await this.$fileApi.file.menu.get();this.mainMenu=e},async getMenuChild(){var e=await this.$cmsApi.inquireMenu.get();this.subMenuCache=e,this.subMenu=e},changeMainMenu(e){this.formData.belong_to_="",this.subMenu=this.subMenuCache.filter((a=>a.form_==e))},submitForm(){this.$refs.formData.validate((e=>{e||console.log("Form validation failed")}))},resetForm(){this.$refs.formData.resetFields()},async gitArticleAPI(){const e=this.formData;try{e.id_?(await this.$cmsApi.updata.post(e),(0,n.nk)({message:"修改成功.",type:"success"})):(await this.$cmsApi.add.post(e),(0,n.nk)({message:"添加成功.",type:"success"})),this.$router.back()}catch(a){console.error("Error updating data:",a)}}}},i=l(51456);const r=(0,i.A)(o,[["render",s]]);var d=r}}]);