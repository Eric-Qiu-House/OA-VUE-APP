"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[4659],{1709:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var l=a(641),i=a(33),s=a(3751);const u={style:{padding:"10px 0",height:"52px",display:"flex","align-items":"center"}};function r(e,t,a,r,n,o){const d=(0,l.g2)("el-button"),c=(0,l.g2)("router-link"),_=(0,l.g2)("el-header"),p=(0,l.g2)("el-option"),h=(0,l.g2)("el-select"),b=(0,l.g2)("el-card"),f=(0,l.g2)("el-table-column"),w=(0,l.g2)("el-tag"),m=(0,l.g2)("el-popconfirm"),k=(0,l.g2)("scTable"),g=(0,l.g2)("el-main"),y=(0,l.g2)("el-container");return(0,l.uX)(),(0,l.Wv)(y,null,{default:(0,l.k6)((()=>[(0,l.bF)(_,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{to:{name:"articleEdit",query:{type:"新增内容"}}},{default:(0,l.k6)((()=>[(0,l.bF)(d,{type:"primary",icon:"el-icon-plus"},{default:(0,l.k6)((()=>[(0,l.eW)("添加文章")])),_:1})])),_:1})])),_:1}),(0,l.bF)(g,{class:"nopadding"},{default:(0,l.k6)((()=>[(0,l.bF)(b,null,{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,[(0,l.eW)(" 主菜单： "),(0,l.bF)(d,{round:"",onClick:t[0]||(t[0]=e=>o.article())},{default:(0,l.k6)((()=>[(0,l.eW)("全部")])),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.menu,((e,t)=>((0,l.uX)(),(0,l.Wv)(d,{round:"",key:t,onClick:t=>o.cutMenu(e.file_path_)},{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.folder_name_),1)])),_:2},1032,["onClick"])))),128))]),(0,l.Lk)("p",u,[(0,l.eW)(" 子菜单： "),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.menuChild,((e,t)=>(0,l.bo)(((0,l.uX)(),(0,l.Wv)(d,{round:"",key:t,onClick:t=>o.cutMenuChild(e.id_)},{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.menu_name_ch_),1)])),_:2},1032,["onClick"])),[[s.aG,e.form_==this.paths&&0!=this.paths&&5!=this.paths]]))),128))]),(0,l.bF)(h,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),placeholder:"Select",size:"large",style:{width:"240px"},onChange:t[2]||(t[2]=e=>o.language(n.value))},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.selectedLanguage,(e=>((0,l.uX)(),(0,l.Wv)(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(k,{ref:"table",data:n.newsList,"row-key":"id_",stripe:"","row-class-name":e.getRowClassName},{default:(0,l.k6)((()=>[(0,l.bF)(f,{type:"selection",width:"50"}),(0,l.bF)(f,{label:"标题",prop:"title_",width:"150"}),(0,l.bF)(f,{label:"访问数量",prop:"visit_num_",width:"150",sortable:""}),(0,l.bF)(f,{label:"发布时间",prop:"release_time_",width:"150",sortable:""},{default:(0,l.k6)((e=>[(0,l.eW)((0,i.v_)(o.formatDate(e.row.release_time_)),1)])),_:1}),(0,l.bF)(f,{label:"语言",prop:"language_",width:"150",sortable:""}),(0,l.bF)(f,{label:"发布人",prop:"release_name_",width:"150",sortable:""}),(0,l.bF)(f,{label:"文档状态",prop:"status_",width:"150",sortable:""},{default:(0,l.k6)((e=>["0"==e.row.status_?((0,l.uX)(),(0,l.Wv)(w,{key:0},{default:(0,l.k6)((()=>[(0,l.eW)("未发布")])),_:1})):(0,l.Q3)("",!0),"1"==e.row.status_?((0,l.uX)(),(0,l.Wv)(w,{key:1,type:"success"},{default:(0,l.k6)((()=>[(0,l.eW)("发布")])),_:1})):(0,l.Q3)("",!0),"2"==e.row.status_?((0,l.uX)(),(0,l.Wv)(w,{key:2,type:"danger"},{default:(0,l.k6)((()=>[(0,l.eW)("下架")])),_:1})):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(f,{label:"更新时间",prop:"update_time_",width:"150",sortable:""},{default:(0,l.k6)((e=>[(0,l.eW)((0,i.v_)(o.formatDate(e.row.update_time_)),1)])),_:1}),(0,l.bF)(f,{label:"更新人",prop:"updater_",width:"150",sortable:""}),(0,l.bF)(f,{label:"操作",prop:"progress",width:"280",sortable:""},{default:(0,l.k6)((e=>[(0,l.bF)(c,{to:{name:"articleRead",query:{id:e.row.id_,form:!0,type:"NewsList"}}},{default:(0,l.k6)((()=>[(0,l.bF)(d,{text:"",type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)("详情")])),_:1})])),_:2},1032,["to"]),0===e.row.status_||2===e.row.status_?((0,l.uX)(),(0,l.Wv)(c,{key:0,to:{name:"articleEdit",query:{id:e.row.id_}}},{default:(0,l.k6)((()=>[(0,l.bF)(d,{text:"",type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)("编辑")])),_:1})])),_:2},1032,["to"])):(0,l.Q3)("",!0),0===e.row.status_||2===e.row.status_?((0,l.uX)(),(0,l.Wv)(m,{key:1,title:`确定发布${e.row.title_}吗?`,onConfirm:t=>o.table_up(e.row,e.$index)},{reference:(0,l.k6)((()=>[(0,l.bF)(d,{text:"",type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)("发布")])),_:1})])),_:2},1032,["title","onConfirm"])):(0,l.Q3)("",!0),1===e.row.status_?((0,l.uX)(),(0,l.Wv)(m,{key:2,title:`确定下架${e.row.title_}吗?`,onConfirm:t=>o.table_up(e.row,e.$index)},{reference:(0,l.k6)((()=>[(0,l.bF)(d,{text:"",type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)("下架")])),_:1})])),_:2},1032,["title","onConfirm"])):(0,l.Q3)("",!0),0===e.row.status_||2===e.row.status_?((0,l.uX)(),(0,l.Wv)(m,{key:3,title:`确定删除${e.row.title_}吗?`,onConfirm:t=>o.table_up(e.row,e.$index)},{reference:(0,l.k6)((()=>[(0,l.bF)(d,{text:"",type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:1})])),_:2},1032,["title","onConfirm"])):(0,l.Q3)("",!0)])),_:1})])),_:1},8,["data","row-class-name"])])),_:1})])),_:1})}const n=(0,l.$V)((()=>Promise.all([a.e(8774),a.e(6158),a.e(580)]).then(a.bind(a,8199))));var o={name:"tableBase",components:{scEditor:n},data(){return{newsList:[],menu:[],menuChild:[],paths:"",value:"all",selectedLanguage:[{value:"all",label:"全部"},{value:"0",label:"中文"},{value:"1",label:"英文"}],filteredTableData:[],cacheNewsList:[]}},created(){this.article()},mounted(){this.getMenu(),this.getMenuChild()},methods:{language(e){this.newsList="all"===e?this.cacheNewsList:this.cacheNewsList.filter((t=>t.language_===e))},async article(){this.value="all";try{const e=await this.$cmsApi.inquire.get();this.cacheNewsList=e,this.newsList=e}catch(e){console.error("Error fetching user list:",e)}},async cutMenu(e){this.value="all",this.paths=e;const t={menu_class_:e};var a=await this.$cmsApi.inquireType.post(t);this.cacheNewsList=a,this.newsList=a},async cutMenuChild(e){this.value="all";const t={belong_to_:e};var a=await this.$cmsApi.inquireType.post(t);this.cacheNewsList=a,this.newsList=a},async getMenu(){var e=await this.$fileApi.file.menu.get();this.cacheNewsList=e,this.menu=e},async getMenuChild(){var e=await this.$cmsApi.inquireMenu.get();this.menuChild=e},change(e){this.filterData=e},formatDate(e){return e?e.split("T")[0]:e},async table_up(e,t){let a;a=1==e.status_?2:1;const l={id_:e.id_,status_:a};try{this.newsList[t]=await this.$cmsApi.updata.post(l)}catch(i){console.error("Error updating data:",i)}}}},d=a(6262);const c=(0,d.A)(o,[["render",r],["__scopeId","data-v-5fdf14f2"]]);var _=c}}]);