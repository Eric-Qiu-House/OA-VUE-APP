(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[8749],{74738:function(e,l,t){"use strict";t.d(l,{B1:function(){return r},nS:function(){return d}});const a={"2024-01-01":"元旦","2024-02-10":"春节","2024-02-11":"春节","2024-02-12":"春节","2024-02-13":"春节","2024-02-14":"春节","2024-02-15":"春节","2024-02-16":"春节","2024-02-17":"春节","2024-04-04":"清明节","2024-04-05":"清明节","2024-04-06":"清明节","2024-05-01":"劳动节","2024-05-02":"劳动节","2024-05-03":"劳动节","2024-05-04":"劳动节","2024-05-05":"劳动节","2024-06-08":"端午节","2024-06-09":"端午节","2024-06-10":"端午节","2024-09-15":"中秋节","2024-09-16":"中秋节","2024-09-17":"中秋节","2024-10-01":"国庆节","2024-10-02":"国庆节","2024-10-03":"国庆节","2024-10-04":"国庆节","2024-10-05":"国庆节","2024-10-06":"国庆节","2024-10-07":"国庆节","2025-01-01":"元旦","2025-01-28":"春节","2025-01-29":"春节","2025-01-30":"春节","2025-01-31":"春节","2025-02-01":"春节","2025-02-02":"春节","2025-02-03":"春节","2025-02-04":"春节","2025-04-04":"清明节","2025-04-05":"清明节","2025-04-06":"清明节","2025-05-01":"劳动节","2025-05-02":"劳动节","2025-05-03":"劳动节","2025-05-31":"端午节","2025-06-01":"端午节","2025-06-02":"端午节","2025-09-06":"中秋节","2025-10-01":"国庆节","2025-10-02":"国庆节","2025-10-03":"国庆节","2025-10-04":"国庆节","2025-10-05":"国庆节","2025-10-06":"国庆节","2025-10-07":"国庆节","2025-10-08":"国庆节"},o={"2024-02-04":"春节调休","2024-02-18":"春节调休","2024-04-07":"清明调休","2024-05-11":"劳动节调休","2024-04-28":"劳动节调休","2024-09-14":"中秋调休","2024-09-29":"国庆调休","2024-10-12":"国庆调休","2025-01-26":"春节调休","2025-02-08":"春节调休","2025-04-27":"劳动节调休","2025-09-28":"国庆调休","2025-10-11":"国庆调休"};function i(e){const l=new Date(s(e)).getDay();return 0===l||6===l}function s(e){e instanceof Date||(e=new Date(e));const l=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${l}-${t}-${a}`}function r(e){const l=s(e);return!!a[l]||!(!i(e)||o[l])}function d(e){const l=s(e);if(a[l])return`节假日: ${a[l]}`;if(o[l])return"调休";const t=new Date(l).getDay();return 6===t?"周六":0===t?"周日":"工作日"}},48595:function(e,l,t){"use strict";t.r(l);t(64660),t(89593);var a=t(25456);const o={};let i=t(85868);i.keys().forEach((e=>{let l=i(e);o[e.replace(/^\.\/(.*)\.\w+$/,"$1")]=l.default})),l["default"]=(0,a.IG)(o)},59608:function(e,l,t){"use strict";t.d(l,{A:function(){return b}});var a=t(51464),o=t(51681);const i={class:"sc-cron"},s={class:"sc-cron-num"},r={class:"sc-cron-num"},d={class:"sc-cron-num"},n={class:"sc-cron-num"},u={class:"sc-cron-num"},c={class:"sc-cron-num"},p={class:"sc-cron-num"};function m(e,l,t,m,h,f){const g=(0,a.g2)("el-button"),b=(0,a.g2)("el-dropdown-item"),_=(0,a.g2)("el-dropdown-menu"),k=(0,a.g2)("el-dropdown"),v=(0,a.g2)("el-input"),y=(0,a.g2)("el-radio-button"),F=(0,a.g2)("el-radio-group"),w=(0,a.g2)("el-form-item"),V=(0,a.g2)("el-input-number"),C=(0,a.g2)("el-option"),L=(0,a.g2)("el-select"),x=(0,a.g2)("el-form"),W=(0,a.g2)("el-tab-pane"),U=(0,a.g2)("el-tabs"),$=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(v,(0,a.v6)({modelValue:h.defaultValue,"onUpdate:modelValue":l[0]||(l[0]=e=>h.defaultValue=e)},e.$attrs),{append:(0,a.k6)((()=>[(0,a.bF)(k,{size:"medium",onCommand:f.handleShortcuts},{dropdown:(0,a.k6)((()=>[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{command:"0 * * * * ?"},{default:(0,a.k6)((()=>l[47]||(l[47]=[(0,a.eW)("每分钟")]))),_:1}),(0,a.bF)(b,{command:"0 0 * * * ?"},{default:(0,a.k6)((()=>l[48]||(l[48]=[(0,a.eW)("每小时")]))),_:1}),(0,a.bF)(b,{command:"0 0 0 * * ?"},{default:(0,a.k6)((()=>l[49]||(l[49]=[(0,a.eW)("每天零点")]))),_:1}),(0,a.bF)(b,{command:"0 0 0 1 * ?"},{default:(0,a.k6)((()=>l[50]||(l[50]=[(0,a.eW)("每月一号零点")]))),_:1}),(0,a.bF)(b,{command:"0 0 0 L * ?"},{default:(0,a.k6)((()=>l[51]||(l[51]=[(0,a.eW)("每月最后一天零点")]))),_:1}),(0,a.bF)(b,{command:"0 0 0 ? * 1"},{default:(0,a.k6)((()=>l[52]||(l[52]=[(0,a.eW)("每周星期日零点")]))),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.shortcuts,((e,l)=>((0,a.uX)(),(0,a.Wv)(b,{key:e.value,divided:0==l,command:e.value},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.text),1)])),_:2},1032,["divided","command"])))),128)),(0,a.bF)(b,{icon:"el-icon-plus",divided:"",command:"custom"},{default:(0,a.k6)((()=>l[53]||(l[53]=[(0,a.eW)("自定义")]))),_:1})])),_:1})])),default:(0,a.k6)((()=>[(0,a.bF)(g,{icon:"el-icon-arrow-down"})])),_:1},8,["onCommand"])])),_:1},16,["modelValue"]),(0,a.bF)($,{title:"cron规则生成器",modelValue:h.dialogVisible,"onUpdate:modelValue":l[46]||(l[46]=e=>h.dialogVisible=e),width:580,"destroy-on-close":"","append-to-body":""},{footer:(0,a.k6)((()=>[(0,a.bF)(g,{onClick:l[44]||(l[44]=e=>h.dialogVisible=!1)},{default:(0,a.k6)((()=>l[116]||(l[116]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(g,{type:"primary",onClick:l[45]||(l[45]=e=>f.submit())},{default:(0,a.k6)((()=>l[117]||(l[117]=[(0,a.eW)("确 认")]))),_:1})])),default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[(0,a.bF)(U,null,{default:(0,a.k6)((()=>[(0,a.bF)(W,null,{label:(0,a.k6)((()=>[(0,a.Lk)("div",s,[l[54]||(l[54]=(0,a.Lk)("h2",null,"秒",-1)),(0,a.Lk)("h4",null,(0,o.v_)(f.value_second),1)])])),default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:"类型"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:h.value.second.type,"onUpdate:modelValue":l[1]||(l[1]=e=>h.value.second.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:"0"},{default:(0,a.k6)((()=>l[55]||(l[55]=[(0,a.eW)("任意值")]))),_:1}),(0,a.bF)(y,{label:"1"},{default:(0,a.k6)((()=>l[56]||(l[56]=[(0,a.eW)("范围")]))),_:1}),(0,a.bF)(y,{label:"2"},{default:(0,a.k6)((()=>l[57]||(l[57]=[(0,a.eW)("间隔")]))),_:1}),(0,a.bF)(y,{label:"3"},{default:(0,a.k6)((()=>l[58]||(l[58]=[(0,a.eW)("指定")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),1==h.value.second.type?((0,a.uX)(),(0,a.Wv)(w,{key:0,label:"范围"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.second.range.start,"onUpdate:modelValue":l[2]||(l[2]=e=>h.value.second.range.start=e),min:0,max:59,"controls-position":"right"},null,8,["modelValue"]),l[59]||(l[59]=(0,a.Lk)("span",{style:{padding:"0 15px"}},"-",-1)),(0,a.bF)(V,{modelValue:h.value.second.range.end,"onUpdate:modelValue":l[3]||(l[3]=e=>h.value.second.range.end=e),min:0,max:59,"controls-position":"right"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),2==h.value.second.type?((0,a.uX)(),(0,a.Wv)(w,{key:1,label:"间隔"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.second.loop.start,"onUpdate:modelValue":l[4]||(l[4]=e=>h.value.second.loop.start=e),min:0,max:59,"controls-position":"right"},null,8,["modelValue"]),l[60]||(l[60]=(0,a.eW)(" 秒开始，每 ")),(0,a.bF)(V,{modelValue:h.value.second.loop.end,"onUpdate:modelValue":l[5]||(l[5]=e=>h.value.second.loop.end=e),min:0,max:59,"controls-position":"right"},null,8,["modelValue"]),l[61]||(l[61]=(0,a.eW)(" 秒执行一次 "))])),_:1})):(0,a.Q3)("",!0),3==h.value.second.type?((0,a.uX)(),(0,a.Wv)(w,{key:2,label:"指定"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{modelValue:h.value.second.appoint,"onUpdate:modelValue":l[6]||(l[6]=e=>h.value.second.appoint=e),multiple:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.second,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(W,null,{label:(0,a.k6)((()=>[(0,a.Lk)("div",r,[l[62]||(l[62]=(0,a.Lk)("h2",null,"分钟",-1)),(0,a.Lk)("h4",null,(0,o.v_)(f.value_minute),1)])])),default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:"类型"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:h.value.minute.type,"onUpdate:modelValue":l[7]||(l[7]=e=>h.value.minute.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:"0"},{default:(0,a.k6)((()=>l[63]||(l[63]=[(0,a.eW)("任意值")]))),_:1}),(0,a.bF)(y,{label:"1"},{default:(0,a.k6)((()=>l[64]||(l[64]=[(0,a.eW)("范围")]))),_:1}),(0,a.bF)(y,{label:"2"},{default:(0,a.k6)((()=>l[65]||(l[65]=[(0,a.eW)("间隔")]))),_:1}),(0,a.bF)(y,{label:"3"},{default:(0,a.k6)((()=>l[66]||(l[66]=[(0,a.eW)("指定")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),1==h.value.minute.type?((0,a.uX)(),(0,a.Wv)(w,{key:0,label:"范围"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.minute.range.start,"onUpdate:modelValue":l[8]||(l[8]=e=>h.value.minute.range.start=e),min:0,max:59,"controls-position":"right"},null,8,["modelValue"]),l[67]||(l[67]=(0,a.Lk)("span",{style:{padding:"0 15px"}},"-",-1)),(0,a.bF)(V,{modelValue:h.value.minute.range.end,"onUpdate:modelValue":l[9]||(l[9]=e=>h.value.minute.range.end=e),min:0,max:59,"controls-position":"right"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),2==h.value.minute.type?((0,a.uX)(),(0,a.Wv)(w,{key:1,label:"间隔"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.minute.loop.start,"onUpdate:modelValue":l[10]||(l[10]=e=>h.value.minute.loop.start=e),min:0,max:59,"controls-position":"right"},null,8,["modelValue"]),l[68]||(l[68]=(0,a.eW)(" 分钟开始，每 ")),(0,a.bF)(V,{modelValue:h.value.minute.loop.end,"onUpdate:modelValue":l[11]||(l[11]=e=>h.value.minute.loop.end=e),min:0,max:59,"controls-position":"right"},null,8,["modelValue"]),l[69]||(l[69]=(0,a.eW)(" 分钟执行一次 "))])),_:1})):(0,a.Q3)("",!0),3==h.value.minute.type?((0,a.uX)(),(0,a.Wv)(w,{key:2,label:"指定"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{modelValue:h.value.minute.appoint,"onUpdate:modelValue":l[12]||(l[12]=e=>h.value.minute.appoint=e),multiple:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.minute,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(W,null,{label:(0,a.k6)((()=>[(0,a.Lk)("div",d,[l[70]||(l[70]=(0,a.Lk)("h2",null,"小时",-1)),(0,a.Lk)("h4",null,(0,o.v_)(f.value_hour),1)])])),default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:"类型"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:h.value.hour.type,"onUpdate:modelValue":l[13]||(l[13]=e=>h.value.hour.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:"0"},{default:(0,a.k6)((()=>l[71]||(l[71]=[(0,a.eW)("任意值")]))),_:1}),(0,a.bF)(y,{label:"1"},{default:(0,a.k6)((()=>l[72]||(l[72]=[(0,a.eW)("范围")]))),_:1}),(0,a.bF)(y,{label:"2"},{default:(0,a.k6)((()=>l[73]||(l[73]=[(0,a.eW)("间隔")]))),_:1}),(0,a.bF)(y,{label:"3"},{default:(0,a.k6)((()=>l[74]||(l[74]=[(0,a.eW)("指定")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),1==h.value.hour.type?((0,a.uX)(),(0,a.Wv)(w,{key:0,label:"范围"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.hour.range.start,"onUpdate:modelValue":l[14]||(l[14]=e=>h.value.hour.range.start=e),min:0,max:23,"controls-position":"right"},null,8,["modelValue"]),l[75]||(l[75]=(0,a.Lk)("span",{style:{padding:"0 15px"}},"-",-1)),(0,a.bF)(V,{modelValue:h.value.hour.range.end,"onUpdate:modelValue":l[15]||(l[15]=e=>h.value.hour.range.end=e),min:0,max:23,"controls-position":"right"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),2==h.value.hour.type?((0,a.uX)(),(0,a.Wv)(w,{key:1,label:"间隔"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.hour.loop.start,"onUpdate:modelValue":l[16]||(l[16]=e=>h.value.hour.loop.start=e),min:0,max:23,"controls-position":"right"},null,8,["modelValue"]),l[76]||(l[76]=(0,a.eW)(" 小时开始，每 ")),(0,a.bF)(V,{modelValue:h.value.hour.loop.end,"onUpdate:modelValue":l[17]||(l[17]=e=>h.value.hour.loop.end=e),min:0,max:23,"controls-position":"right"},null,8,["modelValue"]),l[77]||(l[77]=(0,a.eW)(" 小时执行一次 "))])),_:1})):(0,a.Q3)("",!0),3==h.value.hour.type?((0,a.uX)(),(0,a.Wv)(w,{key:2,label:"指定"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{modelValue:h.value.hour.appoint,"onUpdate:modelValue":l[18]||(l[18]=e=>h.value.hour.appoint=e),multiple:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.hour,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(W,null,{label:(0,a.k6)((()=>[(0,a.Lk)("div",n,[l[78]||(l[78]=(0,a.Lk)("h2",null,"日",-1)),(0,a.Lk)("h4",null,(0,o.v_)(f.value_day),1)])])),default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:"类型"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:h.value.day.type,"onUpdate:modelValue":l[19]||(l[19]=e=>h.value.day.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:"0"},{default:(0,a.k6)((()=>l[79]||(l[79]=[(0,a.eW)("任意值")]))),_:1}),(0,a.bF)(y,{label:"1"},{default:(0,a.k6)((()=>l[80]||(l[80]=[(0,a.eW)("范围")]))),_:1}),(0,a.bF)(y,{label:"2"},{default:(0,a.k6)((()=>l[81]||(l[81]=[(0,a.eW)("间隔")]))),_:1}),(0,a.bF)(y,{label:"3"},{default:(0,a.k6)((()=>l[82]||(l[82]=[(0,a.eW)("指定")]))),_:1}),(0,a.bF)(y,{label:"4"},{default:(0,a.k6)((()=>l[83]||(l[83]=[(0,a.eW)("本月最后一天")]))),_:1}),(0,a.bF)(y,{label:"5"},{default:(0,a.k6)((()=>l[84]||(l[84]=[(0,a.eW)("不指定")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),1==h.value.day.type?((0,a.uX)(),(0,a.Wv)(w,{key:0,label:"范围"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.day.range.start,"onUpdate:modelValue":l[20]||(l[20]=e=>h.value.day.range.start=e),min:1,max:31,"controls-position":"right"},null,8,["modelValue"]),l[85]||(l[85]=(0,a.Lk)("span",{style:{padding:"0 15px"}},"-",-1)),(0,a.bF)(V,{modelValue:h.value.day.range.end,"onUpdate:modelValue":l[21]||(l[21]=e=>h.value.day.range.end=e),min:1,max:31,"controls-position":"right"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),2==h.value.day.type?((0,a.uX)(),(0,a.Wv)(w,{key:1,label:"间隔"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.day.loop.start,"onUpdate:modelValue":l[22]||(l[22]=e=>h.value.day.loop.start=e),min:1,max:31,"controls-position":"right"},null,8,["modelValue"]),l[86]||(l[86]=(0,a.eW)(" 号开始，每 ")),(0,a.bF)(V,{modelValue:h.value.day.loop.end,"onUpdate:modelValue":l[23]||(l[23]=e=>h.value.day.loop.end=e),min:1,max:31,"controls-position":"right"},null,8,["modelValue"]),l[87]||(l[87]=(0,a.eW)(" 天执行一次 "))])),_:1})):(0,a.Q3)("",!0),3==h.value.day.type?((0,a.uX)(),(0,a.Wv)(w,{key:2,label:"指定"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{modelValue:h.value.day.appoint,"onUpdate:modelValue":l[24]||(l[24]=e=>h.value.day.appoint=e),multiple:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.day,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(W,null,{label:(0,a.k6)((()=>[(0,a.Lk)("div",u,[l[88]||(l[88]=(0,a.Lk)("h2",null,"月",-1)),(0,a.Lk)("h4",null,(0,o.v_)(f.value_month),1)])])),default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:"类型"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:h.value.month.type,"onUpdate:modelValue":l[25]||(l[25]=e=>h.value.month.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:"0"},{default:(0,a.k6)((()=>l[89]||(l[89]=[(0,a.eW)("任意值")]))),_:1}),(0,a.bF)(y,{label:"1"},{default:(0,a.k6)((()=>l[90]||(l[90]=[(0,a.eW)("范围")]))),_:1}),(0,a.bF)(y,{label:"2"},{default:(0,a.k6)((()=>l[91]||(l[91]=[(0,a.eW)("间隔")]))),_:1}),(0,a.bF)(y,{label:"3"},{default:(0,a.k6)((()=>l[92]||(l[92]=[(0,a.eW)("指定")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),1==h.value.month.type?((0,a.uX)(),(0,a.Wv)(w,{key:0,label:"范围"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.month.range.start,"onUpdate:modelValue":l[26]||(l[26]=e=>h.value.month.range.start=e),min:1,max:12,"controls-position":"right"},null,8,["modelValue"]),l[93]||(l[93]=(0,a.Lk)("span",{style:{padding:"0 15px"}},"-",-1)),(0,a.bF)(V,{modelValue:h.value.month.range.end,"onUpdate:modelValue":l[27]||(l[27]=e=>h.value.month.range.end=e),min:1,max:12,"controls-position":"right"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),2==h.value.month.type?((0,a.uX)(),(0,a.Wv)(w,{key:1,label:"间隔"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.month.loop.start,"onUpdate:modelValue":l[28]||(l[28]=e=>h.value.month.loop.start=e),min:1,max:12,"controls-position":"right"},null,8,["modelValue"]),l[94]||(l[94]=(0,a.eW)(" 月开始，每 ")),(0,a.bF)(V,{modelValue:h.value.month.loop.end,"onUpdate:modelValue":l[29]||(l[29]=e=>h.value.month.loop.end=e),min:1,max:12,"controls-position":"right"},null,8,["modelValue"]),l[95]||(l[95]=(0,a.eW)(" 月执行一次 "))])),_:1})):(0,a.Q3)("",!0),3==h.value.month.type?((0,a.uX)(),(0,a.Wv)(w,{key:2,label:"指定"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{modelValue:h.value.month.appoint,"onUpdate:modelValue":l[30]||(l[30]=e=>h.value.month.appoint=e),multiple:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.month,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(W,null,{label:(0,a.k6)((()=>[(0,a.Lk)("div",c,[l[96]||(l[96]=(0,a.Lk)("h2",null,"周",-1)),(0,a.Lk)("h4",null,(0,o.v_)(f.value_week),1)])])),default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:"类型"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:h.value.week.type,"onUpdate:modelValue":l[31]||(l[31]=e=>h.value.week.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:"0"},{default:(0,a.k6)((()=>l[97]||(l[97]=[(0,a.eW)("任意值")]))),_:1}),(0,a.bF)(y,{label:"1"},{default:(0,a.k6)((()=>l[98]||(l[98]=[(0,a.eW)("范围")]))),_:1}),(0,a.bF)(y,{label:"2"},{default:(0,a.k6)((()=>l[99]||(l[99]=[(0,a.eW)("间隔")]))),_:1}),(0,a.bF)(y,{label:"3"},{default:(0,a.k6)((()=>l[100]||(l[100]=[(0,a.eW)("指定")]))),_:1}),(0,a.bF)(y,{label:"4"},{default:(0,a.k6)((()=>l[101]||(l[101]=[(0,a.eW)("本月最后一周")]))),_:1}),(0,a.bF)(y,{label:"5"},{default:(0,a.k6)((()=>l[102]||(l[102]=[(0,a.eW)("不指定")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),1==h.value.week.type?((0,a.uX)(),(0,a.Wv)(w,{key:0,label:"范围"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{modelValue:h.value.week.range.start,"onUpdate:modelValue":l[32]||(l[32]=e=>h.value.week.range.start=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.week,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),l[103]||(l[103]=(0,a.Lk)("span",{style:{padding:"0 15px"}},"-",-1)),(0,a.bF)(L,{modelValue:h.value.week.range.end,"onUpdate:modelValue":l[33]||(l[33]=e=>h.value.week.range.end=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.week,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),2==h.value.week.type?((0,a.uX)(),(0,a.Wv)(w,{key:1,label:"间隔"},{default:(0,a.k6)((()=>[l[104]||(l[104]=(0,a.eW)(" 第 ")),(0,a.bF)(V,{modelValue:h.value.week.loop.start,"onUpdate:modelValue":l[34]||(l[34]=e=>h.value.week.loop.start=e),min:1,max:4,"controls-position":"right"},null,8,["modelValue"]),l[105]||(l[105]=(0,a.eW)(" 周的星期 ")),(0,a.bF)(L,{modelValue:h.value.week.loop.end,"onUpdate:modelValue":l[35]||(l[35]=e=>h.value.week.loop.end=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.week,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),l[106]||(l[106]=(0,a.eW)(" 执行一次 "))])),_:1})):(0,a.Q3)("",!0),3==h.value.week.type?((0,a.uX)(),(0,a.Wv)(w,{key:2,label:"指定"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{modelValue:h.value.week.appoint,"onUpdate:modelValue":l[36]||(l[36]=e=>h.value.week.appoint=e),multiple:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.week,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),4==h.value.week.type?((0,a.uX)(),(0,a.Wv)(w,{key:3,label:"最后一周"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{modelValue:h.value.week.last,"onUpdate:modelValue":l[37]||(l[37]=e=>h.value.week.last=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.week,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.bF)(W,null,{label:(0,a.k6)((()=>[(0,a.Lk)("div",p,[l[107]||(l[107]=(0,a.Lk)("h2",null,"年",-1)),(0,a.Lk)("h4",null,(0,o.v_)(f.value_year),1)])])),default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:"类型"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:h.value.year.type,"onUpdate:modelValue":l[38]||(l[38]=e=>h.value.year.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(y,{label:"-1"},{default:(0,a.k6)((()=>l[108]||(l[108]=[(0,a.eW)("忽略")]))),_:1}),(0,a.bF)(y,{label:"0"},{default:(0,a.k6)((()=>l[109]||(l[109]=[(0,a.eW)("任意值")]))),_:1}),(0,a.bF)(y,{label:"1"},{default:(0,a.k6)((()=>l[110]||(l[110]=[(0,a.eW)("范围")]))),_:1}),(0,a.bF)(y,{label:"2"},{default:(0,a.k6)((()=>l[111]||(l[111]=[(0,a.eW)("间隔")]))),_:1}),(0,a.bF)(y,{label:"3"},{default:(0,a.k6)((()=>l[112]||(l[112]=[(0,a.eW)("指定")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),1==h.value.year.type?((0,a.uX)(),(0,a.Wv)(w,{key:0,label:"范围"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.year.range.start,"onUpdate:modelValue":l[39]||(l[39]=e=>h.value.year.range.start=e),"controls-position":"right"},null,8,["modelValue"]),l[113]||(l[113]=(0,a.Lk)("span",{style:{padding:"0 15px"}},"-",-1)),(0,a.bF)(V,{modelValue:h.value.year.range.end,"onUpdate:modelValue":l[40]||(l[40]=e=>h.value.year.range.end=e),"controls-position":"right"},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),2==h.value.year.type?((0,a.uX)(),(0,a.Wv)(w,{key:1,label:"间隔"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{modelValue:h.value.year.loop.start,"onUpdate:modelValue":l[41]||(l[41]=e=>h.value.year.loop.start=e),"controls-position":"right"},null,8,["modelValue"]),l[114]||(l[114]=(0,a.eW)(" 年开始，每 ")),(0,a.bF)(V,{modelValue:h.value.year.loop.end,"onUpdate:modelValue":l[42]||(l[42]=e=>h.value.year.loop.end=e),min:1,"controls-position":"right"},null,8,["modelValue"]),l[115]||(l[115]=(0,a.eW)(" 年执行一次 "))])),_:1})):(0,a.Q3)("",!0),3==h.value.year.type?((0,a.uX)(),(0,a.Wv)(w,{key:2,label:"指定"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{modelValue:h.value.year.appoint,"onUpdate:modelValue":l[43]||(l[43]=e=>h.value.year.appoint=e),multiple:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(h.data.year,((e,l)=>((0,a.uX)(),(0,a.Wv)(C,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1})])])),_:1},8,["modelValue"])],64)}t(78982);var h={props:{modelValue:{type:String,default:"* * * * * ?"},shortcuts:{type:Array,default:()=>[]}},data(){return{type:"0",defaultValue:"",dialogVisible:!1,value:{second:{type:"0",range:{start:1,end:2},loop:{start:0,end:1},appoint:[]},minute:{type:"0",range:{start:1,end:2},loop:{start:0,end:1},appoint:[]},hour:{type:"0",range:{start:1,end:2},loop:{start:0,end:1},appoint:[]},day:{type:"0",range:{start:1,end:2},loop:{start:1,end:1},appoint:[]},month:{type:"0",range:{start:1,end:2},loop:{start:1,end:1},appoint:[]},week:{type:"5",range:{start:"2",end:"3"},loop:{start:0,end:"2"},last:"2",appoint:[]},year:{type:"-1",range:{start:this.getYear()[0],end:this.getYear()[1]},loop:{start:this.getYear()[0],end:1},appoint:[]}},data:{second:["0","5","15","20","25","30","35","40","45","50","55","59"],minute:["0","5","15","20","25","30","35","40","45","50","55","59"],hour:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],day:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],month:["1","2","3","4","5","6","7","8","9","10","11","12"],week:[{value:"1",label:"周日"},{value:"2",label:"周一"},{value:"3",label:"周二"},{value:"4",label:"周三"},{value:"5",label:"周四"},{value:"6",label:"周五"},{value:"7",label:"周六"}],year:this.getYear()}}},watch:{"value.week.type"(e){"5"!=e&&(this.value.day.type="5")},"value.day.type"(e){"5"!=e&&(this.value.week.type="5")},modelValue(){this.defaultValue=this.modelValue}},computed:{value_second(){let e=this.value.second;return 0==e.type?"*":1==e.type?e.range.start+"-"+e.range.end:2==e.type?e.loop.start+"/"+e.loop.end:3==e.type&&e.appoint.length>0?e.appoint.join(","):"*"},value_minute(){let e=this.value.minute;return 0==e.type?"*":1==e.type?e.range.start+"-"+e.range.end:2==e.type?e.loop.start+"/"+e.loop.end:3==e.type&&e.appoint.length>0?e.appoint.join(","):"*"},value_hour(){let e=this.value.hour;return 0==e.type?"*":1==e.type?e.range.start+"-"+e.range.end:2==e.type?e.loop.start+"/"+e.loop.end:3==e.type&&e.appoint.length>0?e.appoint.join(","):"*"},value_day(){let e=this.value.day;return 0==e.type?"*":1==e.type?e.range.start+"-"+e.range.end:2==e.type?e.loop.start+"/"+e.loop.end:3==e.type?e.appoint.length>0?e.appoint.join(","):"*":4==e.type?"L":5==e.type?"?":"*"},value_month(){let e=this.value.month;return 0==e.type?"*":1==e.type?e.range.start+"-"+e.range.end:2==e.type?e.loop.start+"/"+e.loop.end:3==e.type&&e.appoint.length>0?e.appoint.join(","):"*"},value_week(){let e=this.value.week;return 0==e.type?"*":1==e.type?e.range.start+"-"+e.range.end:2==e.type?e.loop.end+"#"+e.loop.start:3==e.type?e.appoint.length>0?e.appoint.join(","):"*":4==e.type?e.last+"L":5==e.type?"?":"*"},value_year(){let e=this.value.year;return-1==e.type?"":0==e.type?"*":1==e.type?e.range.start+"-"+e.range.end:2==e.type?e.loop.start+"/"+e.loop.end:3==e.type&&e.appoint.length>0?e.appoint.join(","):""}},mounted(){this.defaultValue=this.modelValue},methods:{handleShortcuts(e){"custom"==e?this.open():(this.defaultValue=e,this.$emit("update:modelValue",this.defaultValue))},open(){this.set(),this.dialogVisible=!0},set(){this.defaultValue=this.modelValue;let e=(this.modelValue||"* * * * * ?").split(" ");e.length<6&&(this.$message.warning("cron表达式错误，已转换为默认表达式"),e="* * * * * ?".split(" ")),"*"==e[0]?this.value.second.type="0":e[0].includes("-")?(this.value.second.type="1",this.value.second.range.start=Number(e[0].split("-")[0]),this.value.second.range.end=Number(e[0].split("-")[1])):e[0].includes("/")?(this.value.second.type="2",this.value.second.loop.start=Number(e[0].split("/")[0]),this.value.second.loop.end=Number(e[0].split("/")[1])):(this.value.second.type="3",this.value.second.appoint=e[0].split(",")),"*"==e[1]?this.value.minute.type="0":e[1].includes("-")?(this.value.minute.type="1",this.value.minute.range.start=Number(e[1].split("-")[0]),this.value.minute.range.end=Number(e[1].split("-")[1])):e[1].includes("/")?(this.value.minute.type="2",this.value.minute.loop.start=Number(e[1].split("/")[0]),this.value.minute.loop.end=Number(e[1].split("/")[1])):(this.value.minute.type="3",this.value.minute.appoint=e[1].split(",")),"*"==e[2]?this.value.hour.type="0":e[2].includes("-")?(this.value.hour.type="1",this.value.hour.range.start=Number(e[2].split("-")[0]),this.value.hour.range.end=Number(e[2].split("-")[1])):e[2].includes("/")?(this.value.hour.type="2",this.value.hour.loop.start=Number(e[2].split("/")[0]),this.value.hour.loop.end=Number(e[2].split("/")[1])):(this.value.hour.type="3",this.value.hour.appoint=e[2].split(",")),"*"==e[3]?this.value.day.type="0":"L"==e[3]?this.value.day.type="4":"?"==e[3]?this.value.day.type="5":e[3].includes("-")?(this.value.day.type="1",this.value.day.range.start=Number(e[3].split("-")[0]),this.value.day.range.end=Number(e[3].split("-")[1])):e[3].includes("/")?(this.value.day.type="2",this.value.day.loop.start=Number(e[3].split("/")[0]),this.value.day.loop.end=Number(e[3].split("/")[1])):(this.value.day.type="3",this.value.day.appoint=e[3].split(",")),"*"==e[4]?this.value.month.type="0":e[4].includes("-")?(this.value.month.type="1",this.value.month.range.start=Number(e[4].split("-")[0]),this.value.month.range.end=Number(e[4].split("-")[1])):e[4].includes("/")?(this.value.month.type="2",this.value.month.loop.start=Number(e[4].split("/")[0]),this.value.month.loop.end=Number(e[4].split("/")[1])):(this.value.month.type="3",this.value.month.appoint=e[4].split(",")),"*"==e[5]?this.value.week.type="0":"?"==e[5]?this.value.week.type="5":e[5].includes("-")?(this.value.week.type="1",this.value.week.range.start=e[5].split("-")[0],this.value.week.range.end=e[5].split("-")[1]):e[5].includes("#")?(this.value.week.type="2",this.value.week.loop.start=Number(e[5].split("#")[1]),this.value.week.loop.end=e[5].split("#")[0]):e[5].includes("L")?(this.value.week.type="4",this.value.week.last=e[5].split("L")[0]):(this.value.week.type="3",this.value.week.appoint=e[5].split(",")),e[6]?"*"==e[6]?this.value.year.type="0":e[6].includes("-")?(this.value.year.type="1",this.value.year.range.start=Number(e[6].split("-")[0]),this.value.year.range.end=Number(e[6].split("-")[1])):e[6].includes("/")?(this.value.year.type="2",this.value.year.loop.start=Number(e[6].split("/")[1]),this.value.year.loop.end=Number(e[6].split("/")[0])):(this.value.year.type="3",this.value.year.appoint=e[6].split(",")):this.value.year.type="-1"},getYear(){let e=[],l=(new Date).getFullYear();for(let t=0;t<11;t++)e.push(l+t);return e},submit(){let e=this.value_year?" "+this.value_year:"";this.defaultValue=this.value_second+" "+this.value_minute+" "+this.value_hour+" "+this.value_day+" "+this.value_month+" "+this.value_week+e,this.$emit("update:modelValue",this.defaultValue),this.dialogVisible=!1}}},f=t(51456);const g=(0,f.A)(h,[["render",m],["__scopeId","data-v-374fb9c7"]]);var b=g},22402:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return f}});var a=t(51464);const o={class:"sc-cropper"},i={class:"sc-cropper__img"},s=["src"],r={class:"sc-cropper__preview"},d={class:"sc-cropper__preview__img",ref:"preview"};function n(e,l,t,n,u,c){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",i,[(0,a.Lk)("img",{src:t.src,ref:"img"},null,8,s)]),(0,a.Lk)("div",r,[l[0]||(l[0]=(0,a.Lk)("h4",null,"图像预览",-1)),(0,a.Lk)("div",d,null,512)])])}var u=t(71975),c=t.n(u),p={props:{src:{type:String,default:""},compress:{type:Number,default:1},aspectRatio:{type:Number,default:NaN}},data(){return{crop:null}},watch:{aspectRatio(e){this.crop.setAspectRatio(e)}},mounted(){this.init()},methods:{init(){this.crop=new(c())(this.$refs.img,{viewMode:2,dragMode:"move",responsive:!1,aspectRatio:this.aspectRatio,preview:this.$refs.preview})},setAspectRatio(e){this.crop.setAspectRatio(e)},getCropData(e,l="image/jpeg"){e(this.crop.getCroppedCanvas().toDataURL(l,this.compress))},getCropBlob(e,l="image/jpeg"){this.crop.getCroppedCanvas().toBlob((l=>{e(l)}),l,this.compress)},getCropFile(e,l="fileName.jpg",t="image/jpeg"){this.crop.getCroppedCanvas().toBlob((a=>{let o=new File([a],l,{type:t});e(o)}),t,this.compress)}}},m=t(51456);const h=(0,m.A)(p,[["render",n],["__scopeId","data-v-5a089473"]]);var f=h},83547:function(e,l,t){"use strict";t.d(l,{A:function(){return m}});var a=t(51464),o=t(51681);function i(e,l,t,i,s,r){return(0,a.uX)(),(0,a.CE)("div",{ref:"scEcharts",style:(0,o.Tr)({height:t.height,width:t.width})},null,4)}var s=t(5820);const r={color:["#409EFF","#36CE9E","#f56e6a","#626c91","#edb00d","#909399"],grid:{left:"3%",right:"3%",bottom:"10",top:"40",containLabel:!0},legend:{textStyle:{color:"#999"},inactiveColor:"rgba(128,128,128,0.4)"},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"rgba(128,128,128,0.2)",width:1}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{color:"#999"},splitLine:{show:!1,lineStyle:{color:["#eee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(255,255,255,0.01)","rgba(0,0,0,0.01)"]}}},valueAxis:{axisLine:{show:!1,lineStyle:{color:"#999"}},splitLine:{show:!0,lineStyle:{color:"rgba(128,128,128,0.2)"}}}};var d=r;s.registerTheme("T",d);const n=e=>e&&(e.__v_raw||e.valueOf()||e);var u={...s,name:"scEcharts",props:{height:{type:String,default:"100%"},width:{type:String,default:"100%"},nodata:{type:Boolean,default:!1},option:{type:Object,default:()=>{}}},data(){return{isActivat:!1,myChart:null}},watch:{option:{deep:!0,handler(e){n(this.myChart).setOption(e)}}},computed:{myOptions:function(){return this.option||{}}},activated(){this.isActivat||this.$nextTick((()=>{this.myChart.resize()}))},deactivated(){this.isActivat=!1},mounted(){this.isActivat=!0,this.$nextTick((()=>{this.draw()}))},methods:{draw(){var e=s.init(this.$refs.scEcharts,"T");e.setOption(this.myOptions),this.myChart=e,window.addEventListener("resize",(()=>e.resize()))}}},c=t(51456);const p=(0,c.A)(u,[["render",i]]);var m=p},387:function(e,l,t){"use strict";t.d(l,{A:function(){return $}});var a=t(51464),o=t(51681),i=t(45883);const s={class:"sc-file-select"},r={class:"sc-file-select__side"},d={class:"sc-file-select__side-menu"},n={class:"el-tree-node__label"},u={key:0,class:"sc-file-select__side-msg"},c={class:"sc-file-select__files"},p={class:"sc-file-select__top"},m={key:0,class:"upload"},h={class:"tips"},f={class:"keyword"},g={class:"sc-file-select__list"},b={class:"sc-file-select__item__file"},_={class:"sc-file-select__item__checkbox"},k={class:"sc-file-select__item__select"},v={key:0,class:"sc-file-select__item__box"},y={class:"sc-file-select__pagination"},F={class:"sc-file-select__do"};function w(e,l,t,w,V,C){const L=(0,a.g2)("el-icon-folder"),x=(0,a.g2)("el-icon"),W=(0,a.g2)("el-tree"),U=(0,a.g2)("el-alert"),$=(0,a.g2)("el-button"),j=(0,a.g2)("el-upload"),I=(0,a.g2)("el-icon-warning"),D=(0,a.g2)("el-input"),T=(0,a.g2)("el-image"),S=(0,a.g2)("el-icon-check"),X=(0,a.g2)("el-pagination"),N=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",d,[(0,a.bF)(W,{class:"menu",data:V.menu,onNodeClick:C.groupClick},{default:(0,a.k6)((({data:e})=>[(0,a.Lk)("span",n,[(0,a.bF)(x,{class:"icon"},{default:(0,a.k6)((()=>[(0,a.bF)(L)])),_:1}),(0,a.eW)((0,o.v_)(e.folder_name_),1)])])),_:1},8,["data","onNodeClick"])]),t.multiple?((0,a.uX)(),(0,a.CE)("div",u,[l[2]||(l[2]=(0,a.eW)(" 已选择 ")),(0,a.Lk)("b",null,(0,o.v_)(V.value.length),1),l[3]||(l[3]=(0,a.eW)(" / ")),(0,a.Lk)("b",null,(0,o.v_)(t.max),1),l[4]||(l[4]=(0,a.eW)(" 项 "))])):(0,a.Q3)("",!0)])),[[N,V.menuLoading]]),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(U,{title:`上传至文件夹 - “${w.folderInfo.folder_name_??"?"}”`,type:"success",style:{"margin-bottom":"20px"}},null,8,["title"]),(0,a.Lk)("div",p,[t.hideUpload?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",m,[(0,a.bF)(j,{class:"sc-file-select__upload",multiple:"","show-file-list":!1,"file-list":V.fileList,"on-change":C.uploadChange,"before-upload":C.uploadBefore,"on-error":C.uploadError,"http-request":C.uploadRequest},{default:(0,a.k6)((()=>[(0,a.bF)($,{type:"primary",icon:"el-icon-upload"},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.eW)("本地上传 (批量)")]))),_:1})])),_:1},8,["file-list","on-change","before-upload","on-error","http-request"]),(0,a.Lk)("span",h,[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(I)])),_:1}),(0,a.eW)("大小不超过"+(0,o.v_)(t.maxSize)+"MB",1)])])),(0,a.Lk)("div",f,[(0,a.bF)(D,{modelValue:V.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>V.keyword=e),"prefix-icon":"el-icon-search",placeholder:"文件名搜索",clearable:"",onKeyup:(0,i.jR)(C.search,["enter"]),onClear:C.search},null,8,["modelValue","onKeyup","onClear"])])]),(0,a.Lk)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(V.data,((l,i)=>((0,a.uX)(),(0,a.CE)("div",{key:i,class:"sc-file-select__item"},[(0,a.Lk)("div",b,[(0,a.bF)(T,{src:e.$CONFIG.FILE_URL+"/images/"+l.file_path_+"/"+l.file_id_+l.file_type_,"preview-src-list":[e.$CONFIG.FILE_URL+"/images/"+l.file_path_+"/"+l.file_id_+l.file_type_],fit:"contain",lazy:""},null,8,["src","preview-src-list"]),(0,a.Lk)("div",_,[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(S)])),_:1})]),(0,a.Lk)("div",k,[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(S)])),_:1})]),t.multiple?((0,a.uX)(),(0,a.CE)("div",v)):(0,a.Q3)("",!0)]),(0,a.Lk)("p",null,(0,o.v_)(l.file_name_),1)])))),128))]),(0,a.Lk)("div",y,[(0,a.bF)(X,{small:"",background:"",layout:"prev, pager, next",total:V.total,"page-size":V.pageSize,currentPage:V.currentPage,"onUpdate:currentPage":l[1]||(l[1]=e=>V.currentPage=e),onCurrentChange:C.reload},null,8,["total","page-size","currentPage","onCurrentChange"])]),(0,a.Lk)("div",F,[(0,a.bF)($,{type:"primary",disabled:V.value.length<=0,onClick:C.submit},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("确 定")]))),_:1},8,["disabled","onClick"])])])),[[N,V.listLoading]])])}var V=t(80060),C={apiObj:V.A.common.upload,successCode:200,maxSize:30,max:99,uploadParseData:function(e){return{id:e.data.id,fileName:e.data.fileName,url:e.data.src}},listParseData:function(e){return{rows:e.data.rows,total:e.data.total,msg:e.message,code:e.code}},request:{page:"page",pageSize:"pageSize",keyword:"keyword",menuKey:"groupId"},menuProps:{key:"id",label:"label",children:"children"},fileProps:{key:"id",fileName:"fileName",url:"url"},files:{doc:{icon:"sc-icon-file-word-2-fill",color:"#409eff"},docx:{icon:"sc-icon-file-word-2-fill",color:"#409eff"},xls:{icon:"sc-icon-file-excel-2-fill",color:"#67C23A"},xlsx:{icon:"sc-icon-file-excel-2-fill",color:"#67C23A"},ppt:{icon:"sc-icon-file-ppt-2-fill",color:"#F56C6C"},pptx:{icon:"sc-icon-file-ppt-2-fill",color:"#F56C6C"}}},L=t(34633),x={props:{modelValue:null,hideUpload:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},max:{type:Number,default:C.max},onlyImage:{type:Boolean,default:!1},maxSize:{type:Number,default:C.maxSize}},data(){return{keyword:null,pageSize:20,total:0,currentPage:1,data:[],menu:[],menuId:"",value:this.multiple?[]:"",fileList:[],accept:this.onlyImage?"image/gif, image/jpeg, image/png":"",listLoading:!1,menuLoading:!1,treeProps:C.menuProps,fileProps:C.fileProps,files:C.files,folderData:{},formData:new FormData,fileInput:null}},setup(){const e=(0,L.D)(),l=l=>{e.revamp(l)};return{folderInfo:(0,a.EW)((()=>e.folderInfo)),handleRevamp:l}},watch:{multiple(){this.value=this.multiple?[]:"",this.$emit("update:modelValue",JSON.parse(JSON.stringify(this.value)))}},mounted(){this.getMenu(),this.getData()},methods:{submitForm(){const e=new FormData,l=this.$refs.fileInput.files;e.append("fileData",l),console.log(l,"files");const t=e.get("file");console.log("文件名:",t.name),console.log("文件类型:",t.type),console.log("文件大小:",t.size),console.log("最后修改日期:",t.lastModified)},async getMenu(){this.menuLoading=!0;var e=await this.$fileApi.file.menu.get();this.menu=e,this.menuLoading=!1},async getData(){this.listLoading=!0;var e={[C.request.menuKey]:this.menuId,[C.request.page]:this.currentPage,[C.request.pageSize]:this.pageSize,[C.request.keyword]:this.keyword};this.onlyImage&&(e.type="image");var l=await this.$fileApi.file.list.get(e);this.data=l,this.listLoading=!1},async getImgFolat(e){var l=await this.$fileApi.file.folderFile.post(e);this.data=l},groupClick(e){this.folderData=e,this.handleRevamp(e),this.getImgFolat(e)},reload(){this.getData()},search(){this.currentPage=1,this.getData()},submit(){const e=JSON.parse(JSON.stringify(this.value));this.$emit("update:modelValue",e),this.$emit("submit",e)},uploadChange(e,l){this.formData.append("file_path_","0"),this.formData.append("file",e),console.log("文件已变更:",l),console.log("文件已变更file:",e)},uploadBefore(e){console.log(e.size,"上传文件之前");const l=e.size/1024/1024<this.maxSize;if(!l)return this.$message.warning(`上传文件大小不能超过 ${this.maxSize}MB!`),!1},async uploadRequest(e){const{file:l}=e,t=new FormData;t.append("file_path_",this.folderData.file_path_),t.append("file",l);try{await this.$fileApi.upload.post(t)}catch(a){console.error("上传失败:",a),alert("文件上传失败")}},uploadSuccess(e,l){console.log(e,l,"res, fileres, file")},uploadError(e,l,t){console.log("上传失败:",e,l,t)},_isImg(e){const l=[".jpg",".jpeg",".png",".gif",".bmp"],t=e.substring(e.lastIndexOf("."));return-1!=l.indexOf(t)},_getExt(e){return e.substring(e.lastIndexOf(".")+1)}}},W=t(51456);const U=(0,W.A)(x,[["render",w],["__scopeId","data-v-5aeed135"]]);var $=U},76695:function(e,l,t){"use strict";t.d(l,{A:function(){return h}});var a=t(51464),o=t(51681);const i={class:"sc-icon-select"},s={class:"sc-icon-select__dialog",style:{margin:"-20px 0 -10px 0"}},r={class:"sc-icon-select__list"},d=["data-icon"];function n(e,l,t,n,u,c){const p=(0,a.g2)("el-input"),m=(0,a.g2)("el-form-item"),h=(0,a.g2)("el-form"),f=(0,a.g2)("el-tag"),g=(0,a.g2)("el-empty"),b=(0,a.g2)("el-icon"),_=(0,a.g2)("el-scrollbar"),k=(0,a.g2)("el-tab-pane"),v=(0,a.g2)("el-tabs"),y=(0,a.g2)("el-button"),F=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",{class:(0,o.C4)(["sc-icon-select__wrapper",{hasValue:u.value}]),onClick:l[1]||(l[1]=(...e)=>c.open&&c.open(...e))},[(0,a.bF)(p,{"prefix-icon":u.value||"el-icon-plus",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),disabled:t.disabled,readonly:""},null,8,["prefix-icon","modelValue","disabled"])],2),(0,a.bF)(F,{title:"图标选择器",modelValue:u.dialogVisible,"onUpdate:modelValue":l[5]||(l[5]=e=>u.dialogVisible=e),width:760,"destroy-on-close":"","append-to-body":""},{footer:(0,a.k6)((()=>[(0,a.bF)(y,{onClick:c.clear,text:""},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("清除")]))),_:1},8,["onClick"]),(0,a.bF)(y,{onClick:l[4]||(l[4]=e=>u.dialogVisible=!1)},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("取消")]))),_:1})])),default:(0,a.k6)((()=>[(0,a.Lk)("div",s,[(0,a.bF)(h,{rules:{}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{prop:"searchText"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"sc-icon-select__search-input","prefix-icon":"el-icon-search",modelValue:u.searchText,"onUpdate:modelValue":l[2]||(l[2]=e=>u.searchText=e),placeholder:"搜索",size:"large",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(v,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(u.data,(e=>((0,a.uX)(),(0,a.Wv)(k,{key:e.name,lazy:""},{label:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.name)+" ",1),(0,a.bF)(f,{size:"small",type:"info"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.icons.length),1)])),_:2},1024)])),default:(0,a.k6)((()=>[(0,a.Lk)("div",r,[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("ul",{onClick:l[3]||(l[3]=(...e)=>c.selectIcon&&c.selectIcon(...e))},[0==e.icons.length?((0,a.uX)(),(0,a.Wv)(g,{key:0,"image-size":100,description:"未查询到相关图标"})):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.icons,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e},[(0,a.Lk)("span",{"data-icon":e},null,8,d),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e)))])),_:2},1024)])))),128))])])),_:2},1024)])])),_:2},1024)))),128))])),_:1})])])),_:1},8,["modelValue"])])}t(78982),t(64660),t(40772),t(89593);var u={icons:[{name:"默认",icons:["el-icon-add-location","el-icon-aim","el-icon-alarm-clock","el-icon-apple","el-icon-arrow-down","el-icon-arrow-down-bold","el-icon-arrow-left","el-icon-arrow-left-bold","el-icon-arrow-right","el-icon-arrow-right-bold","el-icon-arrow-up","el-icon-arrow-up-bold","el-icon-avatar","el-icon-back","el-icon-baseball","el-icon-basketball","el-icon-bell","el-icon-bell-filled","el-icon-bicycle","el-icon-bottom","el-icon-bottom-left","el-icon-bottom-right","el-icon-bowl","el-icon-box","el-icon-briefcase","el-icon-brush","el-icon-brush-filled","el-icon-burger","el-icon-calendar","el-icon-camera","el-icon-camera-filled","el-icon-caret-bottom","el-icon-caret-left","el-icon-caret-right","el-icon-caret-top","el-icon-cellphone","el-icon-chat-dot-round","el-icon-chat-dot-square","el-icon-chat-line-round","el-icon-chat-line-square","el-icon-chat-round","el-icon-chat-square","el-icon-check","el-icon-checked","el-icon-cherry","el-icon-chicken","el-icon-circle-check","el-icon-circle-check-filled","el-icon-circle-close","el-icon-circle-close-filled","el-icon-circle-plus","el-icon-circle-plus-filled","el-icon-clock","el-icon-close","el-icon-close-bold","el-icon-cloudy","el-icon-coffee","el-icon-coffee-cup","el-icon-coin","el-icon-cold-drink","el-icon-collection","el-icon-collection-tag","el-icon-comment","el-icon-compass","el-icon-connection","el-icon-coordinate","el-icon-copy-document","el-icon-cpu","el-icon-credit-card","el-icon-crop","el-icon-d-arrow-left","el-icon-d-arrow-right","el-icon-d-caret","el-icon-data-analysis","el-icon-data-board","el-icon-data-line","el-icon-delete","el-icon-delete-filled","el-icon-delete-location","el-icon-dessert","el-icon-discount","el-icon-dish","el-icon-dish-dot","el-icon-document","el-icon-document-add","el-icon-document-checked","el-icon-document-copy","el-icon-document-delete","el-icon-document-remove","el-icon-download","el-icon-drizzling","el-icon-edit","el-icon-edit-pen","el-icon-eleme","el-icon-eleme-filled","el-icon-element-plus","el-icon-expand","el-icon-failed","el-icon-female","el-icon-files","el-icon-film","el-icon-filter","el-icon-finished","el-icon-first-aid-kit","el-icon-flag","el-icon-fold","el-icon-folder","el-icon-folder-add","el-icon-folder-checked","el-icon-folder-delete","el-icon-folder-opened","el-icon-folder-remove","el-icon-food","el-icon-football","el-icon-fork-spoon","el-icon-fries","el-icon-full-screen","el-icon-goblet","el-icon-goblet-full","el-icon-goblet-square","el-icon-goblet-square-full","el-icon-goods","el-icon-goods-filled","el-icon-grape","el-icon-grid","el-icon-guide","el-icon-headset","el-icon-help","el-icon-help-filled","el-icon-hide","el-icon-histogram","el-icon-home-filled","el-icon-hot-water","el-icon-house","el-icon-ice-cream","el-icon-ice-cream-round","el-icon-ice-cream-square","el-icon-ice-drink","el-icon-ice-tea","el-icon-info-filled","el-icon-iphone","el-icon-key","el-icon-knife-fork","el-icon-lightning","el-icon-link","el-icon-list","el-icon-loading","el-icon-location","el-icon-location-filled","el-icon-location-information","el-icon-lock","el-icon-lollipop","el-icon-magic-stick","el-icon-magnet","el-icon-male","el-icon-management","el-icon-map-location","el-icon-medal","el-icon-menu","el-icon-message","el-icon-message-box","el-icon-mic","el-icon-microphone","el-icon-milk-tea","el-icon-minus","el-icon-money","el-icon-monitor","el-icon-moon","el-icon-moon-night","el-icon-more","el-icon-more-filled","el-icon-mostly-cloudy","el-icon-mouse","el-icon-mug","el-icon-mute","el-icon-mute-notification","el-icon-no-smoking","el-icon-notebook","el-icon-notification","el-icon-odometer","el-icon-office-building","el-icon-open","el-icon-operation","el-icon-opportunity","el-icon-orange","el-icon-paperclip","el-icon-partly-cloudy","el-icon-pear","el-icon-phone","el-icon-phone-filled","el-icon-picture","el-icon-picture-filled","el-icon-picture-rounded","el-icon-pie-chart","el-icon-place","el-icon-platform","el-icon-plus","el-icon-pointer","el-icon-position","el-icon-postcard","el-icon-pouring","el-icon-present","el-icon-price-tag","el-icon-printer","el-icon-promotion","el-icon-question-filled","el-icon-rank","el-icon-reading","el-icon-reading-lamp","el-icon-refresh","el-icon-refresh-left","el-icon-refresh-right","el-icon-refrigerator","el-icon-remove","el-icon-remove-filled","el-icon-right","el-icon-scale-to-original","el-icon-school","el-icon-scissor","el-icon-search","el-icon-select","el-icon-sell","el-icon-semi-select","el-icon-service","el-icon-set-up","el-icon-setting","el-icon-share","el-icon-ship","el-icon-shop","el-icon-shopping-bag","el-icon-shopping-cart","el-icon-shopping-cart-full","el-icon-smoking","el-icon-soccer","el-icon-sold-out","el-icon-sort","el-icon-sort-down","el-icon-sort-up","el-icon-stamp","el-icon-star","el-icon-star-filled","el-icon-stopwatch","el-icon-success-filled","el-icon-sugar","el-icon-suitcase","el-icon-sunny","el-icon-sunrise","el-icon-sunset","el-icon-switch","el-icon-switch-button","el-icon-takeaway-box","el-icon-ticket","el-icon-tickets","el-icon-timer","el-icon-toilet-paper","el-icon-tools","el-icon-top","el-icon-top-left","el-icon-top-right","el-icon-trend-charts","el-icon-trophy","el-icon-turn-off","el-icon-umbrella","el-icon-unlock","el-icon-upload","el-icon-upload-filled","el-icon-user","el-icon-user-filled","el-icon-van","el-icon-video-camera","el-icon-video-camera-filled","el-icon-video-pause","el-icon-video-play","el-icon-view","el-icon-wallet","el-icon-wallet-filled","el-icon-warning","el-icon-warning-filled","el-icon-watch","el-icon-watermelon","el-icon-wind-power","el-icon-zoom-in","el-icon-zoom-out"]},{name:"扩展",icons:["sc-icon-vue","sc-icon-code","sc-icon-wechat","sc-icon-bug-fill","sc-icon-bug-line","sc-icon-file-word","sc-icon-file-excel","sc-icon-file-ppt","sc-icon-organization","sc-icon-upload","sc-icon-download"]}]},c={props:{modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1}},data(){return{value:"",dialogVisible:!1,data:[],searchText:""}},watch:{modelValue(e){this.value=e},value(e){this.$emit("update:modelValue",e)},searchText(e){this.search(e)}},mounted(){this.value=this.modelValue,this.data.push(...u.icons)},methods:{open(){if(this.disabled)return!1;this.dialogVisible=!0},selectIcon(e){if("SPAN"!=e.target.tagName)return!1;this.value=e.target.dataset.icon,this.dialogVisible=!1},clear(){this.value="",this.dialogVisible=!1},search(e){if(e){const l=JSON.parse(JSON.stringify(u.icons));l.forEach((l=>{l.icons=l.icons.filter((l=>l.includes(e)))})),this.data=l}else this.data=JSON.parse(JSON.stringify(u.icons))}}},p=t(51456);const m=(0,p.A)(c,[["render",n],["__scopeId","data-v-608ca6b8"]]);var h=m},46379:function(e,l,t){"use strict";t.d(l,{A:function(){return u}});var a=t(51464),o=t(51681);const i={class:"sc-password-strength"};function s(e,l,t,s,r,d){return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",{class:(0,o.C4)(["sc-password-strength-bar",`sc-password-strength-level-${r.level}`])},null,2)])}var r={props:{modelValue:{type:String,default:""}},data(){return{level:0}},watch:{modelValue(){this.strength(this.modelValue)}},mounted(){this.strength(this.modelValue)},methods:{strength(e){var l=0,t=e.length>=6,a=/\d/.test(e),o=/[a-z]/.test(e),i=/[A-Z]/.test(e),s=!/(\w)\1{2}/.test(e),r=/[`~!@#$%^&*()_+<>?:"{},./;'[\]]/.test(e);return e.length<=0?(l=0,this.level=l,!1):t?(a&&(l+=1),o&&(l+=1),i&&(l+=1),s&&(l+=1),r&&(l+=1),void(this.level=l)):(l=1,this.level=l,!1)}}},d=t(51456);const n=(0,d.A)(r,[["render",s],["__scopeId","data-v-c391cecc"]]);var u=n},51840:function(e,l,t){"use strict";t.d(l,{A:function(){return m}});var a=t(51464),o=t(51681);const i={class:"sc-select-filter"},s={key:0,class:"sc-select-filter__no-data"},r={class:"sc-select-filter__item-options"},d=["onClick"];function n(e,l,t,n,u,c){const p=(0,a.g2)("el-icon");return(0,a.uX)(),(0,a.CE)("div",i,[t.data.length<=0?((0,a.uX)(),(0,a.CE)("div",s," 暂无数据 ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.data,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.key,class:"sc-select-filter__item"},[(0,a.Lk)("div",{class:"sc-select-filter__item-title",style:(0,o.Tr)({width:t.labelWidth+"px"})},[(0,a.Lk)("label",null,(0,o.v_)(e.title)+"：",1)],4),(0,a.Lk)("div",r,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.options,(l=>((0,a.uX)(),(0,a.CE)("li",{class:(0,o.C4)({active:u.selected[e.key]&&u.selected[e.key].includes(l.value)}),key:l.value,onClick:t=>c.select(l,e)},[l.icon?((0,a.uX)(),(0,a.Wv)(p,{key:0},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)((0,a.$y)(l.icon)))])),_:2},1024)):(0,a.Q3)("",!0),(0,a.Lk)("span",null,(0,o.v_)(l.label),1)],10,d)))),128))])])])))),128))])}t(78982),t(64660),t(89593);var u={props:{data:{type:Array,default:()=>[]},selectedValues:{type:Object,default:()=>({})},labelWidth:{type:Number,default:80},outputValueTypeToArray:{type:Boolean,default:!1}},data(){return{selected:{}}},watch:{data(e){e.forEach((e=>{this.selected[e.key]=this.selectedValues[e.key]||Array.isArray(e.options)&&e.options.length?[e.options[0].value]:[]}))}},computed:{selectedString(){var e=JSON.parse(JSON.stringify(this.selected));for(var l in e)e[l]=e[l].join(",");return e}},mounted(){this.data.forEach((e=>{this.selected[e.key]=this.selectedValues[e.key]||Array.isArray(e.options)&&e.options.length?[e.options[0].value]:[]}))},methods:{select(e,l){if(l.multiple)e.value===l.options[0].value?this.selected[l.key]=[e.value]:this.selected[l.key].includes(e.value)?(this.selected[l.key].splice(this.selected[l.key].findIndex((l=>l===e.value)),1),0==this.selected[l.key].length&&(this.selected[l.key]=[l.options[0].value])):(this.selected[l.key].push(e.value),this.selected[l.key].includes(l.options[0].value)&&this.selected[l.key].splice(this.selected[l.key].findIndex((e=>e===l.options[0].value)),1));else{if(this.selected[l.key].includes(e.value))return!1;this.selected[l.key]=[e.value]}this.change()},change(){this.outputValueTypeToArray?this.$emit("onChange",this.selected):this.$emit("onChange",this.selectedString)}}},c=t(51456);const p=(0,c.A)(u,[["render",n],["__scopeId","data-v-63483ae9"]]);var m=p},85331:function(e,l,t){"use strict";t.d(l,{A:function(){return b}});var a=t(51464),o=t(51681);const i={class:"sc-statistic"},s={class:"sc-statistic-title"},r={style:{width:"200px","line-height":"2"}},d={class:"sc-statistic-content"},n={key:0,class:"sc-statistic-content-prefix"},u={class:"sc-statistic-content-value"},c={key:1,class:"sc-statistic-content-suffix"},p={key:0,class:"sc-statistic-description"};function m(e,l,t,m,h,f){const g=(0,a.g2)("el-icon-question-filled"),b=(0,a.g2)("el-icon"),_=(0,a.g2)("el-tooltip");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",s,[(0,a.eW)((0,o.v_)(t.title)+" ",1),t.tips?((0,a.uX)(),(0,a.Wv)(_,{key:0,effect:"light"},{content:(0,a.k6)((()=>[(0,a.Lk)("div",r,(0,o.v_)(t.tips),1)])),default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"sc-statistic-tips"},{default:(0,a.k6)((()=>[(0,a.bF)(g)])),_:1})])),_:1})):(0,a.Q3)("",!0)]),(0,a.Lk)("div",d,[t.prefix?((0,a.uX)(),(0,a.CE)("span",n,(0,o.v_)(t.prefix),1)):(0,a.Q3)("",!0),(0,a.Lk)("span",u,(0,o.v_)(f.cmtValue),1),t.suffix?((0,a.uX)(),(0,a.CE)("span",c,(0,o.v_)(t.suffix),1)):(0,a.Q3)("",!0)]),t.description||e.$slots.default?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.RG)(e.$slots,"default",{},(()=>[(0,a.eW)((0,o.v_)(t.description),1)]),!0)])):(0,a.Q3)("",!0)])}var h={props:{title:{type:String,required:!0,default:""},value:{type:String,required:!0,default:""},prefix:{type:String,default:""},suffix:{type:String,default:""},description:{type:String,default:""},tips:{type:String,default:""},groupSeparator:{type:Boolean,default:!1}},data(){return{}},computed:{cmtValue(){return this.groupSeparator?this.$TOOL.groupSeparator(this.value):this.value}}},f=t(51456);const g=(0,f.A)(h,[["render",m],["__scopeId","data-v-fb7562ba"]]);var b=g},15696:function(e,l,t){"use strict";t.d(l,{A:function(){return Ze}});var a=t(51464);const o={class:"sc-workflow-design"},i={class:"box-scale"};function s(e,l,t,s,r,d){const n=(0,a.g2)("node-wrap"),u=(0,a.g2)("use-select");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",i,[r.nodeConfig?((0,a.uX)(),(0,a.Wv)(n,{key:0,modelValue:r.nodeConfig,"onUpdate:modelValue":l[0]||(l[0]=e=>r.nodeConfig=e)},null,8,["modelValue"])):(0,a.Q3)("",!0),l[2]||(l[2]=(0,a.Lk)("div",{class:"end-node"},[(0,a.Lk)("div",{class:"end-node-circle"}),(0,a.Lk)("div",{class:"end-node-text"},"流程结束")],-1))]),r.selectVisible?((0,a.uX)(),(0,a.Wv)(u,{key:0,ref:"useselect",onClosed:l[1]||(l[1]=e=>r.selectVisible=!1)},null,512)):(0,a.Q3)("",!0)])}function r(e,l,t,o,i,s){const r=(0,a.g2)("promoter"),d=(0,a.g2)("approver"),n=(0,a.g2)("send"),u=(0,a.g2)("node-wrap",!0),c=(0,a.g2)("branch");return(0,a.uX)(),(0,a.CE)(a.FK,null,[0==i.nodeConfig.type?((0,a.uX)(),(0,a.Wv)(r,{key:0,modelValue:i.nodeConfig,"onUpdate:modelValue":l[0]||(l[0]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,a.Q3)("",!0),1==i.nodeConfig.type?((0,a.uX)(),(0,a.Wv)(d,{key:1,modelValue:i.nodeConfig,"onUpdate:modelValue":l[1]||(l[1]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,a.Q3)("",!0),2==i.nodeConfig.type?((0,a.uX)(),(0,a.Wv)(n,{key:2,modelValue:i.nodeConfig,"onUpdate:modelValue":l[2]||(l[2]=e=>i.nodeConfig=e)},null,8,["modelValue"])):(0,a.Q3)("",!0),4==i.nodeConfig.type?((0,a.uX)(),(0,a.Wv)(c,{key:3,modelValue:i.nodeConfig,"onUpdate:modelValue":l[3]||(l[3]=e=>i.nodeConfig=e)},{default:(0,a.k6)((e=>[e.node?((0,a.uX)(),(0,a.Wv)(u,{key:0,modelValue:e.node.childNode,"onUpdate:modelValue":l=>e.node.childNode=l},null,8,["modelValue","onUpdate:modelValue"])):(0,a.Q3)("",!0)])),_:1},8,["modelValue"])):(0,a.Q3)("",!0),i.nodeConfig.childNode?((0,a.uX)(),(0,a.Wv)(u,{key:4,modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[4]||(l[4]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"])):(0,a.Q3)("",!0)],64)}var d=t(51681),n=t(45883);const u={class:"node-wrap"},c={class:"title",style:{background:"#ff943e"}},p={class:"content"},m={key:0},h={key:1,class:"placeholder"},f={class:"node-wrap-drawer__title"},g={class:"tags-list"},b={class:"tags-list"},_={key:0},k={style:{width:"100%"}},v={style:{width:"100%"}},y={style:{width:"100%"}};function F(e,l,t,o,i,s){const r=(0,a.g2)("el-icon-user-filled"),F=(0,a.g2)("el-icon"),w=(0,a.g2)("el-icon-close"),V=(0,a.g2)("add-node"),C=(0,a.g2)("el-icon-edit"),L=(0,a.g2)("el-input"),x=(0,a.g2)("el-option"),W=(0,a.g2)("el-select"),U=(0,a.g2)("el-form-item"),$=(0,a.g2)("el-button"),j=(0,a.g2)("el-tag"),I=(0,a.g2)("el-input-number"),D=(0,a.g2)("el-radio"),T=(0,a.g2)("el-radio-group"),S=(0,a.g2)("el-divider"),X=(0,a.g2)("el-checkbox"),N=(0,a.g2)("el-form"),E=(0,a.g2)("el-main"),A=(0,a.g2)("el-footer"),P=(0,a.g2)("el-container"),M=(0,a.g2)("el-drawer");return(0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("div",{class:"node-wrap-box",onClick:l[1]||(l[1]=(...e)=>s.show&&s.show(...e))},[(0,a.Lk)("div",c,[(0,a.bF)(F,{class:"icon"},{default:(0,a.k6)((()=>[(0,a.bF)(r)])),_:1}),(0,a.Lk)("span",null,(0,d.v_)(i.nodeConfig.nodeName),1),(0,a.bF)(F,{class:"close",onClick:l[0]||(l[0]=(0,n.D$)((e=>s.delNode()),["stop"]))},{default:(0,a.k6)((()=>[(0,a.bF)(w)])),_:1})]),(0,a.Lk)("div",p,[s.toText(i.nodeConfig)?((0,a.uX)(),(0,a.CE)("span",m,(0,d.v_)(s.toText(i.nodeConfig)),1)):((0,a.uX)(),(0,a.CE)("span",h,"请选择"))])]),(0,a.bF)(V,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[2]||(l[2]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,a.bF)(M,{title:"审批人设置",modelValue:i.drawer,"onUpdate:modelValue":l[17]||(l[17]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,a.k6)((()=>[(0,a.Lk)("div",f,[i.isEditTitle?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("label",{key:0,onClick:l[3]||(l[3]=(...e)=>s.editTitle&&s.editTitle(...e))},[(0,a.eW)((0,d.v_)(i.form.nodeName),1),(0,a.bF)(F,{class:"node-wrap-drawer__title-edit"},{default:(0,a.k6)((()=>[(0,a.bF)(C)])),_:1})])),i.isEditTitle?((0,a.uX)(),(0,a.Wv)(L,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.nodeName=e),clearable:"",onBlur:s.saveTitle,onKeyup:(0,n.jR)(s.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,a.Q3)("",!0)])])),default:(0,a.k6)((()=>[(0,a.bF)(P,null,{default:(0,a.k6)((()=>[(0,a.bF)(E,{style:{padding:"0 20px 20px 20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(N,{"label-position":"top"},{default:(0,a.k6)((()=>[(0,a.bF)(U,{label:"审批人员类型"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{modelValue:i.form.setType,"onUpdate:modelValue":l[5]||(l[5]=e=>i.form.setType=e)},{default:(0,a.k6)((()=>[(0,a.bF)(x,{value:1,label:"指定成员"}),(0,a.bF)(x,{value:2,label:"主管"}),(0,a.bF)(x,{value:3,label:"角色"}),(0,a.bF)(x,{value:4,label:"发起人自选"}),(0,a.bF)(x,{value:5,label:"发起人自己"}),(0,a.bF)(x,{value:7,label:"连续多级主管"})])),_:1},8,["modelValue"])])),_:1}),1==i.form.setType?((0,a.uX)(),(0,a.Wv)(U,{key:0,label:"选择成员"},{default:(0,a.k6)((()=>[(0,a.bF)($,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[6]||(l[6]=e=>s.selectHandle(1,i.form.nodeUserList))},{default:(0,a.k6)((()=>l[18]||(l[18]=[(0,a.eW)("选择人员")]))),_:1}),(0,a.Lk)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.form.nodeUserList,((e,l)=>((0,a.uX)(),(0,a.Wv)(j,{key:e.id,closable:"",onClose:e=>s.delUser(l)},{default:(0,a.k6)((()=>[(0,a.eW)((0,d.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1})):(0,a.Q3)("",!0),2==i.form.setType?((0,a.uX)(),(0,a.Wv)(U,{key:1,label:"指定主管"},{default:(0,a.k6)((()=>[l[19]||(l[19]=(0,a.eW)(" 发起人的第 ")),(0,a.bF)(I,{modelValue:i.form.examineLevel,"onUpdate:modelValue":l[7]||(l[7]=e=>i.form.examineLevel=e),min:1},null,8,["modelValue"]),l[20]||(l[20]=(0,a.eW)(" 级主管 "))])),_:1})):(0,a.Q3)("",!0),3==i.form.setType?((0,a.uX)(),(0,a.Wv)(U,{key:2,label:"选择角色"},{default:(0,a.k6)((()=>[(0,a.bF)($,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[8]||(l[8]=e=>s.selectHandle(2,i.form.nodeRoleList))},{default:(0,a.k6)((()=>l[21]||(l[21]=[(0,a.eW)("选择角色")]))),_:1}),(0,a.Lk)("div",b,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.form.nodeRoleList,((e,l)=>((0,a.uX)(),(0,a.Wv)(j,{key:e.id,type:"info",closable:"",onClose:e=>s.delRole(l)},{default:(0,a.k6)((()=>[(0,a.eW)((0,d.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1})):(0,a.Q3)("",!0),4==i.form.setType?((0,a.uX)(),(0,a.Wv)(U,{key:3,label:"发起人自选"},{default:(0,a.k6)((()=>[(0,a.bF)(T,{modelValue:i.form.selectMode,"onUpdate:modelValue":l[9]||(l[9]=e=>i.form.selectMode=e)},{default:(0,a.k6)((()=>[(0,a.bF)(D,{label:1},{default:(0,a.k6)((()=>l[22]||(l[22]=[(0,a.eW)("自选一个人")]))),_:1}),(0,a.bF)(D,{label:2},{default:(0,a.k6)((()=>l[23]||(l[23]=[(0,a.eW)("自选多个人")]))),_:1})])),_:1},8,["modelValue"])])),_:1})):(0,a.Q3)("",!0),7==i.form.setType?((0,a.uX)(),(0,a.Wv)(U,{key:4,label:"连续主管审批终点"},{default:(0,a.k6)((()=>[(0,a.bF)(T,{modelValue:i.form.directorMode,"onUpdate:modelValue":l[10]||(l[10]=e=>i.form.directorMode=e)},{default:(0,a.k6)((()=>[(0,a.bF)(D,{label:0},{default:(0,a.k6)((()=>l[24]||(l[24]=[(0,a.eW)("直到最上层主管")]))),_:1}),(0,a.bF)(D,{label:1},{default:(0,a.k6)((()=>l[25]||(l[25]=[(0,a.eW)("自定义审批终点")]))),_:1})])),_:1},8,["modelValue"]),1==i.form.directorMode?((0,a.uX)(),(0,a.CE)("p",_,[l[26]||(l[26]=(0,a.eW)("直到发起人的第 ")),(0,a.bF)(I,{modelValue:i.form.directorLevel,"onUpdate:modelValue":l[11]||(l[11]=e=>i.form.directorLevel=e),min:1},null,8,["modelValue"]),l[27]||(l[27]=(0,a.eW)(" 级主管"))])):(0,a.Q3)("",!0)])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(S),(0,a.bF)(U,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(X,{modelValue:i.form.termAuto,"onUpdate:modelValue":l[12]||(l[12]=e=>i.form.termAuto=e),label:"超时自动审批"},null,8,["modelValue"])])),_:1}),i.form.termAuto?((0,a.uX)(),(0,a.CE)(a.FK,{key:5},[(0,a.bF)(U,{label:"审批期限（为 0 则不生效）"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{modelValue:i.form.term,"onUpdate:modelValue":l[13]||(l[13]=e=>i.form.term=e),min:0},null,8,["modelValue"]),l[28]||(l[28]=(0,a.eW)(" 小时 "))])),_:1}),(0,a.bF)(U,{label:"审批期限超时后执行"},{default:(0,a.k6)((()=>[(0,a.bF)(T,{modelValue:i.form.termMode,"onUpdate:modelValue":l[14]||(l[14]=e=>i.form.termMode=e)},{default:(0,a.k6)((()=>[(0,a.bF)(D,{label:0},{default:(0,a.k6)((()=>l[29]||(l[29]=[(0,a.eW)("自动通过")]))),_:1}),(0,a.bF)(D,{label:1},{default:(0,a.k6)((()=>l[30]||(l[30]=[(0,a.eW)("自动拒绝")]))),_:1})])),_:1},8,["modelValue"])])),_:1})],64)):(0,a.Q3)("",!0),(0,a.bF)(S),(0,a.bF)(U,{label:"多人审批时审批方式"},{default:(0,a.k6)((()=>[(0,a.bF)(T,{modelValue:i.form.examineMode,"onUpdate:modelValue":l[15]||(l[15]=e=>i.form.examineMode=e)},{default:(0,a.k6)((()=>[(0,a.Lk)("p",k,[(0,a.bF)(D,{label:1},{default:(0,a.k6)((()=>l[31]||(l[31]=[(0,a.eW)("按顺序依次审批")]))),_:1})]),(0,a.Lk)("p",v,[(0,a.bF)(D,{label:2},{default:(0,a.k6)((()=>l[32]||(l[32]=[(0,a.eW)("会签 (可同时审批，每个人必须审批通过)")]))),_:1})]),(0,a.Lk)("p",y,[(0,a.bF)(D,{label:3},{default:(0,a.k6)((()=>l[33]||(l[33]=[(0,a.eW)("或签 (有一人审批通过即可)")]))),_:1})])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,a.bF)(A,null,{default:(0,a.k6)((()=>[(0,a.bF)($,{type:"primary",onClick:s.save},{default:(0,a.k6)((()=>l[34]||(l[34]=[(0,a.eW)("保存")]))),_:1},8,["onClick"]),(0,a.bF)($,{onClick:l[16]||(l[16]=e=>i.drawer=!1)},{default:(0,a.k6)((()=>l[35]||(l[35]=[(0,a.eW)("取消")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}t(70426);const w={class:"add-node-btn-box"},V={class:"add-node-btn"},C={class:"add-node-popover-body"};function L(e,l,t,o,i,s){const r=(0,a.g2)("el-button"),d=(0,a.g2)("el-icon-user-filled"),n=(0,a.g2)("el-icon"),u=(0,a.g2)("el-icon-promotion"),c=(0,a.g2)("el-icon-share"),p=(0,a.g2)("el-popover");return(0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("div",V,[(0,a.bF)(p,{placement:"right-start",width:270,trigger:"click","hide-after":0,"show-after":0},{reference:(0,a.k6)((()=>[(0,a.bF)(r,{type:"primary",icon:"el-icon-plus",circle:""})])),default:(0,a.k6)((()=>[(0,a.Lk)("div",C,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.bF)(n,{style:{color:"#ff943e"},onClick:l[0]||(l[0]=e=>s.addType(1))},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1}),l[3]||(l[3]=(0,a.Lk)("p",null,"审批节点",-1))]),(0,a.Lk)("li",null,[(0,a.bF)(n,{style:{color:"#3296fa"},onClick:l[1]||(l[1]=e=>s.addType(2))},{default:(0,a.k6)((()=>[(0,a.bF)(u)])),_:1}),l[4]||(l[4]=(0,a.Lk)("p",null,"抄送节点",-1))]),(0,a.Lk)("li",null,[(0,a.bF)(n,{style:{color:"#15BC83"},onClick:l[2]||(l[2]=e=>s.addType(4))},{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1}),l[5]||(l[5]=(0,a.Lk)("p",null,"条件分支",-1))])])])])),_:1})])])}var x={props:{modelValue:{type:Object,default:()=>{}}},data(){return{}},mounted(){},methods:{addType(e){var l={};1==e?l={nodeName:"审核人",type:1,setType:1,nodeUserList:[],nodeRoleList:[],examineLevel:1,directorLevel:1,selectMode:1,termAuto:!1,term:0,termMode:1,examineMode:1,directorMode:0,childNode:this.modelValue}:2==e?l={nodeName:"抄送人",type:2,userSelectFlag:!0,nodeUserList:[],childNode:this.modelValue}:4==e&&(l={nodeName:"条件路由",type:4,conditionNodes:[{nodeName:"条件1",type:3,priorityLevel:1,conditionMode:1,conditionList:[]},{nodeName:"条件2",type:3,priorityLevel:2,conditionMode:1,conditionList:[]}],childNode:this.modelValue}),this.$emit("update:modelValue",l)}}},W=t(51456);const U=(0,W.A)(x,[["render",L]]);var $=U,j={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:$},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser(e){this.form.nodeUserList.splice(e,1)},delRole(e){this.form.nodeRoleList.splice(e,1)},selectHandle(e,l){this.select(e,l)},toText(e){if(1==e.setType){if(e.nodeUserList&&e.nodeUserList.length>0){const l=e.nodeUserList.map((e=>e.name)).join("、");return l}return!1}if(2==e.setType)return 1==e.examineLevel?"直接主管":`发起人的第${e.examineLevel}级主管`;if(3==e.setType){if(e.nodeRoleList&&e.nodeRoleList.length>0){const l=e.nodeRoleList.map((e=>e.name)).join("、");return"角色-"+l}return!1}return 4==e.setType?"发起人自选":5==e.setType?"发起人自己":7==e.setType?"连续多级主管":void 0}}};const I=(0,W.A)(j,[["render",F]]);var D=I;const T={class:"node-wrap"},S={class:"title",style:{background:"#576a95"}},X={class:"content"},N={class:"node-wrap-drawer__title"},E={class:"tags-list"};function A(e,l,t,o,i,s){const r=(0,a.g2)("el-icon-user-filled"),u=(0,a.g2)("el-icon"),c=(0,a.g2)("add-node"),p=(0,a.g2)("el-icon-edit"),m=(0,a.g2)("el-input"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-tag"),g=(0,a.g2)("el-form-item"),b=(0,a.g2)("el-alert"),_=(0,a.g2)("el-form"),k=(0,a.g2)("el-main"),v=(0,a.g2)("el-footer"),y=(0,a.g2)("el-container"),F=(0,a.g2)("el-drawer");return(0,a.uX)(),(0,a.CE)("div",T,[(0,a.Lk)("div",{class:"node-wrap-box start-node",onClick:l[0]||(l[0]=(...e)=>s.show&&s.show(...e))},[(0,a.Lk)("div",S,[(0,a.bF)(u,{class:"icon"},{default:(0,a.k6)((()=>[(0,a.bF)(r)])),_:1}),(0,a.Lk)("span",null,(0,d.v_)(i.nodeConfig.nodeName),1)]),(0,a.Lk)("div",X,[(0,a.Lk)("span",null,(0,d.v_)(s.toText(i.nodeConfig)),1)])]),(0,a.bF)(c,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[1]||(l[1]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,a.bF)(F,{title:"发起人",modelValue:i.drawer,"onUpdate:modelValue":l[6]||(l[6]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,a.k6)((()=>[(0,a.Lk)("div",N,[i.isEditTitle?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("label",{key:0,onClick:l[2]||(l[2]=(...e)=>s.editTitle&&s.editTitle(...e))},[(0,a.eW)((0,d.v_)(i.form.nodeName),1),(0,a.bF)(u,{class:"node-wrap-drawer__title-edit"},{default:(0,a.k6)((()=>[(0,a.bF)(p)])),_:1})])),i.isEditTitle?((0,a.uX)(),(0,a.Wv)(m,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.nodeName=e),clearable:"",onBlur:s.saveTitle,onKeyup:(0,n.jR)(s.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,a.Q3)("",!0)])])),default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{style:{padding:"0 20px 20px 20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(_,{"label-position":"top"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{label:"谁可以发起此审批"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[4]||(l[4]=e=>s.selectHandle(2,i.form.nodeRoleList))},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("选择角色")]))),_:1}),(0,a.Lk)("div",E,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.form.nodeRoleList,((e,l)=>((0,a.uX)(),(0,a.Wv)(f,{key:e.id,type:"info",closable:"",onClose:e=>s.delRole(l)},{default:(0,a.k6)((()=>[(0,a.eW)((0,d.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1}),0==i.form.nodeRoleList.length?((0,a.uX)(),(0,a.Wv)(b,{key:0,title:"不指定则默认所有人都可发起此审批",type:"info",closable:!1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{type:"primary",onClick:s.save},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("保存")]))),_:1},8,["onClick"]),(0,a.bF)(h,{onClick:l[5]||(l[5]=e=>i.drawer=!1)},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("取消")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var P={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:$},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.isEditTitle=!1,this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},selectHandle(e,l){this.select(e,l)},delRole(e){this.form.nodeRoleList.splice(e,1)},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},toText(e){return e.nodeRoleList&&e.nodeRoleList.length>0?e.nodeRoleList.map((e=>e.name)).join("、"):"所有人"}}};const M=(0,W.A)(P,[["render",A]]);var O=M;const R={class:"branch-wrap"},Q={class:"branch-box-wrap"},z={class:"branch-box"},q={class:"condition-node"},K={class:"condition-node-box"},B=["onClick"],G=["onClick"],H={class:"title"},J={class:"node-title"},Y={class:"priority-title"},Z={class:"content"},ee={key:0},le={key:1,class:"placeholder"},te=["onClick"],ae={key:1,class:"top-left-cover-line"},oe={key:2,class:"bottom-left-cover-line"},ie={key:3,class:"top-right-cover-line"},se={key:4,class:"bottom-right-cover-line"},re={class:"node-wrap-drawer__title"};function de(e,l,t,o,i,s){const r=(0,a.g2)("el-button"),u=(0,a.g2)("el-icon-arrow-left"),c=(0,a.g2)("el-icon"),p=(0,a.g2)("el-icon-close"),m=(0,a.g2)("el-icon-arrow-right"),h=(0,a.g2)("add-node"),f=(0,a.g2)("el-icon-edit"),g=(0,a.g2)("el-input"),b=(0,a.g2)("el-radio"),_=(0,a.g2)("el-radio-group"),k=(0,a.g2)("el-form-item"),v=(0,a.g2)("el-divider"),y=(0,a.g2)("el-table-column"),F=(0,a.g2)("el-option"),w=(0,a.g2)("el-select"),V=(0,a.g2)("el-link"),C=(0,a.g2)("el-table"),L=(0,a.g2)("el-form"),x=(0,a.g2)("el-main"),W=(0,a.g2)("el-footer"),U=(0,a.g2)("el-container"),$=(0,a.g2)("el-drawer");return(0,a.uX)(),(0,a.CE)("div",R,[(0,a.Lk)("div",Q,[(0,a.Lk)("div",z,[(0,a.bF)(r,{class:"add-branch",type:"success",plain:"",round:"",onClick:s.addTerm},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("添加条件")]))),_:1},8,["onClick"]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.nodeConfig.conditionNodes,((l,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"col-box",key:t},[(0,a.Lk)("div",q,[(0,a.Lk)("div",K,[(0,a.Lk)("div",{class:"auto-judge",onClick:e=>s.show(t)},[0!=t?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"sort-left",onClick:(0,n.D$)((e=>s.arrTransfer(t,-1)),["stop"])},[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(u)])),_:1})],8,G)):(0,a.Q3)("",!0),(0,a.Lk)("div",H,[(0,a.Lk)("span",J,(0,d.v_)(l.nodeName),1),(0,a.Lk)("span",Y,"优先级"+(0,d.v_)(l.priorityLevel),1),(0,a.bF)(c,{class:"close",onClick:(0,n.D$)((e=>s.delTerm(t)),["stop"])},{default:(0,a.k6)((()=>[(0,a.bF)(p)])),_:2},1032,["onClick"])]),(0,a.Lk)("div",Z,[s.toText(i.nodeConfig,t)?((0,a.uX)(),(0,a.CE)("span",ee,(0,d.v_)(s.toText(i.nodeConfig,t)),1)):((0,a.uX)(),(0,a.CE)("span",le,"请设置条件"))]),t!=i.nodeConfig.conditionNodes.length-1?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"sort-right",onClick:(0,n.D$)((e=>s.arrTransfer(t)),["stop"])},[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(m)])),_:1})],8,te)):(0,a.Q3)("",!0)],8,B),(0,a.bF)(h,{modelValue:l.childNode,"onUpdate:modelValue":e=>l.childNode=e},null,8,["modelValue","onUpdate:modelValue"])])]),l.childNode?(0,a.RG)(e.$slots,"default",{key:0,node:l}):(0,a.Q3)("",!0),0==t?((0,a.uX)(),(0,a.CE)("div",ae)):(0,a.Q3)("",!0),0==t?((0,a.uX)(),(0,a.CE)("div",oe)):(0,a.Q3)("",!0),t==i.nodeConfig.conditionNodes.length-1?((0,a.uX)(),(0,a.CE)("div",ie)):(0,a.Q3)("",!0),t==i.nodeConfig.conditionNodes.length-1?((0,a.uX)(),(0,a.CE)("div",se)):(0,a.Q3)("",!0)])))),128))]),(0,a.bF)(h,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[0]||(l[0]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"])]),(0,a.bF)($,{title:"条件设置",modelValue:i.drawer,"onUpdate:modelValue":l[5]||(l[5]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:600},{header:(0,a.k6)((()=>[(0,a.Lk)("div",re,[i.isEditTitle?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("label",{key:0,onClick:l[1]||(l[1]=(...e)=>s.editTitle&&s.editTitle(...e))},[(0,a.eW)((0,d.v_)(i.form.nodeName),1),(0,a.bF)(c,{class:"node-wrap-drawer__title-edit"},{default:(0,a.k6)((()=>[(0,a.bF)(f)])),_:1})])),i.isEditTitle?((0,a.uX)(),(0,a.Wv)(g,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.nodeName=e),clearable:"",onBlur:s.saveTitle,onKeyup:(0,n.jR)(s.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,a.Q3)("",!0)])])),default:(0,a.k6)((()=>[(0,a.bF)(U,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,{style:{padding:"0 20px 20px 20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(L,{"label-position":"top"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{label:"条件关系"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:i.form.conditionMode,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.conditionMode=e)},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:1},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("且")]))),_:1}),(0,a.bF)(b,{label:2},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("或")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(v),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(C,{data:i.form.conditionList},{default:(0,a.k6)((()=>[(0,a.bF)(y,{prop:"label",label:"描述"},{default:(0,a.k6)((e=>[(0,a.bF)(g,{modelValue:e.row.label,"onUpdate:modelValue":l=>e.row.label=l,placeholder:"描述"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(y,{prop:"field",label:"条件字段",width:"130"},{default:(0,a.k6)((e=>[(0,a.bF)(g,{modelValue:e.row.field,"onUpdate:modelValue":l=>e.row.field=l,placeholder:"条件字段"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(y,{prop:"operator",label:"运算符",width:"130"},{default:(0,a.k6)((e=>[(0,a.bF)(w,{modelValue:e.row.operator,"onUpdate:modelValue":l=>e.row.operator=l,placeholder:"Select"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{label:"等于",value:"="}),(0,a.bF)(F,{label:"不等于",value:"!="}),(0,a.bF)(F,{label:"大于",value:">"}),(0,a.bF)(F,{label:"大于等于",value:">="}),(0,a.bF)(F,{label:"小于",value:"<"}),(0,a.bF)(F,{label:"小于等于",value:"<="}),(0,a.bF)(F,{label:"包含",value:"include"}),(0,a.bF)(F,{label:"不包含",value:"notinclude"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(y,{prop:"value",label:"值",width:"100"},{default:(0,a.k6)((e=>[(0,a.bF)(g,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l,placeholder:"值"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(y,{prop:"value",label:"移除",width:"55"},{default:(0,a.k6)((e=>[(0,a.bF)(V,{type:"danger",underline:!1,onClick:l=>s.deleteConditionList(e.$index)},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("移除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,a.Lk)("p",null,[(0,a.bF)(r,{type:"primary",icon:"el-icon-plus",round:"",onClick:s.addConditionList},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("增加条件")]))),_:1},8,["onClick"])])])),_:1})])),_:1}),(0,a.bF)(W,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{type:"primary",onClick:s.save},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("保存")]))),_:1},8,["onClick"]),(0,a.bF)(r,{onClick:l[4]||(l[4]=e=>i.drawer=!1)},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("取消")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}t(78982);var ne={props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:$},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,index:0,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(e){this.index=e,this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig.conditionNodes[e])),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.nodeConfig.conditionNodes[this.index]=this.form,this.$emit("update:modelValue",this.nodeConfig),this.drawer=!1},addTerm(){let e=this.nodeConfig.conditionNodes.length+1;this.nodeConfig.conditionNodes.push({nodeName:"条件"+e,type:3,priorityLevel:e,conditionMode:1,conditionList:[]})},delTerm(e){this.nodeConfig.conditionNodes.splice(e,1),1==this.nodeConfig.conditionNodes.length&&(this.nodeConfig.childNode&&(this.nodeConfig.conditionNodes[0].childNode?this.reData(this.nodeConfig.conditionNodes[0].childNode,this.nodeConfig.childNode):this.nodeConfig.conditionNodes[0].childNode=this.nodeConfig.childNode),this.$emit("update:modelValue",this.nodeConfig.conditionNodes[0].childNode))},reData(e,l){e.childNode?this.reData(e.childNode,l):e.childNode=l},arrTransfer(e,l=1){this.nodeConfig.conditionNodes[e]=this.nodeConfig.conditionNodes.splice(e+l,1,this.nodeConfig.conditionNodes[e])[0],this.nodeConfig.conditionNodes.map(((e,l)=>{e.priorityLevel=l+1})),this.$emit("update:modelValue",this.nodeConfig)},addConditionList(){this.form.conditionList.push({label:"",field:"",operator:"=",value:""})},deleteConditionList(e){this.form.conditionList.splice(e,1)},toText(e,l){var{conditionList:t}=e.conditionNodes[l];if(t&&1==t.length){const e=t.map((e=>`${e.label}${e.operator}${e.value}`)).join(" 和 ");return e}if(t&&t.length>1){const a=1==e.conditionNodes[l].conditionMode?"且行":"或行";return t.length+"个条件，"+a}return l==e.conditionNodes.length-1&&"其他条件进入此流程"}}};const ue=(0,W.A)(ne,[["render",de]]);var ce=ue;const pe={class:"node-wrap"},me={class:"title",style:{background:"#3296fa"}},he={class:"content"},fe={key:0},ge={key:1,class:"placeholder"},be={class:"node-wrap-drawer__title"},_e={class:"tags-list"};function ke(e,l,t,o,i,s){const r=(0,a.g2)("el-icon-promotion"),u=(0,a.g2)("el-icon"),c=(0,a.g2)("el-icon-close"),p=(0,a.g2)("add-node"),m=(0,a.g2)("el-icon-edit"),h=(0,a.g2)("el-input"),f=(0,a.g2)("el-button"),g=(0,a.g2)("el-tag"),b=(0,a.g2)("el-form-item"),_=(0,a.g2)("el-checkbox"),k=(0,a.g2)("el-form"),v=(0,a.g2)("el-main"),y=(0,a.g2)("el-footer"),F=(0,a.g2)("el-container"),w=(0,a.g2)("el-drawer");return(0,a.uX)(),(0,a.CE)("div",pe,[(0,a.Lk)("div",{class:"node-wrap-box",onClick:l[1]||(l[1]=(...e)=>s.show&&s.show(...e))},[(0,a.Lk)("div",me,[(0,a.bF)(u,{class:"icon"},{default:(0,a.k6)((()=>[(0,a.bF)(r)])),_:1}),(0,a.Lk)("span",null,(0,d.v_)(i.nodeConfig.nodeName),1),(0,a.bF)(u,{class:"close",onClick:l[0]||(l[0]=(0,n.D$)((e=>s.delNode()),["stop"]))},{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1})]),(0,a.Lk)("div",he,[s.toText(i.nodeConfig)?((0,a.uX)(),(0,a.CE)("span",fe,(0,d.v_)(s.toText(i.nodeConfig)),1)):((0,a.uX)(),(0,a.CE)("span",ge,"请选择人员"))])]),(0,a.bF)(p,{modelValue:i.nodeConfig.childNode,"onUpdate:modelValue":l[2]||(l[2]=e=>i.nodeConfig.childNode=e)},null,8,["modelValue"]),(0,a.bF)(w,{title:"抄送人设置",modelValue:i.drawer,"onUpdate:modelValue":l[8]||(l[8]=e=>i.drawer=e),"destroy-on-close":"","append-to-body":"",size:500},{header:(0,a.k6)((()=>[(0,a.Lk)("div",be,[i.isEditTitle?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("label",{key:0,onClick:l[3]||(l[3]=(...e)=>s.editTitle&&s.editTitle(...e))},[(0,a.eW)((0,d.v_)(i.form.nodeName),1),(0,a.bF)(u,{class:"node-wrap-drawer__title-edit"},{default:(0,a.k6)((()=>[(0,a.bF)(m)])),_:1})])),i.isEditTitle?((0,a.uX)(),(0,a.Wv)(h,{key:1,ref:"nodeTitle",modelValue:i.form.nodeName,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.nodeName=e),clearable:"",onBlur:s.saveTitle,onKeyup:(0,n.jR)(s.saveTitle,["enter"])},null,8,["modelValue","onBlur","onKeyup"])):(0,a.Q3)("",!0)])])),default:(0,a.k6)((()=>[(0,a.bF)(F,null,{default:(0,a.k6)((()=>[(0,a.bF)(v,{style:{padding:"0 20px 20px 20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{"label-position":"top"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:"选择要抄送的人员"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{type:"primary",icon:"el-icon-plus",round:"",onClick:l[5]||(l[5]=e=>s.selectHandle(1,i.form.nodeUserList))},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("选择人员")]))),_:1}),(0,a.Lk)("div",_e,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.form.nodeUserList,((e,l)=>((0,a.uX)(),(0,a.Wv)(g,{key:e.id,closable:"",onClose:e=>s.delUser(l)},{default:(0,a.k6)((()=>[(0,a.eW)((0,d.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])])),_:1}),(0,a.bF)(b,{label:""},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:i.form.userSelectFlag,"onUpdate:modelValue":l[6]||(l[6]=e=>i.form.userSelectFlag=e),label:"允许发起人自选抄送人"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(f,{type:"primary",onClick:s.save},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("保存")]))),_:1},8,["onClick"]),(0,a.bF)(f,{onClick:l[7]||(l[7]=e=>i.drawer=!1)},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("取消")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var ve={inject:["select"],props:{modelValue:{type:Object,default:()=>{}}},components:{addNode:$},data(){return{nodeConfig:{},drawer:!1,isEditTitle:!1,form:{}}},watch:{modelValue(){this.nodeConfig=this.modelValue}},mounted(){this.nodeConfig=this.modelValue},methods:{show(){this.form={},this.form=JSON.parse(JSON.stringify(this.nodeConfig)),this.drawer=!0},editTitle(){this.isEditTitle=!0,this.$nextTick((()=>{this.$refs.nodeTitle.focus()}))},saveTitle(){this.isEditTitle=!1},save(){this.$emit("update:modelValue",this.form),this.drawer=!1},delNode(){this.$emit("update:modelValue",this.nodeConfig.childNode)},delUser(e){this.form.nodeUserList.splice(e,1)},selectHandle(e,l){this.select(e,l)},toText(e){if(e.nodeUserList&&e.nodeUserList.length>0){const l=e.nodeUserList.map((e=>e.name)).join("、");return l}return!!e.userSelectFlag&&"发起人自选"}}};const ye=(0,W.A)(ve,[["render",ke]]);var Fe=ye,we={props:{modelValue:{type:Object,default:()=>{}}},components:{approver:D,promoter:O,branch:ce,send:Fe},data(){return{nodeConfig:{}}},watch:{modelValue(e){this.nodeConfig=e},nodeConfig(e){this.$emit("update:modelValue",e)}},mounted(){this.nodeConfig=this.modelValue},methods:{}};const Ve=(0,W.A)(we,[["render",r]]);var Ce=Ve;const Le={key:0,class:"sc-user-select"},xe={class:"sc-user-select__left"},We={class:"sc-user-select__search"},Ue={class:"sc-user-select__select"},$e={class:"sc-user-select__tree"},je={class:"sc-user-select__user"},Ie={class:"sc-user-select__user__list"},De={class:"sc-user-select__toicon"},Te={class:"sc-user-select__selected"},Se={class:"name"},Xe={class:"delete"},Ne={key:1,class:"sc-user-select sc-user-select-role"},Ee={class:"sc-user-select__left"},Ae={class:"sc-user-select__select"},Pe={class:"sc-user-select__tree"},Me={class:"sc-user-select__toicon"},Oe={class:"sc-user-select__selected"},Re={class:"name"},Qe={class:"delete"};function ze(e,l,t,o,i,s){const r=(0,a.g2)("el-button"),n=(0,a.g2)("el-input"),u=(0,a.g2)("el-tree"),c=(0,a.g2)("el-scrollbar"),p=(0,a.g2)("el-pagination"),m=(0,a.g2)("el-icon-arrow-right"),h=(0,a.g2)("el-icon"),f=(0,a.g2)("el-avatar"),g=(0,a.g2)("el-dialog"),b=(0,a.gN)("loading");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:i.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>i.dialogVisible=e),title:i.titleMap[i.type-1],width:1==i.type?680:460,"destroy-on-close":"","append-to-body":"",onClosed:l[4]||(l[4]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(r,{onClick:l[2]||(l[2]=e=>i.dialogVisible=!1)},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(r,{type:"primary",onClick:s.save},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("确 认")]))),_:1},8,["onClick"])])),default:(0,a.k6)((()=>[1==i.type?((0,a.uX)(),(0,a.CE)("div",Le,[(0,a.Lk)("div",xe,[(0,a.Lk)("div",We,[(0,a.bF)(n,{modelValue:i.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>i.keyword=e),"prefix-icon":"el-icon-search",placeholder:"搜索成员"},{append:(0,a.k6)((()=>[(0,a.bF)(r,{icon:"el-icon-search",onClick:s.search},null,8,["onClick"])])),_:1},8,["modelValue"])]),(0,a.Lk)("div",Ue,[(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",$e,[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"menu",ref:"groupTree",data:i.group,"node-key":i.groupProps.key,props:i.groupProps,"highlight-current":"","expand-on-click-node":!1,"current-node-key":i.groupId,onNodeClick:s.groupClick},null,8,["data","node-key","props","current-node-key","onNodeClick"])])),_:1})])),[[b,i.showGrouploading]]),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",je,[(0,a.Lk)("div",Ie,[(0,a.bF)(c,{ref:"userScrollbar"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"menu",ref:"userTree",data:i.user,"node-key":i.userProps.key,props:i.userProps,"default-checked-keys":s.selectedIds,"show-checkbox":"","check-on-click-node":"",onCheckChange:s.userClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])])),_:1},512)]),(0,a.Lk)("footer",null,[(0,a.bF)(p,{background:"",layout:"prev,next",small:"",total:i.total,"page-size":i.pageSize,currentPage:i.currentPage,"onUpdate:currentPage":l[1]||(l[1]=e=>i.currentPage=e),onCurrentChange:s.paginationChange},null,8,["total","page-size","currentPage","onCurrentChange"])])])),[[b,i.showUserloading]])])]),(0,a.Lk)("div",De,[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.bF)(m)])),_:1})]),(0,a.Lk)("div",Te,[(0,a.Lk)("header",null,"已选 ("+(0,d.v_)(i.selected.length)+")",1),(0,a.Lk)("ul",null,[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.selected,((e,l)=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.Lk)("span",Se,[(0,a.bF)(f,{size:"small"},{default:(0,a.k6)((()=>[(0,a.eW)((0,d.v_)(e.name.substring(0,1)),1)])),_:2},1024),(0,a.Lk)("label",null,(0,d.v_)(e.name),1)]),(0,a.Lk)("span",Xe,[(0,a.bF)(r,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:e=>s.deleteSelected(l)},null,8,["onClick"])])])))),128))])),_:1})])])])):(0,a.Q3)("",!0),2==i.type?((0,a.uX)(),(0,a.CE)("div",Ne,[(0,a.Lk)("div",Ee,[(0,a.Lk)("div",Ae,[(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",Pe,[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"menu",ref:"groupTree",data:i.role,"node-key":i.roleProps.key,props:i.roleProps,"show-checkbox":"","check-strictly":"","check-on-click-node":"","expand-on-click-node":!1,"default-checked-keys":s.selectedIds,onCheckChange:s.roleClick},null,8,["data","node-key","props","default-checked-keys","onCheckChange"])])),_:1})])),[[b,i.showGrouploading]])])]),(0,a.Lk)("div",Me,[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.bF)(m)])),_:1})]),(0,a.Lk)("div",Oe,[(0,a.Lk)("header",null,"已选 ("+(0,d.v_)(i.selected.length)+")",1),(0,a.Lk)("ul",null,[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.selected,((e,l)=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.Lk)("span",Re,[(0,a.Lk)("label",null,(0,d.v_)(e.name),1)]),(0,a.Lk)("span",Qe,[(0,a.bF)(r,{type:"danger",icon:"el-icon-delete",circle:"",size:"small",onClick:e=>s.deleteSelected(l)},null,8,["onClick"])])])))),128))])),_:1})])])])):(0,a.Q3)("",!0)])),_:1},8,["modelValue","title","width"])}t(64660),t(40772);var qe=t(80060),Ke={successCode:200,group:{apiObj:qe.A.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}},user:{apiObj:qe.A.demo.page,pageSize:20,parseData:function(e){return{rows:e.data.rows,total:e.data.total,msg:e.message,code:e.code}},props:{key:"id",label:"user"},request:{page:"page",pageSize:"pageSize",groupId:"groupId",keyword:"keyword"}},role:{apiObj:qe.A.system.dept.list,parseData:function(e){return{rows:e.data,msg:e.message,code:e.code}},props:{key:"id",label:"label",children:"children"}}},Be={props:{modelValue:{type:Boolean,default:!1}},data(){return{groupProps:Ke.group.props,userProps:Ke.user.props,roleProps:Ke.role.props,titleMap:["人员选择","角色选择"],dialogVisible:!1,showGrouploading:!1,showUserloading:!1,keyword:"",groupId:"",pageSize:Ke.user.pageSize,total:0,currentPage:1,group:[],user:[],role:[],type:1,selected:[],value:[]}},computed:{selectedIds(){return this.selected.map((e=>e.id))}},mounted(){},methods:{open(e,l){this.type=e,this.value=l||[],this.selected=JSON.parse(JSON.stringify(l||[])),this.dialogVisible=!0,1==this.type?(this.getGroup(),this.getUser()):2==this.type&&this.getRole()},async getGroup(){this.showGrouploading=!0;var e=await Ke.group.apiObj.get();this.showGrouploading=!1;var l={[Ke.group.props.key]:"",[Ke.group.props.label]:"所有"};e.data.unshift(l),this.group=Ke.group.parseData(e).rows},async getUser(){this.showUserloading=!0;var e={[Ke.user.request.keyword]:this.keyword||null,[Ke.user.request.groupId]:this.groupId||null,[Ke.user.request.page]:this.currentPage,[Ke.user.request.pageSize]:this.pageSize},l=await Ke.user.apiObj.get(e);this.showUserloading=!1,this.user=Ke.user.parseData(l).rows,this.total=Ke.user.parseData(l).total||0,this.$refs.userScrollbar.setScrollTop(0)},async getRole(){this.showGrouploading=!0;var e=await Ke.role.apiObj.get();this.showGrouploading=!1,this.role=Ke.role.parseData(e).rows},groupClick(e){this.keyword="",this.currentPage=1,this.groupId=e[Ke.group.props.key],this.getUser()},userClick(e,l){l?this.selected.push({id:e[Ke.user.props.key],name:e[Ke.user.props.label]}):this.selected=this.selected.filter((l=>l.id!=e[Ke.user.props.key]))},paginationChange(){this.getUser()},search(){this.groupId="",this.$refs.groupTree.setCurrentKey(this.groupId),this.currentPage=1,this.getUser()},deleteSelected(e){this.selected.splice(e,1),1==this.type?this.$refs.userTree.setCheckedKeys(this.selectedIds):2==this.type&&this.$refs.groupTree.setCheckedKeys(this.selectedIds)},roleClick(e,l){l?this.selected.push({id:e[Ke.role.props.key],name:e[Ke.role.props.label]}):this.selected=this.selected.filter((l=>l.id!=e[Ke.role.props.key]))},save(){this.value.splice(0,this.value.length),this.selected.map((e=>{this.value.push(e)})),this.dialogVisible=!1}}};const Ge=(0,W.A)(Be,[["render",ze],["__scopeId","data-v-e3061d58"]]);var He=Ge,Je={provide(){return{select:this.selectHandle}},props:{modelValue:{type:Object,default:()=>{}}},components:{nodeWrap:Ce,useSelect:He},data(){return{nodeConfig:this.modelValue,selectVisible:!1}},watch:{modelValue(e){this.nodeConfig=e},nodeConfig(e){this.$emit("update:modelValue",e)}},mounted(){},methods:{selectHandle(e,l){this.selectVisible=!0,this.$nextTick((()=>{this.$refs.useselect.open(e,l)}))}}};const Ye=(0,W.A)(Je,[["render",s]]);var Ze=Ye},86416:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return u}});t(64660),t(40772);var a=t(51464);const o={class:"dialog-footer"};function i(e,l,t,i,s,r){const d=(0,a.g2)("el-input"),n=(0,a.g2)("el-form-item"),u=(0,a.g2)("el-option"),c=(0,a.g2)("el-select"),p=(0,a.g2)("el-date-picker"),m=(0,a.g2)("el-form"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-dialog"),g=(0,a.gN)("loading");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:s.dialogVisible,"onUpdate:modelValue":l[11]||(l[11]=e=>s.dialogVisible=e),title:"项目详情",width:"600px"},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(m,{model:s.projectForm,ref:"form",rules:s.projectFormRules,"label-width":"100px"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{label:"项目号",prop:"project_number_"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.projectForm.project_number_,"onUpdate:modelValue":l[0]||(l[0]=e=>s.projectForm.project_number_=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"项目名称",prop:"project_name_"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.projectForm.project_name_,"onUpdate:modelValue":l[1]||(l[1]=e=>s.projectForm.project_name_=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"项目类型",prop:"project_type_"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:s.projectForm.project_type_,"onUpdate:modelValue":l[2]||(l[2]=e=>s.projectForm.project_type_=e),placeholder:"选择项目状态"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.projectTypes.filter((e=>0!==e.value)),(e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"项目状态"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:s.projectForm.project_statu_,"onUpdate:modelValue":l[3]||(l[3]=e=>s.projectForm.project_statu_=e),placeholder:"选择项目状态"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.projectState[0].options.filter((e=>0!==e.value)),(e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.value,label:e.label,value:e.value,disabled:e.value<s.initialStatus},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"项目经理"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:s.projectForm.project_manager_name_,"onUpdate:modelValue":l[4]||(l[4]=e=>s.projectForm.project_manager_name_=e),placeholder:"选择项目经理",onClick:l[5]||(l[5]=e=>r.handleNodeClick(s.projectForm.uuid_)),onChange:r.handleManagerChange},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.projectUserInfos,(e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.id_,label:e.fullname_,value:e.fullname_},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,a.bF)(n,{label:"客户"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.projectForm.ship_owner_,"onUpdate:modelValue":l[6]||(l[6]=e=>s.projectForm.ship_owner_=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"船厂"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.projectForm.ship_person_,"onUpdate:modelValue":l[7]||(l[7]=e=>s.projectForm.ship_person_=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"项目开始"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:s.projectForm.start_date_,"onUpdate:modelValue":l[8]||(l[8]=e=>s.projectForm.start_date_=e),type:"date",placeholder:"选择开始日期",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"项目结束"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:s.projectForm.end_date_,"onUpdate:modelValue":l[9]||(l[9]=e=>s.projectForm.end_date_=e),type:"date",placeholder:"选择结束日期",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])),[[g,s.formLoading]]),(0,a.Lk)("div",o,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{onClick:l[10]||(l[10]=e=>s.dialogVisible=!1)},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("取消")]))),_:1})),[[g,s.formLoading]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{type:"primary",onClick:r.submitFormProject},{default:(0,a.k6)((()=>l[13]||(l[13]=[(0,a.eW)("提交")]))),_:1},8,["onClick"])),[[g,s.formLoading]])])])),_:1},8,["modelValue"])}t(26005);var s=t(51840),r={components:{scSelectFilter:s.A},setup(){const e=(0,a.WQ)("userType");return{userType:e}},mounted(){this.initialStatus=this.projectForm.project_statu_},props:{editData:{type:Object,required:!0}},watch:{editData:{immediate:!0,handler(e){this.projectForm={...e},this.initialStatus=this.projectForm.project_statu_}}},data(){return{initialStatus:"",projectTypeValue:0,projectTypes:[{label:"所有",value:0},{label:"市场响应",value:1},{label:"自研项目",value:2},{label:"工程项目",value:3}],projectState:[{title:"状态(单)",key:"state",options:[{label:"全部",value:0},{label:"未开始",value:1,icon:"el-icon-flag"},{label:"执行中",value:2,icon:"el-icon-bottom-left"},{label:"已完成",value:3,icon:"el-icon-checked"},{label:"已关闭",value:4,icon:"el-icon-circle-close"}]}],selectedValues:{state:0},dialogVisible:!1,projectForm:{project_number_:"",project_name_:"",project_type_:""},projectFormRules:{project_number_:[{required:!0,message:"项目号不能为空",trigger:"blur"}],project_name_:[{required:!0,message:"项目名称不能为空",trigger:"blur"}],project_type_:[{required:!0,message:"项目类型不能为空",trigger:"blur"}]},projectTable:[],projectUserInfos:[],projectLoading:!1,formLoading:!1}},created(){this.getProjectInfo()},methods:{open(){this.dialogVisible=!0},async handleNodeClick(e){this.projectUserInfos=[];const l={project_id_:e};try{let e=await this.$dmsApi.projectUsershiproute.readId.post(l);if(!e.length)return this.$message({message:"请先添加项目组成员！",grouping:!0,type:"warning"}),null;this.projectUserInfos=await this.$apiIAM.user.usersByUserIds.post(e)}catch(t){console.error("Error fetching user list:",t)}},handleManagerChange(e){const l=this.projectUserInfos.find((l=>l.fullname_===e));l?this.projectForm.project_manager_user_id_=l.id_:console.log("未找到对应的项目经理")},openDialogProject(e){e?(this.projectForm={...e},this.initialStatus=this.projectForm.project_statu_):this.projectForm={},this.dialogVisible=!0},userInfo(e){const l={id_:e};return this.$apiIAM.user.userIdReadUserInfo.post(l)},async submitFormProject(){const e=await new Promise((e=>{this.$refs.form.validate((l=>{e(l)}))}));if(e){this.formLoading=!0;try{this.projectForm.uuid_?await this.$dmsApi.project.update.post(this.projectForm):await this.$dmsApi.project.create.post(this.projectForm)}catch(l){console.error("Error submitting project form:",l)}finally{this.dialogVisible=!1,this.formLoading=!1,this.$emit("updateProject")}}else this.formLoading=!1},async getProjectInfo(){this.projectLoading=!0;try{"admin"==this.userType?this.projectTable=await this.$dmsApi.project.readAll.get():this.userType}catch(e){console.error("Error fetching user list:",e)}finally{this.projectLoading=!1}},async postReadByIdProject(){const e={};0!==this.projectTypeValue&&(e.project_type_=this.projectTypeValue),0!==this.selectedValues.state&&(e.project_statu_=this.selectedValues.state),this.projectLoading=!0;try{0==this.selectedValues.state&&0==this.projectTypeValue?this.getProjectInfo():(0==e.project_statu_&&delete e.project_statu_,this.projectTable=await this.$dmsApi.project.readById.post(e))}catch(l){console.error("Error fetching user list:",l)}finally{this.projectLoading=!1}},tabChange(){this.postReadByIdProject()},selectChange(e){this.selectedValues.state=e.state,this.postReadByIdProject()}}},d=t(51456);const n=(0,d.A)(r,[["render",i]]);var u=n},70540:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return p}});var a=t(51464),o=t(51681);const i={shadow:"never",header:"分类筛选器"};function s(e,l,t,s,r,d){const n=(0,a.g2)("el-tab-pane"),u=(0,a.g2)("el-tabs"),c=(0,a.g2)("sc-select-filter"),p=(0,a.g2)("el-button"),m=(0,a.g2)("el-card"),h=(0,a.g2)("el-header"),f=(0,a.g2)("el-table-column"),g=(0,a.g2)("el-progress"),b=(0,a.g2)("router-link"),_=(0,a.g2)("el-button-group"),k=(0,a.g2)("scTable"),v=(0,a.g2)("el-container"),y=(0,a.g2)("project-edit"),F=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(v,null,{default:(0,a.k6)((()=>["admin"==s.userType?((0,a.uX)(),(0,a.Wv)(h,{key:0,style:{height:"auto"},class:"header-tabs"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{type:"card",modelValue:r.projectTypeValue,"onUpdate:modelValue":l[0]||(l[0]=e=>r.projectTypeValue=e),onTabChange:d.onTabChange},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.projectTypes,(e=>((0,a.uX)(),(0,a.Wv)(n,{key:e.value,label:e.label,name:e.value},null,8,["label","name"])))),128))])),_:1},8,["modelValue","onTabChange"]),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[(0,a.bF)(c,{data:r.projectState,"selected-values":r.selectedValues,"label-width":80,onOnChange:d.onSelectChange},null,8,["data","selected-values","onOnChange"]),(0,a.bF)(p,{type:"primary",disabled:!e.$isButtonVisible,icon:"el-icon-plus",onClick:d.openDialogProject},null,8,["disabled","onClick"])])])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(k,{ref:"projectTable",data:r.projectTable,"row-key":"uuid_",style:{width:"100%"},stripe:""},{default:(0,a.k6)((()=>[(0,a.bF)(f,{type:"selection",width:"50"}),(0,a.bF)(f,{label:"项目号",prop:"project_number_",width:"100"}),(0,a.bF)(f,{label:"项目名称",prop:"project_name_",width:"150"}),(0,a.bF)(f,{label:"技术负责人",prop:"project_manager_name_",width:"150"}),(0,a.bF)(f,{label:"开始(计划时间)",prop:"start_date_",width:"120"}),(0,a.bF)(f,{label:"结束(计划时间)",prop:"end_date_",width:"120"}),(0,a.bF)(f,{label:"时间进度",width:"150"},{default:(0,a.k6)((({row:e})=>[(0,a.Lk)("div",{style:(0,o.Tr)(d.getStyle(e))},[(0,a.bF)(g,{"stroke-width":10,percentage:d.getProgress(e),color:d.getStyle(e)},null,8,["percentage","color"])],4)])),_:1}),(0,a.bF)(f,{label:"开始时间",prop:"start_date_ast_",width:"120"}),(0,a.bF)(f,{label:"结束时间",prop:"end_date_aet_",width:"120"}),(0,a.bF)(f,{label:"项目状态",prop:"project_statu_",width:"120"},{default:(0,a.k6)((e=>[(0,a.bF)(b,{to:{name:"dataAnalysis"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{text:"",type:"primary",size:"small",style:(0,o.Tr)(d.getStatusStyle(e.row.project_statu_))},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(d.getStatusText(e.row.project_statu_)),1)])),_:2},1032,["style"])])),_:2},1024)])),_:1}),(0,a.bF)(f,{label:"客户",prop:"ship_owner_",width:"150"}),(0,a.bF)(f,{label:"船厂",prop:"ship_person_",width:"150"}),(0,a.bF)(f,{label:"备注",prop:"remarks_",width:"200",sortable:""}),(0,a.bF)(f,{label:"图纸状态",fixed:"right",width:"80"},{default:(0,a.k6)((e=>[(0,a.bF)(_,null,{default:(0,a.k6)((()=>["admin"==s.userType?((0,a.uX)(),(0,a.Wv)(b,{key:0,to:{name:"drawingInfo",query:{projectUuid:e.row.uuid_,state:"admin",projectState:e.row.project_statu_}}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{text:"",type:"primary",size:"small"},{default:(0,a.k6)((()=>l[1]||(l[1]=[(0,a.eW)("查看")]))),_:1})])),_:2},1032,["to"])):(0,a.Q3)("",!0),"user"==s.userType?((0,a.uX)(),(0,a.Wv)(b,{key:1,to:{name:"userDrawing",query:{projectUuid:e.row.uuid_,state:"user",projectState:e.row.project_statu_}}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{text:"",type:"primary",size:"small"},{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("查看")]))),_:1})])),_:2},1032,["to"])):(0,a.Q3)("",!0)])),_:2},1024)])),_:1}),(0,a.bF)(f,{label:"送审状态",fixed:"right",width:"80"},{default:(0,a.k6)((()=>[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{to:{name:"submissionPlan"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{text:"",type:"primary",size:"small"},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("查看")]))),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(f,{label:"操作",fixed:"right",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,{text:"",type:"primary",size:"small",disabled:"user"==this.$TOOL.data.get("USER_INFO").user_type_,onClick:l=>d.openDialogProject(e.row)},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("编辑")]))),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[F,r.projectLoading]])])),_:1}),(0,a.bF)(y,{ref:"projectEdit",onUpdateProject:d.fetchProjects,editData:r.projectForm},null,8,["onUpdateProject","editData"])],64)}t(64660),t(89593);var r=t(51840),d=t(86416),n={components:{scSelectFilter:r.A,projectEdit:d["default"]},setup(){const e=(0,a.WQ)("userType");return{userType:e}},data(){return{projectTypeValue:0,projectTypes:[{label:"所有",value:0},{label:"市场响应",value:1},{label:"自研项目",value:2},{label:"工程项目",value:3}],projectState:[{title:"状态(单)",key:"state",options:[{label:"全部",value:0},{label:"未开始",value:1,icon:"el-icon-flag"},{label:"执行中",value:2,icon:"el-icon-bottom-left"},{label:"已完成",value:3,icon:"el-icon-checked"},{label:"已关闭",value:4,icon:"el-icon-circle-close"}]}],selectedValues:{state:0},dialogVisible:!1,projectForm:{},projectTable:[],projectLoading:!1}},created(){this.fetchProjects()},methods:{getStyle(e){const l=new Date,t=new Date(e.start_date_),a=new Date(e.end_date_),o=a-t,i=l-t;if(o<=0)return"#909399";const s=i/o*100;return console.log(s,"progressprogressprogress"),s<60?"#409EFF":s<80?"#E6A23C":"#F56C6C"},getProgress(e){const l=new Date,t=new Date(e.start_date_),a=new Date(e.end_date_),o=a-t,i=l-t;if(o<=0)return"N/A";const s=Math.round(i/o*100);return`${s}`},openDialogProject(e={}){this.projectForm={...e},this.$refs.projectEdit.open()},async fetchProjects(){this.projectLoading=!0;try{"admin"==this.userType&&(this.projectTable=await this.$dmsApi.project.readAll.get()),"user"==this.userType&&(this.projectTable=await this.$dmsApi.project.readByUser.post())}catch(e){console.error("Error fetching projects:",e)}finally{this.projectLoading=!1}},async fetchFilteredProjects(){let e={project_type_:this.projectTypeValue,project_statu_:this.selectedValues.state};this.projectLoading=!0;try{0==e.project_type_&&0==e.project_statu_?this.projectTable=await this.$dmsApi.project.readAll.get():(Object.keys(e).forEach((l=>{0==e[l]&&delete e[l]})),this.projectTable=await this.$dmsApi.project.readById.post(e))}catch(l){console.error("Error fetching filtered projects:",l)}finally{this.projectLoading=!1}},onTabChange(){this.fetchFilteredProjects()},onSelectChange(e){this.selectedValues.state=e.state,this.fetchFilteredProjects()},getStatusStyle(e){const l={1:"#ff8c00",2:"#409eff",3:"#67c23a",default:"#909399"};return{color:l[e]||l.default}},getStatusText(e){const l={1:"未开始",2:"执行中",3:"已完成",default:"已关闭"};return l[e]||l.default}}},u=t(51456);const c=(0,u.A)(n,[["render",s]]);var p=c},36394:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return h}});var a=t(51464),o=t(51681),i=t(45883);const s={class:"custom-tree-node"},r={class:"label"},d={class:"do"},n={class:"dialog-footer"};function u(e,l,t,u,c,p){const m=(0,a.g2)("el-button"),h=(0,a.g2)("el-tree"),f=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:c.dialogFormVisible,"onUpdate:modelValue":l[1]||(l[1]=e=>c.dialogFormVisible=e),title:"目录导入",width:"500"},{footer:(0,a.k6)((()=>[(0,a.Lk)("div",n,[(0,a.bF)(m,{loading:c.loading,onClick:l[0]||(l[0]=e=>c.dialogFormVisible=!1)},{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("取消")]))),_:1},8,["loading"]),(0,a.bF)(m,{loading:c.loading,type:"primary",onClick:p.save},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)(" 提交导入 ")]))),_:1},8,["loading","onClick"])])])),default:(0,a.k6)((()=>[(0,a.bF)(h,{ref:"menu",class:"menu","node-key":"uuid_",data:c.treeData,props:c.menuProps,"highlight-current":"","expand-on-click-node":!1,"show-checkbox":"","filter-node-method":p.menuFilterNode,onNodeClick:p.menuClick,onNodeDrop:e.nodeDrop,style:{"max-width":"600px"}},{default:(0,a.k6)((({node:e,data:l})=>[(0,a.Lk)("span",s,[(0,a.Lk)("span",r,(0,o.v_)(e.label),1),(0,a.Lk)("span",d,[(0,a.bF)(m,{icon:"el-icon-plus",size:"small",onClick:(0,i.D$)((t=>p.createMenuButton(e,l)),["stop"])},null,8,["onClick"])])])])),_:1},8,["data","props","filter-node-method","onNodeClick","onNodeDrop"])])),_:1},8,["modelValue"])}var c={setup(){const e=(0,a.WQ)("refreshData");return{refreshData:e}},props:{type:{type:String,required:!0}},data(){return{menuloading:!1,menuTreeData:[],treeData:[],menuProps:{label:e=>e.title_},dialogFormVisible:!0,selectedNodes:[],loading:!1}},mounted(){this.getMenu()},methods:{async save(){this.loading=!1;const e={project_uuid_:this.type,menus:[...this.$refs.menu.getCheckedKeys(),...this.$refs.menu.getHalfCheckedKeys()]};try{await this.$dmsApi.drawingMenuProject.createBatch.post(e)}finally{this.loading=!1,this.refreshData(),this.dialogFormVisible=!1}},async getMenu(){this.menuloading=!0;let e=[];e=await this.$dmsApi.drawingMenu.readAll.get(),this.menuloading=!1,this.treeData=e},menuClick(e,l){console.log(l,e,"pidpidpid")},menuFilterNode(e,l){if(!e)return!0;var t=l.title;return-1!==t.indexOf(e)},createMenuButton(e,l){console.log(e,l,"node, data")}}},p=t(51456);const m=(0,p.A)(c,[["render",u]]);var h=m},14480:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return c}});var a=t(51464),o=t(51681);function i(e,l,t,i,s,r){const d=(0,a.g2)("el-empty"),n=(0,a.g2)("el-col"),u=(0,a.g2)("el-input"),c=(0,a.g2)("el-form-item"),p=(0,a.g2)("el-cascader"),m=(0,a.g2)("el-button"),h=(0,a.g2)("el-form"),f=(0,a.g2)("el-row"),g=(0,a.gN)("loading");return(0,a.uX)(),(0,a.Wv)(f,{gutter:40},{default:(0,a.k6)((()=>[s.form.menu_id_?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},["目录"==t.type?((0,a.uX)(),(0,a.Wv)(n,{key:0},{default:(0,a.k6)((()=>[(0,a.Lk)("h2",null,(0,o.v_)(s.form.title||"目录详情"),1),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{model:s.form,rules:s.rules,ref:"dialogForm","label-width":"80px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{label:"显示名称",prop:"title_"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:s.form.title_,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.title_=e),clearable:"",placeholder:"菜单显示名字"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"上级菜单",prop:"parent_id_"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:s.form.parent_id_,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.parent_id_=e),options:s.menuOptions,props:s.menuProps,"show-all-levels":!1,placeholder:"顶级菜单",clearable:"",disabled:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.bF)(c,{label:"编码规则",prop:"coding_rule_"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:s.form.coding_rule_,"onUpdate:modelValue":l[2]||(l[2]=e=>s.form.coding_rule_=e),clearable:"",placeholder:"编码规则"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{type:"primary",disabled:!e.$isButtonVisible,onClick:r.save,loading:s.loading},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("保 存")]))),_:1},8,["disabled","onClick","loading"]),(0,a.bF)(m,{type:"primary",disabled:!e.$isButtonVisible,onClick:r.deleteButton,loading:s.loading},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("删 除")]))),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1},8,["model","rules"])),[[g,s.loading]])])),_:1})):(0,a.Q3)("",!0)],64)):((0,a.uX)(),(0,a.Wv)(n,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(d,{description:"请选择左侧菜单后操作","image-size":100})])),_:1}))])),_:1})}t(78982),t(64660),t(89593);var s=t(41305),r=t(76695),d={components:{scIconSelect:r.A},setup(){const e=(0,a.WQ)("refreshData");return{refreshData:e}},props:{menu:{type:Object,default:()=>{}},type:{type:String,default:"目录"}},data(){return{expands:[1],getRowKeys:e=>e.eqId,form:{},menuOptions:[],menuProps:{value:"id",label:"title",checkStrictly:!0},rules:[],loading:!1,drawingFind:{projec_id_:1,drawing_menu_id_:2},userInfo:[]}},watch:{menu:{handler(){this.menuOptions=this.treeToMap(this.menu)},deep:!0}},computed:{drawingCategory(){return"drawingCategory"===this.$route.name},drawingInfo(){return"drawingInfo"===this.$route.name}},mounted(){this.userInfo=this.$TOOL.data.get("USER_INFO")},methods:{async handleExpandChange(e,l){if(l&&!e.fileList){e.loading=!0;try{const l=await this.$dmsApi.fileInfo.readId.post();e.fileList=l}catch(t){console.error("Error fetching file list:",t)}finally{e.loading=!1}}},async deleteButton(){try{const e=await s.s.confirm("此操作将永久删除该项数据，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(e){this.loading=!0;const e={uuid_:this.form.uuid_};if(this.drawingCategory){const l=await this.$dmsApi.drawingMenu.delete.post(e);void 0!==l?this.$message.success("删除成功"):this.$message.warning(l.message)}else if(this.drawingInfo){const l=await this.$dmsApi.drawingMenuProject.delete.post(e);void 0!==l?this.$message.success("删除成功"):this.$message.warning(l.message)}}}catch(e){console.error("Error fetching file list:",e)}finally{this.refreshData(),this.form={},this.loading=!1}},treeToMap(e){const l=[];return e.forEach((e=>{var t={id:e.id,parentId:e.parentId,title:e.title};l.push(t)})),l},async save(){this.loading=!0;var e=[];this.drawingCategory?e=await this.$dmsApi.drawingMenu.update.post(this.form):this.drawingInfo&&(e=await this.$dmsApi.drawingMenuProject.update.post(this.form)),this.loading=!1,void 0!==e&&this.refreshData()},setData(e,l){this.form={...e},console.log(e,l,"pid")}}},n=t(51456);const u=(0,n.A)(d,[["render",i],["__scopeId","data-v-9e73ea52"]]);var c=u},41836:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return g}});var a=t(51464),o=t(51681),i=t(45883);const s={class:"custom-tree-node"},r={key:0,class:"do"};function d(e,l,t,d,n,u){const c=(0,a.g2)("el-button"),p=(0,a.g2)("el-col"),m=(0,a.g2)("el-header"),h=(0,a.g2)("el-input"),f=(0,a.g2)("el-text"),g=(0,a.g2)("el-tree"),b=(0,a.g2)("el-main"),_=(0,a.g2)("el-footer"),k=(0,a.g2)("el-container"),v=(0,a.g2)("el-aside"),y=(0,a.g2)("menu-params"),F=(0,a.g2)("dwg-form"),w=(0,a.g2)("import-menu"),V=(0,a.g2)("el-crd"),C=(0,a.gN)("loading");return(0,a.uX)(),(0,a.Wv)(k,null,{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(v,{width:"300px"},{default:(0,a.k6)((()=>[(0,a.bF)(k,null,{default:(0,a.k6)((()=>["projectCatalogue"==d.status?((0,a.uX)(),(0,a.Wv)(m,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{onClick:l[0]||(l[0]=e=>u.switchComponent("save1")),type:"save1"===n.displayComponent?"primary":""},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("图纸管理")]))),_:1},8,["type"]),(0,a.bF)(c,{onClick:l[1]||(l[1]=e=>u.switchComponent("save")),type:"save"===n.displayComponent?"primary":""},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.eW)("目录管理")]))),_:1},8,["type"])])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(h,{placeholder:"输入关键字进行过滤",modelValue:n.menuFilterText,"onUpdate:modelValue":l[2]||(l[2]=e=>n.menuFilterText=e),clearable:""},null,8,["modelValue"]),(0,a.bF)(b,{class:"nopadding"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{ref:"menu",class:"menu","node-key":"id",data:n.menuTreeData,props:n.menuProps,draggable:"","highlight-current":"","expand-on-click-node":!1,"check-strictly":"","show-checkbox":"","filter-node-method":u.menuFilterNode,onNodeClick:u.menuClick,onNodeDrop:u.nodeDrop},{default:(0,a.k6)((({node:l,data:t})=>[(0,a.Lk)("span",s,[(0,a.bF)(f,{style:{width:"180px"},truncated:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(l.label),1)])),_:2},1024),"save"===n.displayComponent||u.drawingCategory?((0,a.uX)(),(0,a.CE)("span",r,[(0,a.bF)(c,{icon:"el-icon-plus",size:"small",disabled:!e.$isButtonVisible||4==this.$route.query.projectState,onClick:(0,i.D$)((e=>u.createMenuButton(l,t)),["stop"])},null,8,["disabled","onClick"])])):(0,a.Q3)("",!0)])])),_:1},8,["data","props","filter-node-method","onNodeClick","onNodeDrop"])])),_:1}),"save"===n.displayComponent||u.drawingCategory?((0,a.uX)(),(0,a.Wv)(_,{key:1,style:{height:"51px"}},{default:(0,a.k6)((()=>[(0,a.bF)(c,{type:"primary",size:"small",icon:"el-icon-plus",onClick:l[3]||(l[3]=e=>u.createMenuButton()),disabled:!e.$isButtonVisible||4==this.$route.query.projectState},null,8,["disabled"]),(0,a.bF)(c,{type:"danger",size:"small",plain:"",icon:"el-icon-delete",onClick:u.delMenu,disabled:""},null,8,["onClick"]),"projectCatalogue"==d.status?((0,a.uX)(),(0,a.Wv)(c,{key:0,disabled:!e.$isButtonVisible||4==this.$route.query.projectState,onClick:u.importButton},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("导入模板")]))),_:1},8,["disabled","onClick"])):(0,a.Q3)("",!0)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})),[[C,n.menuloading]]),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"nopadding",style:{padding:"20px"},ref:"main"},{default:(0,a.k6)((()=>["save"===n.displayComponent||"typeCatalogue"==d.status?((0,a.uX)(),(0,a.Wv)(y,{key:0,ref:"save",menu:n.menuTreeData},null,8,["menu"])):(0,a.Q3)("",!0),"save1"===n.displayComponent&&"projectCatalogue"==d.status?((0,a.uX)(),(0,a.Wv)(F,{key:1,ref:"save",menu:n.menuTreeData},null,8,["menu"])):(0,a.Q3)("",!0),n.dialogMenu?((0,a.uX)(),(0,a.Wv)(V,{key:2},{default:(0,a.k6)((()=>[(0,a.bF)(w,{type:n.projectUuid},null,8,["type"])])),_:1})):(0,a.Q3)("",!0)])),_:1},512)])),_:1})])),_:1})}t(64660),t(40772),t(89593),t(70426);var n=t(14480),u=t(23991),c=t(36394);let p=1;var m={name:"settingMenu",setup(){const{proxy:e}=(0,a.nI)(),l=()=>{e.getMenu(),console.log("父组件数据已刷新")};(0,a.Gt)("refreshData",l);const t=(0,a.WQ)("status"),o=(0,a.WQ)("userType");return{status:t,userType:o}},components:{menuParams:n["default"],dwgForm:u["default"],importMenu:c["default"]},data(){return{menuloading:!1,displayType:"目录",menuTreeData:[],projectUuid:"",menuProps:{label:e=>e.title_},menuFilterText:"",dialogMenu:!1,displayComponent:"save1"}},computed:{drawingCategory(){return"drawingCategory"===this.$route.name},drawingInfo(){return"drawingInfo"===this.$route.name}},watch:{menuFilterText(e){this.$refs.menu.filter(e)}},mounted(){this.getMenu()},methods:{importButton(){this.dialogMenu=!0},async getMenu(){this.menuloading=!0;let e=[];if(this.drawingCategory)e=await this.$dmsApi.drawingMenu.readAll.get();else if(this.drawingInfo){let l={project_uuid_:this.$route.query.projectUuid};this.projectUuid=this.$route.query.projectUuid,e=await this.$dmsApi.drawingMenuProject.readById.post(l)}this.menuloading=!1,this.menuTreeData=e},menuClick(e,l){var t=1==l.level?void 0:l.parent.data.menu_id_;this.$refs.save.setData(e,t),this.$refs.main.$el.scrollTop=0},menuFilterNode(e,l){if(!e)return!0;var t=l.title_;return-1!==t.indexOf(e)},nodeDrop(e,l,t){this.$refs.save.setData({}),this.$message(`拖拽对象：${e.data.title}, 释放对象：${l.data.title}, 释放对象的位置：${t}`)},async createMenuButton(e,l){var t="未命名"+p++,a={parent_id_:l?l.menu_id_:null,title_:t};this.menuloading=!0,this.drawingCategory?await this.$dmsApi.drawingMenu.create.post(a):this.drawingInfo&&(a.project_uuid_=this.$route.query.projectUuid,await this.$dmsApi.drawingMenuProject.create.post(a)),this.getMenu(),this.menuloading=!1},switchComponent(e){this.displayComponent=e},async delMenu(){var e=this.$refs.menu.getCheckedNodes();if(0==e.length)return this.$message.warning("请选择需要删除的项"),!1;var l=await this.$confirm("确认删除已选择的菜单吗？","提示",{type:"warning",confirmButtonText:"删除",confirmButtonClass:"el-button--danger"}).catch((()=>{}));if("confirm"!=l)return!1;this.menuloading=!0;var t={ids:e.map((e=>e.id))},a=await this.$API.demo.post.post(t);this.menuloading=!1,200==a.code?e.forEach((e=>{var l=this.$refs.menu.getNode(e);l.isCurrent&&this.$refs.save.setData({}),this.$refs.menu.remove(e)})):this.$message.warning(a.message)}}},h=t(51456);const f=(0,h.A)(m,[["render",d],["__scopeId","data-v-9429ba7a"]]);var g=f},86211:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return n}});var a=t(51464);const o={class:"dialog-footer"};function i(e,l,t,i,s,r){const d=(0,a.g2)("el-input"),n=(0,a.g2)("el-form-item"),u=(0,a.g2)("el-option"),c=(0,a.g2)("el-select"),p=(0,a.g2)("el-date-picker"),m=(0,a.g2)("el-form"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-dialog"),g=(0,a.g2)("el-row"),b=(0,a.gN)("loading");return(0,a.uX)(),(0,a.Wv)(g,{gutter:40},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:s.dialogDwg,"onUpdate:modelValue":l[10]||(l[10]=e=>s.dialogDwg=e),title:"图纸详情",width:"600px"},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(m,{model:s.dwgForm,"label-width":"100px"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{label:"图号"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.dwgForm.drawing_number_,"onUpdate:modelValue":l[0]||(l[0]=e=>s.dwgForm.drawing_number_=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"图名"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.dwgForm.drawing_name_,"onUpdate:modelValue":l[1]||(l[1]=e=>s.dwgForm.drawing_name_=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"执行"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:s.dwgForm.executor_name_,"onUpdate:modelValue":l[2]||(l[2]=e=>s.dwgForm.executor_name_=e),placeholder:"选择执行工程师",onClick:l[3]||(l[3]=e=>r.handleNodeClick(s.dwgForm.project_id_)),onChange:r.executorChange},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.projectUserInfos,(e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.id_,label:e.fullname_,value:e.fullname_},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,a.bF)(n,{label:"校验"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:s.dwgForm.verifier_name_,"onUpdate:modelValue":l[4]||(l[4]=e=>s.dwgForm.verifier_name_=e),placeholder:"选择校验工程师",onClick:l[5]||(l[5]=e=>r.handleNodeClick(s.dwgForm.project_id_)),onChange:r.verifierChange},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.projectUserInfos,(e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.id_,label:e.fullname_,value:e.fullname_},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,a.bF)(n,{label:"图纸状态"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:s.dwgForm.status_,"onUpdate:modelValue":l[6]||(l[6]=e=>s.dwgForm.status_=e),placeholder:"选择项目状态"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.options,(e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.value,label:e.label,value:e.value,disabled:e.value<s.initialStatus},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"任务开始"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:s.dwgForm.start_date_,"onUpdate:modelValue":l[7]||(l[7]=e=>s.dwgForm.start_date_=e),type:"date",placeholder:"选择开始日期",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"任务结束"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:s.dwgForm.delivery_date_,"onUpdate:modelValue":l[8]||(l[8]=e=>s.dwgForm.delivery_date_=e),type:"date",placeholder:"选择结束日期",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])),[[b,s.loading]]),(0,a.Lk)("div",o,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{onClick:l[9]||(l[9]=l=>e.dialogVisible=!1)},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("取消")]))),_:1})),[[b,s.loading]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{type:"primary",onClick:r.submitForm},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("提交")]))),_:1},8,["onClick"])),[[b,s.loading]])])])),_:1},8,["modelValue"])])),_:1})}t(64660),t(26005);var s={data(){return{dialogDwg:!1,dwgForm:{},projectUserInfos:[],loading:!1,initialStatus:"",options:[{label:"未开始",value:1,icon:"el-icon-flag"},{label:"执行中",value:2,icon:"el-icon-bottom-left"},{label:"已结束",value:3,icon:"el-icon-checked"}]}},methods:{async handleNodeClick(e){const l={project_id_:e};try{const e=await this.$dmsApi.projectUsershiproute.readId.post(l);if(!e)return console.log("User not found"),null;this.projectUserInfos=await this.$apiIAM.user.usersByUserIds.post(e)}catch(t){console.error("Error fetching user list:",t)}},executorChange(e){const l=this.projectUserInfos.find((l=>l.fullname_===e));l?this.dwgForm.executor_id_=l.id_:console.log("未找到对应的项目经理")},verifierChange(e){const l=this.projectUserInfos.find((l=>l.fullname_===e));l?this.dwgForm.verifier_id_=l.id_:console.log("未找到对应的项目经理")},open(){this.dialogDwg=!0},async submitForm(){this.loading=!0;try{await this.$dmsApi.drawingInfo.update.post(this.dwgForm)}catch(e){console.error("提交失败:",e)}finally{this.$emit("getFun"),this.loading=!1,this.dialogDwg=!1}},setData(e){this.dwgForm={...e},this.initialStatus=e.status_}}},r=t(51456);const d=(0,r.A)(s,[["render",i]]);var n=d},23991:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return p}});var a=t(51464),o=t(51681);function i(e,l,t,i,s,r){const d=(0,a.g2)("el-empty"),n=(0,a.g2)("el-col"),u=(0,a.g2)("el-button"),c=(0,a.g2)("el-table-column"),p=(0,a.g2)("el-progress"),m=(0,a.g2)("el-link"),h=(0,a.g2)("el-table"),f=(0,a.g2)("el-row"),g=(0,a.g2)("dialog1"),b=(0,a.g2)("dialog2"),_=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{gutter:40},{default:(0,a.k6)((()=>[s.drawingInfo?((0,a.uX)(),(0,a.Wv)(n,{key:1,class:"apilist"},{default:(0,a.k6)((()=>[(0,a.Lk)("h2",null,(0,o.v_)(s.menuForm.title_),1),s.menuForm.title_?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(u,{key:0,type:"primary",size:"small",icon:"el-icon-plus",onClick:l[0]||(l[0]=e=>r.creatDwg()),disabled:!e.$isButtonVisible||4==this.$route.query.projectState},null,8,["disabled"])),[[_,s.dwgloading]]):(0,a.Q3)("",!0),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{ref:"table",data:s.drawingInfo,"highlight-current-row":"",onExpandChange:r.handleExpandChange},{default:(0,a.k6)((()=>[(0,a.bF)(c,{prop:"drawing_number_",label:"图号",width:"100"}),(0,a.bF)(c,{prop:"drawing_name_",label:"图名",width:"180","show-overflow-tooltip":""}),(0,a.bF)(c,{prop:"executor_name_",label:"执行",width:"110"}),(0,a.bF)(c,{prop:"verifier_name_",label:"负责人",width:"130"}),(0,a.bF)(c,{prop:"start_date_",label:"开始(计划时间)",width:"100"}),(0,a.bF)(c,{prop:"delivery_date_",label:"交付(计划时间)",width:"100"}),(0,a.bF)(c,{label:"时间进度",width:"150"},{default:(0,a.k6)((({row:e})=>[(0,a.Lk)("div",{style:(0,o.Tr)(r.getStyle(e))},[(0,a.bF)(p,{"stroke-width":10,percentage:r.getProgress(e),color:r.getStyle(e)},null,8,["percentage","color"])],4)])),_:1}),(0,a.bF)(c,{prop:"start_date_ast_",label:"开始时间",width:"100"}),(0,a.bF)(c,{prop:"end_date_aet_",label:"完成时间",width:"100"}),(0,a.bF)(c,{prop:"status_",label:"状态",width:"70"},{default:(0,a.k6)((e=>[(0,a.bF)(m,{class:"mx-1",type:1==e.row.status_?"info":2==e.row.status_?"success":3==e.row.status_?"primary":4==e.row.status_?"danger":"default"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(1==e.row.status_?"未开始":2==e.row.status_?"执行中":3==e.row.status_?"已结束":4==e.row.status_?"已超期":"未知"),1)])),_:2},1032,["type"])])),_:1}),(0,a.bF)(c,{prop:"last_submission_",label:"最新提交",width:"100"}),(0,a.bF)(c,{prop:"current_version_",label:"当前版本",width:"80"},{default:(0,a.k6)((e=>[(0,a.eW)((0,o.v_)("V"-e.row.current_version_),1)])),_:1}),(0,a.bF)(c,{prop:"status_",label:"操作",width:"250"},{default:(0,a.k6)((t=>[(0,a.bF)(u,{text:"",type:"primary",size:"small",onClick:e=>r.openDwgDialog(t.row),disabled:"user"==this.$TOOL.data.get("USER_INFO").user_type_},{default:(0,a.k6)((()=>l[1]||(l[1]=[(0,a.eW)("信息编辑")]))),_:2},1032,["onClick","disabled"]),e.$TOOL.data.get("USER_INFO").id_==t.row.executor_id_||4==!this.$route.query.projectState?((0,a.uX)(),(0,a.Wv)(u,{key:0,text:"",type:"primary",size:"small",onClick:e=>r.openHoursDialog(t.row)},{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("填报工时")]))),_:2},1032,["onClick"])):(0,a.Q3)("",!0),(0,a.bF)(u,{text:"",type:"primary",disabled:"user"==this.$TOOL.data.get("USER_INFO").user_type_,size:"small",onClick:e=>r.deleteDwg(t.row)},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("删除")]))),_:2},1032,["disabled","onClick"])])),_:1})])),_:1},8,["data","onExpandChange"])),[[_,s.dwgloading]])])),_:1})):((0,a.uX)(),(0,a.Wv)(n,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(d,{description:"请选择左侧菜单后操作","image-size":100})])),_:1}))])),_:1}),(0,a.bF)(g,{ref:"dwgDialog",menu:s.dialogData,onGetFun:r.getDwgData},null,8,["menu","onGetFun"]),(0,a.bF)(b,{ref:"manhoursDialog",menu:s.dialogData},null,8,["menu"])],64)}var s=t(86211),r=t(55899),d=t(41305),n={components:{dialog1:s["default"],dialog2:r["default"]},data(){return{dialogData:[],dwgloading:!1,menuForm:[],defaultProps:{children:"children",label:"version"},drawingInfo:[],loading:!1,drawingFind:{projec_id_:1,drawing_menu_id_:2},fileList:[],userState:this.$route.query.state}},watch:{menuForm(){this.getDwgData()}},mounted(){"user"==this.userState&&this.getaaa()},methods:{getStyle(e){const l=new Date,t=new Date(e.start_date_),a=new Date(e.end_date_),o=a-t,i=l-t;if(o<=0)return"#909399";const s=i/o*100;return console.log(s,"progressprogressprogress"),s<60?"#409EFF":s<80?"#E6A23C":"#F56C6C"},getProgress(e){const l=new Date,t=new Date(e.start_date_),a=new Date(e.delivery_date_),o=a-t,i=l-t;if(o<=0)return"N/A";const s=Math.round(i/o*100);return`${s}`},async getaaa(){try{const e={project_id_:this.$route.query.projectUuid};this.drawingInfo=await this.$dmsApi.drawingInfo.readByUserId.post(e)}catch(e){console.error}},async getDwgData(){this.dwgloading=!0;try{const e={drawing_menu_id_:this.menuForm.uuid_},l=await this.$dmsApi.drawingInfo.readById.post(e);if(!l)return console.log("Not found"),null;this.drawingInfo=l}catch(e){console.error("Error fetching user list:",e)}finally{this.dwgloading=!1}},async creatDwg(){this.dwgloading=!0;try{const e={project_id_:this.menuForm.project_uuid_,drawing_menu_id_:this.menuForm.uuid_,drawing_number_:this.menuForm.coding_rule_+String(this.drawingInfo.length+1).padStart(3,"0"),drawing_name_:this.menuForm.title_},l=await this.$dmsApi.drawingInfo.create.post(e);if(!l)return console.log("Not found"),null;this.getDwgData()}catch(e){console.error("Error fetching user list:",e)}finally{this.dwgloading=!1}},async deleteDwg(e){try{const l=await d.s.confirm("此操作将永久删除该项数据，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(l){this.dwgloading=!0;const l={uuid_:e.uuid_};await this.$dmsApi.drawingInfo.delete.post(l),this.getDwgData()}}catch(l){}},openDwgDialog(e){this.dialogData=e,this.$refs.dwgDialog.setData(e),this.$refs.dwgDialog.open()},openHoursDialog(e){1!=e.status_?(this.dialogData=e,this.$refs.manhoursDialog.setData(e),this.$refs.manhoursDialog.open()):this.$message({message:"图纸任务暂未开始.",type:"warning"})},async handleExpandChange(e,l){if(l&&!e.fileList){e.loading=!0;try{const l=await this.$dmsApi.fileInfo.readId.post();e.fileList=l}catch(t){console.error("Error fetching file list:",t)}finally{e.loading=!1}}},async getfileInfo(){try{return await this.$dmsApi.fileInfo.readId.post()}catch(e){console.error("Error fetching details:",e)}},async getDrawingInfo(){this.drawingInfo=await this.$dmsApi.drawingInfo.inquireList.post(this.drawingFind)},setData(e,l){this.menuForm=e,console.log(e,l,"data, pid")}}},u=t(51456);const c=(0,u.A)(n,[["render",i],["__scopeId","data-v-5763d003"]]);var p=c},89456:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return u}});var a=t(51464);const o={class:"dialog-footer"};function i(e,l,t,i,s,r){const d=(0,a.g2)("el-option"),n=(0,a.g2)("el-select"),u=(0,a.g2)("el-table-column"),c=(0,a.g2)("el-input"),p=(0,a.g2)("sc-form-table"),m=(0,a.g2)("el-form-item"),h=(0,a.g2)("el-form"),f=(0,a.g2)("el-card"),g=(0,a.g2)("el-button"),b=(0,a.g2)("el-dialog"),_=(0,a.g2)("el-row");return(0,a.uX)(),(0,a.Wv)(_,{gutter:40},{default:(0,a.k6)((()=>[(0,a.bF)(b,{modelValue:s.dialogState,"onUpdate:modelValue":l[5]||(l[5]=e=>s.dialogState=e),title:"工时填报",width:"1200","before-close":e.handleClose},{footer:(0,a.k6)((()=>[(0,a.Lk)("div",o,[(0,a.bF)(g,{modelValue:s.dialogState,"onUpdate:modelValue":l[2]||(l[2]=e=>s.dialogState=e),onClick:l[3]||(l[3]=e=>s.dialogState=!1),loading:s.loading},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("取消")]))),_:1},8,["modelValue","loading"]),(0,a.bF)(g,{modelValue:s.dialogState,"onUpdate:modelValue":l[4]||(l[4]=e=>s.dialogState=e),type:"primary",onClick:r.onSubmit,loading:s.loading},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("提交")]))),_:1},8,["modelValue","onClick","loading"])])])),default:(0,a.k6)((()=>[(0,a.bF)(f,{shadow:"never"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{ref:"formRef",model:s.recordDay,"label-width":"100px"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{label:"当日填报记录",prop:"list",disabled:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{ref:"rulesList",modelValue:s.recordDay,"onUpdate:modelValue":l[0]||(l[0]=e=>s.recordDay=e),addTemplate:s.addTemplate,disabled:!0},{default:(0,a.k6)((()=>[(0,a.bF)(u,{prop:"project_number_",label:"项目",width:"180"},{default:(0,a.k6)((e=>[(0,a.bF)(n,{modelValue:e.row.project_number_,"onUpdate:modelValue":l=>e.row.project_number_=l,placeholder:"请选择",disabled:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.projectInfo,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.project_number_,label:e.project_number_+" - "+e.project_name_,value:e.project_number_},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"project_type_",label:"项目阶段","min-width":"120"},{default:(0,a.k6)((e=>[(0,a.bF)(n,{modelValue:e.row.project_type_,"onUpdate:modelValue":l=>e.row.project_type_=l,disabled:"",placeholder:"请选择"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.projectType,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"job_type_",label:"工作类型","min-width":"120"},{default:(0,a.k6)((e=>[(0,a.bF)(n,{modelValue:e.row.job_type_,"onUpdate:modelValue":l=>e.row.job_type_=l,disabled:"",placeholder:"请选择阶段"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.jobType,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"hours_",label:"工时","min-width":"100"},{default:(0,a.k6)((e=>[(0,a.bF)(c,{modelValue:e.row.hours_,"onUpdate:modelValue":l=>e.row.hours_=l,placeholder:"请输入内容",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"record_date_",label:"时间","min-width":"100"},{default:(0,a.k6)((e=>[(0,a.bF)(c,{modelValue:e.row.record_date_,"onUpdate:modelValue":l=>e.row.record_date_=l,placeholder:"请输入工时",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"remark_",label:"备注","min-width":"180"},{default:(0,a.k6)((e=>[(0,a.bF)(c,{modelValue:e.row.remark_,"onUpdate:modelValue":l=>e.row.remark_=l,type:"textarea",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["modelValue","addTemplate"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,a.bF)(f,{shadow:"never",title:"新增填报"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{ref:"formRef",model:s.form,"label-width":"100px"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{label:"新增填报",prop:"list"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{ref:"rulesList",modelValue:s.form.list,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.list=e),addTemplate:s.addTemplate},{default:(0,a.k6)((()=>[(0,a.bF)(u,{prop:"project_number_",label:"项目",width:"180"},{default:(0,a.k6)((e=>[(0,a.bF)(n,{modelValue:e.row.project_number_,"onUpdate:modelValue":l=>e.row.project_number_=l,placeholder:"请选择项目",filterable:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.projectInfo,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.project_number_,label:e.project_number_+" - "+e.project_name_,value:e.project_number_},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"project_type_",label:"项目阶段","min-width":"120"},{default:(0,a.k6)((e=>[(0,a.bF)(n,{modelValue:e.row.project_type_,"onUpdate:modelValue":l=>e.row.project_type_=l,placeholder:"请选择阶段",filterable:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.projectType,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"job_type_",label:"工作类型","min-width":"120"},{default:(0,a.k6)((e=>[(0,a.bF)(n,{modelValue:e.row.job_type_,"onUpdate:modelValue":l=>e.row.job_type_=l,placeholder:"请选择类型",filterable:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.jobType,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"hours_",label:"工时","min-width":"100"},{default:(0,a.k6)((e=>[(0,a.bF)(c,{modelValue:e.row.hours_,"onUpdate:modelValue":l=>e.row.hours_=l,placeholder:"请输入工时"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"record_date_",label:"时间","min-width":"100"},{default:(0,a.k6)((e=>[(0,a.bF)(c,{modelValue:e.row.record_date_,"onUpdate:modelValue":l=>e.row.record_date_=l,placeholder:"请选择时间",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(u,{prop:"remark_",label:"备注","min-width":"180"},{default:(0,a.k6)((e=>[(0,a.bF)(c,{modelValue:e.row.remark_,"onUpdate:modelValue":l=>e.row.remark_=l,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["modelValue","addTemplate"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue","before-close"])])),_:1})}t(64660),t(23467),t(89593),t(1540);const s=(0,a.$V)((()=>Promise.all([t.e(8774),t.e(6158),t.e(26)]).then(t.bind(t,50026))));var r={props:{receiveParams:Object},data(){return{dialogState:!1,projectInfo:[],userInfo:{},addTemplate:{user_id_:"",user_name_:"",project_number_:"",project_type_:"",job_type_:"",hours_:"",record_date_:""},loading:!0,form:{list:[{user_id_:"",user_name_:"",project_number_:"",project_type_:"",job_type_:"",hours_:"",record_date_:""}]},recordDay:[],jobType:[{label:"基本设计",value:1},{label:"详细设计",value:2},{label:"研究设计",value:3},{label:"三维设计",value:4},{label:"设备订货",value:5},{label:"更改设计",value:6},{label:"技术支持",value:7},{label:"管理",value:8},{label:"其他",value:9}],projectType:[{label:"研发项目",value:1},{label:"工程项目",value:2},{label:"研发+工程",value:3},{label:"维保项目",value:4},{label:"市场响应",value:5},{label:"其他",value:6}]}},components:{scEditor:s},watch:{dialogState(e){},receiveParams(e){e&&(this.getUserDayManhour(),this.form.list.forEach((e=>{e.record_date_=this.receiveParams.day,e.user_id_=this.userInfo.id_,e.user_name_=this.userInfo.fullname_})))},form:{handler(e){e.list.forEach((e=>{e.record_date_=this.receiveParams.day,e.user_id_=this.userInfo.id_,e.user_name_=this.userInfo.fullname_}))},deep:!0}},async mounted(){if(this.userInfo=this.$TOOL.data.get("USER_INFO"),this.userInfo){this.form.user_name_=this.userInfo.fullname_;try{const e=await this.$dmsApi.project.readByUser.post();this.projectInfo=e}catch(e){console.error(e)}}},methods:{async getUserDayManhour(){const e={user_id_:this.userInfo.id_,record_date_:this.receiveParams.day};this.loading=!0;try{this.recordDay=await this.$dmsApi.manHours.inquireList.post(e)}catch(l){console.error(l)}finally{this.loading=!1}},open(){this.dialogState=!0},resetForm(){this.form.list.length=0},async onSubmit(){this.loading=!0;try{const e=this.form.list.every((e=>{const l=["user_id_","user_name_","project_number_","job_type_","hours_","record_date_"];return l.every((l=>e[l]))}));if(!e)return void this.$message.error("请确保所有信息均已填写");const l=this.form.list.reduce(((e,l)=>e+Number(l.hours_||0)),0);if(l+this.receiveParams.dayHours>24)return void this.$message.error("累积工时不能超过 24 小时");await this.$dmsApi.manHours.create.post(this.form.list),this.$message.success("提交成功"),this.form.list=[],this.dialogState=!1,this.resetForm(),this.$emit("invoke-parent-method")}catch(e){this.$message.error("提交失败，请稍后重试")}finally{this.loading=!1}}}},d=t(51456);const n=(0,d.A)(r,[["render",i]]);var u=n},55899:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return u}});var a=t(51464),o=t(45883);function i(e,l,t,i,s,r){const d=(0,a.g2)("el-input"),n=(0,a.g2)("el-form-item"),u=(0,a.g2)("el-date-picker"),c=(0,a.g2)("el-option"),p=(0,a.g2)("el-select"),m=(0,a.g2)("sc-editor"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-form"),g=(0,a.g2)("el-dialog"),b=(0,a.g2)("el-row"),_=(0,a.gN)("loading");return(0,a.uX)(),(0,a.Wv)(b,{gutter:40},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:s.dialogDwg,"onUpdate:modelValue":l[16]||(l[16]=e=>s.dialogDwg=e),title:"工时填报",width:"1200","before-close":e.handleClose},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(f,{ref:"form",rules:s.rules,model:s.manhoursFrom,"label-width":"auto",style:{"max-width":"1200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{label:"图号"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.manhoursFrom.drawing_number_,"onUpdate:modelValue":l[0]||(l[0]=e=>s.manhoursFrom.drawing_number_=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"图名"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.manhoursFrom.drawing_name_,"onUpdate:modelValue":l[1]||(l[1]=e=>s.manhoursFrom.drawing_name_=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"填报人姓名",prop:"user_name_"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.manhoursFrom.user_name_,"onUpdate:modelValue":l[2]||(l[2]=e=>s.manhoursFrom.user_name_=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"填报日期",prop:"record_date_"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:s.manhoursFrom.record_date_,"onUpdate:modelValue":l[3]||(l[3]=e=>s.manhoursFrom.record_date_=e),type:"date",placeholder:"Pick a date",disabled:"审核"==t.state||!(s.manhoursFrom.user_id_==e.$TOOL.data.get("USER_INFO").id_),"default-value":s.defaultDate,"disabled-date":r.disableFutureDates},null,8,["modelValue","disabled","default-value","disabled-date"])])),_:1}),(0,a.bF)(n,{label:"填报工时",prop:"hours_"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.manhoursFrom.hours_,"onUpdate:modelValue":l[4]||(l[4]=e=>s.manhoursFrom.hours_=e),type:"number",placeholder:"请填写工时（不能超过16）",min:0,max:16,disabled:"审核"==t.state||!(s.manhoursFrom.user_id_==e.$TOOL.data.get("USER_INFO").id_),onInput:r.handleInput},null,8,["modelValue","disabled","onInput"])])),_:1}),(0,a.bF)(n,{label:"审批人",prop:"verifier_name_"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.manhoursFrom.verifier_name_,"onUpdate:modelValue":l[5]||(l[5]=e=>s.manhoursFrom.verifier_name_=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"审批状态"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:s.manhoursFrom.ratify_type_,"onUpdate:modelValue":l[6]||(l[6]=e=>s.manhoursFrom.ratify_type_=e),disabled:"",placeholder:"请选择审批状态"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{label:"待审批",value:1,style:{color:"gray"}},null,512),[[o.aG,!1]]),(0,a.bF)(c,{label:"通过",value:2,style:{color:"green"}}),(0,a.bF)(c,{label:"拒绝",value:3,style:{color:"red"}})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"审批说明"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:s.manhoursFrom.submit_message_,"onUpdate:modelValue":l[7]||(l[7]=e=>s.manhoursFrom.submit_message_=e),placeholder:"请输入",height:300},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)((()=>[s.manhoursFrom.user_id_!=e.$TOOL.data.get("USER_INFO").id_||"ratify_type_"in s.manhoursFrom?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(h,{key:0,modelValue:s.dialogDwg,"onUpdate:modelValue":l[8]||(l[8]=e=>s.dialogDwg=e),type:"primary",onClick:l[9]||(l[9]=e=>r.onSubmit(1))},{default:(0,a.k6)((()=>l[17]||(l[17]=[(0,a.eW)("提交申请")]))),_:1},8,["modelValue"])),s.manhoursFrom.verifier_id_==e.$TOOL.data.get("USER_INFO").id_&&"审核"==t.state&&1==s.manhoursFrom.ratify_type_?((0,a.uX)(),(0,a.Wv)(h,{key:1,modelValue:s.dialogDwg,"onUpdate:modelValue":l[10]||(l[10]=e=>s.dialogDwg=e),type:"danger",onClick:l[11]||(l[11]=e=>r.onSubmit(3))},{default:(0,a.k6)((()=>l[18]||(l[18]=[(0,a.eW)("拒绝")]))),_:1},8,["modelValue"])):(0,a.Q3)("",!0),s.manhoursFrom.verifier_id_==e.$TOOL.data.get("USER_INFO").id_&&"审核"==t.state&&1==s.manhoursFrom.ratify_type_?((0,a.uX)(),(0,a.Wv)(h,{key:2,modelValue:s.dialogDwg,"onUpdate:modelValue":l[12]||(l[12]=e=>s.dialogDwg=e),type:"success",onClick:l[13]||(l[13]=e=>r.onSubmit(2))},{default:(0,a.k6)((()=>l[19]||(l[19]=[(0,a.eW)("通过")]))),_:1},8,["modelValue"])):(0,a.Q3)("",!0),(0,a.bF)(h,{modelValue:s.dialogDwg,"onUpdate:modelValue":l[14]||(l[14]=e=>s.dialogDwg=e),onClick:l[15]||(l[15]=e=>s.dialogDwg=!1)},{default:(0,a.k6)((()=>l[20]||(l[20]=[(0,a.eW)("取消")]))),_:1},8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])),[[_,s.loading]])])),_:1},8,["modelValue","before-close"])])),_:1})}t(64660),t(26005);const s=(0,a.$V)((()=>Promise.all([t.e(8774),t.e(6158),t.e(26)]).then(t.bind(t,50026))));var r={props:{state:String},data(){return{dialogDwg:!1,defaultDate:new Date((new Date).setSeconds(0,0)),manhoursFrom:{user_id_:"",user_name_:"",record_date_:null,ratify_user_id_:"",ratify_user_name_:""},rules:{user_name_:[{required:!0,message:"填报人不能为空",trigger:"blur"}],record_date_:[{required:!0,message:"请选择本次提交工时日期",trigger:"blur"}],hours_:[{required:!0,message:"请填报期间产生的工时",trigger:"blur"}],verifier_name_:[{required:!0,message:"审批人不能为空",trigger:"blur"}]},projectUserInfos:[],loading:!1}},components:{scEditor:s},mounted(){const e=this.$TOOL.data.get("USER_INFO");e?(this.manhoursFrom.user_id_=e.id_,this.manhoursFrom.user_name_=e.fullname_):console.error("USER_INFO is undefined")},methods:{disableFutureDates(e){return e>new Date},open(){this.dialogDwg=!0},async onSubmit(e){const l=await new Promise((e=>{this.$refs.form.validate((l=>{e(l)}))}));if(l){this.loading=!0;try{this.manhoursFrom.ratify_type_=e,this.state,await this.$dmsApi.manHours.create.post(this.manhoursFrom)}catch(t){console.log(t)}finally{this.loading=!1,this.dialogDwg=!1}}else this.formLoading=!1},handleInput(e){e<1?this.manhoursFrom.hours_=1:e>=16&&(this.manhoursFrom.hours_=16)},async handleNodeClick(e){const l={project_id_:e};try{const e=await this.$dmsApi.projectUsershiproute.readId.post(l);if(!e)return console.log("User not found"),null;this.projectUserInfos=await this.$apiIAM.user.usersByUserIds.post(e)}catch(t){console.error("Error fetching user list:",t)}},verifierChange(e){const l=this.projectUserInfos.find((l=>l.fullname_===e));l?this.manhoursFrom.verifier_id_=l.id_:console.log("未找到对应的项目经理")},setData(e){"审核"==this.state?this.manhoursFrom={...e}:(e.uuid_&&(e.drawing_uuid_=e.uuid_),this.manhoursFrom={...this.manhoursFrom,...e})}}},d=t(51456);const n=(0,d.A)(r,[["render",i]]);var u=n},88706:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return u}});var a=t(51464),o=t(51681);const i={class:"el-tree-node__label"};function s(e,l,t,s,r,d){const n=(0,a.g2)("el-tree"),u=(0,a.g2)("el-main"),c=(0,a.g2)("el-container"),p=(0,a.g2)("el-aside"),m=(0,a.g2)("el-transfer"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(f,{title:e.用户管理,modelValue:r.visible,"onUpdate:modelValue":l[4]||(l[4]=e=>r.visible=e),"destroy-on-close":"",onClosed:l[5]||(l[5]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:l[1]||(l[1]=e=>r.visible=!1),loading:r.loading},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("取 消")]))),_:1},8,["loading"]),"show"!=r.mode?((0,a.uX)(),(0,a.Wv)(h,{key:0,type:"primary",loading:r.loading,onClick:l[2]||(l[2]=e=>d.updeteProUser())},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])):(0,a.Q3)("",!0),"show"!=r.mode?((0,a.uX)(),(0,a.Wv)(h,{key:1,type:"primary",loading:r.loading,onClick:l[3]||(l[3]=e=>d.updeteProUser())},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("确 认")]))),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.bF)(n,{class:"menu",data:r.group,onNodeClick:d.groupClick},{default:(0,a.k6)((({data:e})=>[(0,a.Lk)("span",i,(0,o.v_)(e.name_),1)])),_:1},8,["data","onNodeClick"])])),_:1})])),_:1})])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"nopadding"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),data:d.filteredUserData,props:{key:"id_",label:"fullname_"},titles:["用户组","项目组"]},null,8,["modelValue","data"])])),_:1})])),_:1})])),_:1})])),_:1},8,["title","modelValue"])}t(20038),t(96816),t(4825),t(64720),t(68255),t(67316),t(43598),t(64660),t(40772),t(26005),t(70426),t(9026);var r={emits:["success","closed"],data(){return{mode:"add",data:[],value:[],visible:!1,group:[],projectId:"",userData:[],groupUser:[],loading:!1}},computed:{filteredUserData(){if(0===this.groupUser.length)return this.userData;const e=new Set(this.groupUser.map((e=>e.id_))),l=this.userData.filter((e=>this.value.includes(e.id_))),t=[...this.userData.filter((l=>e.has(l.id_))),...l],a=Array.from(new Set(t.map((e=>e.id_)))).map((e=>t.find((l=>l.id_===e))));return a}},methods:{async updeteProUser(){this.loading=!0;const e={project_id_:this.projectId,users:this.value};if(0==this.value)return this.$message.warning("请至少选择一个用户"),void(this.loading=!1);try{await this.$dmsApi.projectUsershiproute.update.post(e)}catch(l){console.error("提交失败:",l)}finally{this.$emit("success"),this.loading=!1,this.visible=!1}},async groupClick(e){this.asd(e.id_)},async asd(e){const l={group_id_:e};this.groupUser=await this.$apiIAM.user.usersByGroup.post(l)},async getUser(){this.userData=await this.$apiIAM.user.fromList.get()},open(e="add"){return this.mode=e,this.visible=!0,this},open1(){this.visible=!0},async getGroup(){this.loading=!0;try{const e=await this.$apiIAM.group.fromList.get();this.group=e}catch(e){console.error}finally{this.loading=!1}},async setData(e,l){if(this.projectId=l,!Array.isArray(e))return void console.error("setData 参数必须是数组");0===this.userData.length&&await this.getUser();const t=e.filter((e=>this.userData.some((l=>l.id_===e.id_)))).map((e=>e.id_));this.value=[...new Set([...this.value,...t])],console.log("Updated value:",this.value)}},mounted(){this.getGroup(),this.getUser()}},d=t(51456);const n=(0,d.A)(r,[["render",s]]);var u=n},86653:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return d}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.Wv)(r,{shadow:"hover",header:"关于项目",class:"item-background"},{default:(0,a.k6)((()=>l[0]||(l[0]=[(0,a.Lk)("p",null,"企业集成办公自动化平台，采用微服务框架，VUE3 + NODE 技术栈。",-1)]))),_:1})}var i={title:"关于项目",icon:"el-icon-setting",description:"点个星星支持一下",data(){return{}}},s=t(51456);const r=(0,s.A)(i,[["render",o],["__scopeId","data-v-abdb1c46"]]);var d=r},60088:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return c}});var a=t(51464),o=t(51681);const i=["onClick"];function s(e,l,t,s,r,d){const n=(0,a.g2)("el-tab-pane"),u=(0,a.g2)("el-tabs"),c=(0,a.g2)("el-header"),p=(0,a.g2)("el-table-column"),m=(0,a.g2)("el-button"),h=(0,a.g2)("scTable"),f=(0,a.g2)("el-card"),g=(0,a.g2)("dialog2"),b=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{shadow:"hover",header:"审批中心"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"header-tabs"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{type:"card",modelValue:r.projectTypeValue,"onUpdate:modelValue":l[0]||(l[0]=e=>r.projectTypeValue=e),onTabChange:d.handleClickType},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.projectTypes,(e=>((0,a.uX)(),(0,a.Wv)(n,{key:e.value,label:e.label,name:e.value,disabled:""},null,8,["label","name"])))),128))])),_:1},8,["modelValue","onTabChange"])])),_:1}),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(h,{ref:"tableData",data:r.tableData,"row-key":"uuid_",stripe:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{label:"审批单号",prop:"uuid_",width:"100","show-overflow-tooltip":""},{default:(0,a.k6)((e=>[(0,a.Lk)("div",{class:"clickable",onClick:l=>d.handleClick(e.row)},(0,o.v_)(e.row.uuid_),9,i)])),_:1}),(0,a.bF)(p,{label:"审批状态",prop:"ratify_type_",width:"100"},{default:(0,a.k6)((e=>[(0,a.bF)(m,{text:"",type:"primary",size:"small",style:(0,o.Tr)({color:1===e.row.ratify_type_?"#ff8c00":2===e.row.ratify_type_?"#409eff":"#909399"})},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(1===e.row.ratify_type_?"未审批":2===e.row.ratify_type_?"已通过":"未通过"),1)])),_:2},1032,["style"])])),_:1}),(0,a.bF)(p,{label:"申请人",prop:"user_name_",width:"100"}),(0,a.bF)(p,{label:"审批人",prop:"verifier_name_",width:"100"}),(0,a.bF)(p,{label:"工时日期",prop:"record_date_",width:"100"}),(0,a.bF)(p,{label:"工时",prop:"hours_",width:"100"})])),_:1},8,["data"])),[[b,r.loading]])])),_:1})])),_:1}),(0,a.bF)(g,{ref:"manhoursDialog",menu:r.dialogData,state:r.state},null,8,["menu","state"])],64)}var r=t(55899),d={components:{dialog2:r["default"]},data(){return{dialogData:[],state:"审核",tableData:[],projectTypeValue:1,projectTypes:[{label:"待处理",value:1},{label:"已发起",value:2},{label:"我收到的",value:3}],userInfo:{},submitData:{},loading:!1}},mounted(){this.userInfo=this.$TOOL.data.get("USER_INFO"),this.submitData={verifier_id_:this.userInfo.id_,ratify_type_:1},setTimeout((()=>{this.getManhours()}),0)},methods:{openHoursDialog(e){this.dialogData=e,this.$refs.manhoursDialog.setData(e),this.$refs.manhoursDialog.open()},handleClickType(e){1==e?this.submitData={verifier_id_:this.userInfo.id_,ratify_type_:1}:2==e?this.submitData={user_id_:this.userInfo.id_}:3==e&&(this.submitData={verifier_id_:this.userInfo.id_}),this.getManhours()},handleClick(e){this.dialogData=e,this.$refs.manhoursDialog.setData(e),this.$refs.manhoursDialog.open()},async getManhours(){this.loading=!0;try{this.tableData=await this.$dmsApi.manHours.readById.post(this.submitData)}catch(e){console.log(e,"error")}finally{this.loading=!1}}}},n=t(51456);const u=(0,n.A)(d,[["render",s],["__scopeId","data-v-0d8617a4"]]);var c=u},15775:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return V}});var a=t(51464),o=t(51681);const i={class:"file-list"},s={class:"file-card"},r={class:"file-actions"},d={class:"file-card"},n={class:"file-actions"},u={class:"file-card"},c={class:"file-actions"},p={class:"file-card"},m={class:"file-actions"},h={class:"file-list"},f={class:"file-card"},g={class:"file-actions"},b={class:"file-card"},_={class:"file-actions"};function k(e,l,t,k,v,y){const F=(0,a.g2)("el-card"),w=(0,a.g2)("el-tab-pane"),V=(0,a.g2)("el-tabs"),C=(0,a.g2)("el-header"),L=(0,a.g2)("el-link"),x=(0,a.g2)("el-table-column"),W=(0,a.g2)("el-progress"),U=(0,a.g2)("el-button"),$=(0,a.g2)("el-button-group"),j=(0,a.g2)("el-table"),I=(0,a.g2)("scEcharts"),D=(0,a.g2)("el-caed");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(F,{shadow:"hover",header:"欢迎"},{default:(0,a.k6)((()=>l[1]||(l[1]=[(0,a.Lk)("div",{class:"welcome"},[(0,a.Lk)("div",{class:"logo"},[(0,a.Lk)("img",{src:"img/logo.png"}),(0,a.Lk)("h2",null,"欢迎进入UPRO系统")])],-1)]))),_:1}),(0,a.bF)(F,{header:"图纸任务"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{class:"header-tabs"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{type:"card",modelValue:e.groupId,"onUpdate:modelValue":l[0]||(l[0]=l=>e.groupId=l),onTabChange:e.tabChange},{default:(0,a.k6)((()=>[(0,a.bF)(w,{label:"所有",name:"0"}),(0,a.bF)(w,{label:"未完成",name:"1"}),(0,a.bF)(w,{label:"已完成",name:"4"}),(0,a.bF)(w,{label:"已关闭",name:"3"}),(0,a.bF)(w,{label:"待审核",name:"5"})])),_:1},8,["modelValue","onTabChange"])])),_:1}),(0,a.bF)(F,{shadow:"never"},{default:(0,a.k6)((()=>[(0,a.bF)(j,{ref:"table",data:v.tableData,"highlight-current-row":"",onRowContextmenu:e.rowContextmenu},{default:(0,a.k6)((()=>[(0,a.bF)(x,{type:"expand"},{default:(0,a.k6)((e=>[(0,a.Lk)("div",i,[(0,a.bF)(L,{style:{"text-align":"center","line-height":"50px",margin:"0 auto",display:"block"},type:"success"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.row.id+" - "+e.row.state5),1)])),_:2},1024),(0,a.Lk)("div",s,[l[5]||(l[5]=(0,a.Lk)("img",{src:"https://via.placeholder.com/24x24?text=PDF",alt:"file-icon",class:"file-icon"},null,-1)),l[6]||(l[6]=(0,a.Lk)("div",{class:"file-info"},[(0,a.Lk)("div",{class:"file-name"},"Document.pdf"),(0,a.Lk)("div",{class:"file-type"},"pdf")],-1)),(0,a.Lk)("div",r,[(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("查看")]))),_:1}),(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("下载")]))),_:1}),(0,a.bF)(L,{type:"danger"},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("删除")]))),_:1})])]),(0,a.Lk)("div",d,[l[10]||(l[10]=(0,a.Lk)("img",{src:"https://via.placeholder.com/24x24?text=CAD",alt:"file-icon",class:"file-icon"},null,-1)),l[11]||(l[11]=(0,a.Lk)("div",{class:"file-info"},[(0,a.Lk)("div",{class:"file-name"},"Drawing.dwg"),(0,a.Lk)("div",{class:"file-type"},"cad")],-1)),(0,a.Lk)("div",n,[(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("查看")]))),_:1}),(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("下载")]))),_:1}),(0,a.bF)(L,{type:"danger"},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("删除")]))),_:1})])]),(0,a.Lk)("div",u,[l[15]||(l[15]=(0,a.Lk)("img",{src:"https://via.placeholder.com/24x24?text=Word",alt:"file-icon",class:"file-icon"},null,-1)),l[16]||(l[16]=(0,a.Lk)("div",{class:"file-info"},[(0,a.Lk)("div",{class:"file-name"},"Report.docx"),(0,a.Lk)("div",{class:"file-type"},"word")],-1)),(0,a.Lk)("div",c,[(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("查看")]))),_:1}),(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[13]||(l[13]=[(0,a.eW)("下载")]))),_:1}),(0,a.bF)(L,{type:"danger"},{default:(0,a.k6)((()=>l[14]||(l[14]=[(0,a.eW)("删除")]))),_:1})])]),(0,a.Lk)("div",p,[l[20]||(l[20]=(0,a.Lk)("img",{src:"https://via.placeholder.com/24x24?text=Excel",alt:"file-icon",class:"file-icon"},null,-1)),l[21]||(l[21]=(0,a.Lk)("div",{class:"file-info"},[(0,a.Lk)("div",{class:"file-name"},"Spreadsheet.xlsx"),(0,a.Lk)("div",{class:"file-type"},"excel")],-1)),(0,a.Lk)("div",m,[(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[17]||(l[17]=[(0,a.eW)("查看")]))),_:1}),(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[18]||(l[18]=[(0,a.eW)("下载")]))),_:1}),(0,a.bF)(L,{type:"danger"},{default:(0,a.k6)((()=>l[19]||(l[19]=[(0,a.eW)("删除")]))),_:1})])])]),(0,a.Lk)("div",h,[(0,a.bF)(L,{style:{"text-align":"center","line-height":"50px",margin:"0 auto",display:"block"},type:"warning"},{default:(0,a.k6)((()=>l[22]||(l[22]=[(0,a.eW)(" 历史版本 - V0 ")]))),_:1}),(0,a.Lk)("div",f,[l[25]||(l[25]=(0,a.Lk)("img",{src:"https://via.placeholder.com/24x24?text=PDF",alt:"file-icon",class:"file-icon"},null,-1)),l[26]||(l[26]=(0,a.Lk)("div",{class:"file-info"},[(0,a.Lk)("div",{class:"file-name"},"Document.pdf"),(0,a.Lk)("div",{class:"file-type"},"pdf")],-1)),(0,a.Lk)("div",g,[(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[23]||(l[23]=[(0,a.eW)("查看")]))),_:1}),(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[24]||(l[24]=[(0,a.eW)("下载")]))),_:1})])]),(0,a.Lk)("div",b,[l[29]||(l[29]=(0,a.Lk)("img",{src:"https://via.placeholder.com/24x24?text=CAD",alt:"file-icon",class:"file-icon"},null,-1)),l[30]||(l[30]=(0,a.Lk)("div",{class:"file-info"},[(0,a.Lk)("div",{class:"file-name"},"Drawing.dwg"),(0,a.Lk)("div",{class:"file-type"},"cad")],-1)),(0,a.Lk)("div",_,[(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[27]||(l[27]=[(0,a.eW)("查看")]))),_:1}),(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>l[28]||(l[28]=[(0,a.eW)("下载")]))),_:1})])])])])),_:1}),(0,a.bF)(x,{prop:"id",label:"图号",width:"100"}),(0,a.bF)(x,{prop:"state",label:"校验",width:"60"}),(0,a.bF)(x,{prop:"state2",label:"交付时间",width:"100"}),(0,a.bF)(x,{prop:"state3",label:"状态",width:"70"},{default:(0,a.k6)((e=>[(0,a.bF)(L,{class:"mx-1",type:0==e.row.state3?"info":1==e.row.state3?"success":2==e.row.state3?"primary":3==e.row.state3?"danger":"default"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(0==e.row.state3?"未开始":1==e.row.state3?"执行中":2==e.row.state3?"已结束":3==e.row.state3?"已超期":"未知"),1)])),_:2},1032,["type"])])),_:1}),(0,a.bF)(x,{prop:"state7",label:"进度"},{default:(0,a.k6)((e=>[(0,a.bF)(W,{percentage:e.row.state7,"stroke-width":10},null,8,["percentage"])])),_:1}),(0,a.bF)(x,{prop:"state6",label:"操作"},{default:(0,a.k6)((()=>[(0,a.bF)($,null,{default:(0,a.k6)((()=>[(0,a.bF)(U,{text:"",type:"primary",size:"small"},{default:(0,a.k6)((()=>l[31]||(l[31]=[(0,a.eW)("上传")]))),_:1}),(0,a.bF)(U,{text:"",type:"primary",size:"small"},{default:(0,a.k6)((()=>l[32]||(l[32]=[(0,a.eW)("提交")]))),_:1}),(0,a.bF)(U,{text:"",type:"primary",size:"small"},{default:(0,a.k6)((()=>l[33]||(l[33]=[(0,a.eW)("审核")]))),_:1}),(0,a.bF)(U,{text:"",type:"primary",size:"small"},{default:(0,a.k6)((()=>l[34]||(l[34]=[(0,a.eW)("下载")]))),_:1})])),_:1})])),_:1})])),_:1},8,["data","onRowContextmenu"])])),_:1})])),_:1}),(0,a.bF)(D,{header:"项目状态"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{class:"header-tabs"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{shadow:"never"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{height:"300px",option:v.option},null,8,["option"])])),_:1})])),_:1})])),_:1})],64)}var v=t(83547),y={components:{scEcharts:v.A},title:"欢迎",icon:"el-icon-present",description:"项目特色以及文档链接",data(){return{option:{title:{text:"图纸完成数量",subtext:"基础柱状图"},grid:{top:"80px"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun","Jul"]},yAxis:{type:"value"},series:[{data:[10,20,30,40,50,60,70],type:"bar",barWidth:"15px"}]},tableData:[{id:"PE01PID_001",name:"P&I Diagram Identification System系统图仪表图例符号",date:"赵琦",state:"朱文广",state1:"2021-10-10",state2:"2021-10-18",state3:0,state4:"2024-04-15",state5:"V1",state7:"60"},{id:"PE01PID_001",name:"P&I Diagram Identification System系统图仪表图例符号",date:"赵琦",state:"朱文广",state1:"2022-09-11",state2:"2023-04-23",state3:1,state4:"2024-07-25",state5:"V2",state7:"70"},{id:"PE01PID_001",name:"P&I Diagram Identification System系统图仪表图例符号",date:"赵琦",state:"朱文广",state1:"2023-05-12",state2:"2021-07-18",state3:2,state4:"2024-08-24",state5:"V3",state7:"30"},{id:"PE01PID_001",name:"P&I Diagram Identification System系统图仪表图例符号",date:"赵琦",state:"朱文广",state1:"2023-05-12",state2:"2021-07-18",state3:3,state4:"2024-08-24",state5:"V4",state7:"40"}]}},methods:{godoc(){window.open("https://python-abc.xyz/scui-doc/")}}},F=t(51456);const w=(0,F.A)(y,[["render",k],["__scopeId","data-v-7db7651e"]]);var V=w},33035:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return n}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("scEcharts"),d=(0,a.g2)("el-card"),n=(0,a.gN)("loading");return(0,a.bo)(((0,a.uX)(),(0,a.Wv)(d,{shadow:"hover",header:"实时收入"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{ref:"c1",height:"300px",option:i.option},null,8,["option"])])),_:1})),[[n,i.loading]])}t(78982);var i=t(83547),s={title:"实时收入",icon:"el-icon-data-line",description:"Echarts组件演示",components:{scEcharts:i.A},data(){return{loading:!0,option:{}}},created(){var e=this;setTimeout((function(){e.loading=!1}),500);var l={tooltip:{trigger:"axis"},xAxis:{boundaryGap:!1,type:"category",data:function(){var e=new Date,l=[],t=30;while(t--)l.unshift(e.toLocaleTimeString().replace(/^\D*/,"")),e=new Date(e-2e3);return l}()},yAxis:[{type:"value",name:"价格",splitLine:{show:!1}}],series:[{name:"收入",type:"line",symbol:"none",lineStyle:{width:1,color:"#409EFF"},areaStyle:{opacity:.1,color:"#79bbff"},data:function(){var e=[],l=30;while(l--)e.push(Math.round(0*Math.random()));return e}()}]};this.option=l},mounted(){var e=this;setInterval((function(){var l=e.option;l.series[0].data.shift(),l.series[0].data.push(Math.round(100*Math.random())),l.xAxis.data.shift(),l.xAxis.data.push((new Date).toLocaleTimeString().replace(/^\D*/,""))}),2100)}},r=t(51456);const d=(0,r.A)(s,[["render",o]]);var n=d},13051:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return h}});var a=t(51464),o=t(51681);const i={class:"app-container"},s=["onClick"],r={style:{"font-size":"20px"}};function d(e,l,t,d,n,u){const c=(0,a.g2)("Warning"),p=(0,a.g2)("el-icon"),m=(0,a.g2)("el-space"),h=(0,a.g2)("el-calendar"),f=(0,a.g2)("el-card"),g=(0,a.g2)("dialog2");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{shadow:"hover",header:"我的工时"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[(0,a.bF)(h,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e)},{dateCell:(0,a.k6)((({data:e})=>[(0,a.Lk)("div",{style:(0,o.Tr)({backgroundColor:u.getTextColor(e.day).color,color:u.getTextColor(e.day).color2,padding:0}),onClick:l=>u.handleDateClick(e.day),class:"custom-date-cell"},[(0,a.bF)(m,{direction:"vertical"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",r,(0,o.v_)(e.day.split("-")[2]),1),(0,a.Lk)("span",null,[(0,a.eW)((0,o.v_)("工时：")+(0,o.v_)(u.getTextColor(e.day).hours||0)+" ",1),u.getTextColor(e.day).hours<9&&("工作日"==u.getDetailedDateInfo(e.day)||"调休"===u.getDetailedDateInfo(e.day))?((0,a.uX)(),(0,a.Wv)(p,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(c,{color:"#E6A23C",type:"warning"})])),_:1})):(0,a.Q3)("",!0)]),(0,a.Lk)("span",null,(0,o.v_)(u.getDetailedDateInfo(e.day)),1)])),_:2},1024),l[1]||(l[1]=(0,a.Lk)("br",null,null,-1))],12,s)])),_:1},8,["modelValue"])])])),_:1}),(0,a.bF)(g,{ref:"manhoursDialog",receiveParams:n.inputParams,onInvokeParentMethod:u.getaData},null,8,["receiveParams","onInvokeParentMethod"])],64)}t(64660),t(40772),t(1540);var n=t(89456),u=t(74738),c={data(){return{value:new Date,specialDates:[],inputParams:{day:String,dayHours:null}}},components:{dialog2:n["default"]},watch:{value(){this.getaData()}},mounted(){this.getaData()},methods:{getDetailedDateInfo(e){return(0,u.nS)(e)},async getaData(){try{const e=new Date(this.value),l={user_id_:this.$TOOL.data.get("USER_INFO").id_,yearMonth:`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}`};console.log(l,"submitData"),this.specialDates=await this.$dmsApi.manHours.readByUserId.post(l)}catch(e){console.log(e)}},handleDateClick(e){const l=new Date,t=l.getFullYear(),a=String(l.getMonth()+1).padStart(2,"0"),o=String(l.getDate()).padStart(2,"0"),i=`${t}-${a}-${o}`;e>i?this.$message.warning("不能选择未来的日期"):(this.value=e,this.getaData(),this.inputParams={day:e,dayHours:this.getTextColor(e).hours},this.$refs.manhoursDialog.open())},getTextColor(e){const l=this.specialDates.filter((l=>l.record_date_===e));let t=0;l.length>0&&(t=l.reduce(((e,l)=>e+l.hours_),0));const a=(0,u.nS)(e);let o,i;return t>0&&(o="#fff",i="#409EFF"),"工作日"!==a&&"调休"!==a&&(o="rgb(196, 86.4, 86.4)"),{color:i,color2:o,hours:t}}}},p=t(51456);const m=(0,p.A)(c,[["render",d],["__scopeId","data-v-549545e2"]]);var h=m},50526:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return c}});var a=t(51464),o=t(51681);const i={class:"progress"},s={class:"percentage-value"};function r(e,l,t,r,d,n){const u=(0,a.g2)("el-progress"),c=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.Wv)(c,{shadow:"hover",header:"进度环"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[(0,a.bF)(u,{type:"dashboard",percentage:85.5,width:160},{default:(0,a.k6)((({percentage:e})=>[(0,a.Lk)("div",s,(0,o.v_)(e)+"%",1),l[0]||(l[0]=(0,a.Lk)("div",{class:"percentage-label"},"当前进度",-1))])),_:1})])])),_:1})}var d={title:"进度环",icon:"el-icon-odometer",description:"进度环原子组件演示",data(){return{}}},n=t(51456);const u=(0,n.A)(d,[["render",r],["__scopeId","data-v-51cfe468"]]);var c=u},13686:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return u}});var a=t(51464),o=t(51681);const i={class:"time"};function s(e,l,t,s,r,d){const n=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.Wv)(n,{shadow:"hover",header:"时钟",class:"item-background"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[(0,a.Lk)("h2",null,(0,o.v_)(r.time),1),(0,a.Lk)("p",null,(0,o.v_)(r.day),1)])])),_:1})}var r={title:"时钟",icon:"el-icon-clock",description:"演示部件效果",data(){return{time:"",day:""}},mounted(){this.showTime(),setInterval((()=>{this.showTime()}),1e3)},methods:{showTime(){this.time=this.$TOOL.dateFormat(new Date,"hh:mm:ss"),this.day=this.$TOOL.dateFormat(new Date,"yyyy年MM月dd日")}}},d=t(51456);const n=(0,d.A)(r,[["render",s],["__scopeId","data-v-1e5a9c0b"]]);var u=n},58592:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return p}});var a=t(51464),o=t(51681);const i={style:{height:"210px","text-align":"center"}},s={style:{"margin-top":"15px"}},r={style:{"margin-top":"5px"}};function d(e,l,t,d,n,u){const c=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.Wv)(c,{shadow:"hover",header:"版本信息"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[l[0]||(l[0]=(0,a.Lk)("img",{src:"img/ver.svg",style:{height:"140px"}},null,-1)),(0,a.Lk)("h2",s,(0,o.v_)(e.$CONFIG.CORE_VER),1),(0,a.Lk)("p",r,"最新版本 "+(0,o.v_)(n.ver),1)]),l[1]||(l[1]=(0,a.Lk)("div",{style:{"margin-top":"20px"}},null,-1))])),_:1})}var n={title:"版本信息",icon:"el-icon-monitor",description:"当前项目版本信息",data(){return{ver:"loading..."}},mounted(){this.getVer()},methods:{async getVer(){const e=await this.$API.demo.ver.get();this.ver=e.data},golog(){window.open("https://github.com/shenxgan/scui/releases")},gogit(){window.open("https://github.com/shenxgan/scui")}}},u=t(51456);const c=(0,u.A)(n,[["render",d]]);var p=c},32263:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return n}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.Wv)(r,{shadow:"hover",header:""},{default:(0,a.k6)((()=>l[0]||(l[0]=[(0,a.Lk)("div",{class:"welcome"},[(0,a.Lk)("div",{class:"logo"},[(0,a.Lk)("img",{src:"img/logo.png"}),(0,a.Lk)("h2",null,"欢迎进入UPRO")])],-1)]))),_:1})}var i=t(83547),s={components:{scEcharts:i.A},title:"欢迎",icon:"el-icon-present",description:"项目特色以及文档链接",data(){return{option:{title:{text:"图纸完成数量",subtext:"基础柱状图"},grid:{top:"80px"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun","Jul"]},yAxis:{type:"value"},series:[{data:[10,20,30,40,50,60,70],type:"bar",barWidth:"15px"}]},tableData:[{id:"PE01PID_001",name:"P&I Diagram Identification System系统图仪表图例符号",date:"赵琦",state:"朱文广",state1:"2021-10-10",state2:"2021-10-18",state3:0,state4:"2024-04-15",state5:"V1",state7:"60"},{id:"PE01PID_001",name:"P&I Diagram Identification System系统图仪表图例符号",date:"赵琦",state:"朱文广",state1:"2022-09-11",state2:"2023-04-23",state3:1,state4:"2024-07-25",state5:"V2",state7:"70"},{id:"PE01PID_001",name:"P&I Diagram Identification System系统图仪表图例符号",date:"赵琦",state:"朱文广",state1:"2023-05-12",state2:"2021-07-18",state3:2,state4:"2024-08-24",state5:"V3",state7:"30"},{id:"PE01PID_001",name:"P&I Diagram Identification System系统图仪表图例符号",date:"赵琦",state:"朱文广",state1:"2023-05-12",state2:"2021-07-18",state3:3,state4:"2024-08-24",state5:"V4",state7:"40"}]}},methods:{godoc(){window.open("https://python-abc.xyz/scui-doc/")}}},r=t(51456);const d=(0,r.A)(s,[["render",o],["__scopeId","data-v-9345f754"]]);var n=d},62354:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return b}});var a=t(51464),o=t(51681);const i={class:"common-header-left"},s={class:"common-header-logo"},r=["alt"],d={class:"common-header-title"},n={class:"common-header-right"},u={class:"common-container"},c={class:"common-title"},p={class:"common-main el-card"};function m(e,l,t,m,h,f){const g=(0,a.g2)("router-link"),b=(0,a.g2)("el-header"),_=(0,a.g2)("el-main"),k=(0,a.g2)("el-container");return(0,a.uX)(),(0,a.Wv)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{height:"50px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[(0,a.Lk)("div",s,[(0,a.Lk)("img",{alt:e.$CONFIG.APP_NAME,src:"img/logo.png"},null,8,r),(0,a.Lk)("label",null,(0,o.v_)(e.$CONFIG.APP_NAME),1)]),(0,a.Lk)("div",d,(0,o.v_)(t.title),1)]),(0,a.Lk)("div",n,[(0,a.bF)(g,{to:"/login"},{default:(0,a.k6)((()=>l[0]||(l[0]=[(0,a.eW)("返回登录")]))),_:1})])])),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",u,[(0,a.Lk)("h2",c,(0,o.v_)(t.title),1),(0,a.Lk)("div",p,[(0,a.RG)(e.$slots,"default")])])])),_:3})])),_:3})}var h={props:{title:{type:String,default:""}}},f=t(51456);const g=(0,f.A)(h,[["render",m]]);var b=g},29249:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return p}});var a=t(51464),o=t(45883),i=t(51681);const s={to:"/reset_password"},r={to:"/user_register"};function d(e,l,t,d,n,u){const c=(0,a.g2)("el-option"),p=(0,a.g2)("el-select"),m=(0,a.g2)("el-input"),h=(0,a.g2)("el-form-item"),f=(0,a.g2)("el-checkbox"),g=(0,a.g2)("el-col"),b=(0,a.g2)("el-button"),_=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.Wv)(_,{ref:"loginForm",model:n.form,rules:n.rules,"label-width":"0",size:"large",onKeyup:(0,o.jR)(u.login,["enter"])},{default:(0,a.k6)((()=>[(0,a.bF)(h,{prop:"user"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.user,"onUpdate:modelValue":l[1]||(l[1]=e=>n.form.user=e),"prefix-icon":"el-icon-user",clearable:"",placeholder:e.$t("login.userPlaceholder")},{append:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:n.userType,"onUpdate:modelValue":l[0]||(l[0]=e=>n.userType=e),style:{width:"130px"},disabled:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{label:e.$t("login.user"),value:"user"},null,8,["label"]),(0,a.bF)(c,{label:e.$t("login.admin"),value:"admin"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["modelValue","placeholder"])])),_:1}),(0,a.bF)(h,{prop:"password"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:n.form.password,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.password=e),"prefix-icon":"el-icon-lock",clearable:"","show-password":"",placeholder:e.$t("login.PWPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,a.bF)(h,{style:{"margin-bottom":"10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(f,{label:e.$t("login.rememberMe"),modelValue:n.form.autologin,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.autologin=e)},null,8,["label","modelValue"])])),_:1}),(0,a.bF)(g,{span:12,class:"login-forgot",onClick:u.handleForgotPasswordClick},{default:(0,a.k6)((()=>[(0,a.Lk)("a",s,(0,i.v_)(e.$t("login.forgetPassword"))+"？",1)])),_:1},8,["onClick"])])),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{type:"primary",style:{width:"100%"},loading:n.islogin,round:"",onClick:u.login},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.$t("login.signIn")),1)])),_:1},8,["loading","onClick"])])),_:1}),(0,a.Lk)("div",{class:"login-reg",onClick:l[4]||(l[4]=(...e)=>u.handleAddAccountClick&&u.handleAddAccountClick(...e))},[(0,a.eW)((0,i.v_)(e.$t("login.noAccount"))+" ",1),(0,a.Lk)("a",r,(0,i.v_)(e.$t("login.createAccount")),1)])])),_:1},8,["model","rules","onKeyup"])}var n={data(){return{userType:"user",form:{user:"",password:"",autologin:!1},rules:{user:[{required:!0,message:this.$t("login.userError"),trigger:"blur"}],password:[{required:!0,message:this.$t("login.PWError"),trigger:"blur"}]},islogin:!1}},watch:{userType(e){"admin"==e?(this.form.user="admin",this.form.password="admin"):"user"==e&&(this.form.user="user",this.form.password="user")}},mounted(){},methods:{handleForgotPasswordClick(){alert("请联系管理员重置密码")},handleAddAccountClick(){alert("请联系管理员开通账号")},async login(){var e=await this.$refs.loginForm.validate().catch((()=>{}));if(!e)return!1;this.islogin=!0;var l={account_:this.form.user,password_:this.form.password};try{var t=await this.$API.auth.token.post(l);console.log(t,"1");var a={code:200,data:{token:t.data.token,userInfo:t.data.userInfo,userRouter:t.data.userRouter},message:""};if(!t)return this.islogin=!1,this.$message.warning(a.message),!1;console.log(a,"user"),this.$TOOL.cookie.set("TOKEN",a.data.token,{expires:this.form.autologin?86400:0}),this.$TOOL.data.set("USER_INFO",a.data.userInfo);var o=null;if(this.form.user,!t.data.userRouter)return this.islogin=!1,this.$message.warning(o.message,"无菜单权限，请联系管理员。"),!1;if(0==t.data.userRouter.length)return this.islogin=!1,this.$alert("当前用户无任何菜单权限，请联系系统管理员","无权限访问",{type:"error",center:!0}),!1;this.$TOOL.data.set("MENU",t.data.userRouter),this.$router.replace({path:"/"}),this.$message.success("Login Success 登录成功")}catch(i){console.error("Login failed:",i),this.$message.error("登录失败，请稍后再试")}finally{this.islogin=!1}}}},u=t(51456);const c=(0,u.A)(n,[["render",d]]);var p=c},43777:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return m}});var a=t(51464),o=t(45883),i=t(51681);const s={class:"login-msg-yzm"},r={key:0},d={class:"login-reg"};function n(e,l,t,n,u,c){const p=(0,a.g2)("el-input"),m=(0,a.g2)("el-form-item"),h=(0,a.g2)("el-button"),f=(0,a.g2)("router-link"),g=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.Wv)(g,{ref:"loginForm",model:u.form,rules:u.rules,"label-width":"0",size:"large",onKeyup:(0,o.jR)(c.login,["enter"])},{default:(0,a.k6)((()=>[(0,a.bF)(m,{prop:"phone"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:u.form.phone,"onUpdate:modelValue":l[0]||(l[0]=e=>u.form.phone=e),"prefix-icon":"el-icon-iphone",clearable:"",placeholder:e.$t("login.mobilePlaceholder")},{prepend:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("+86")]))),_:1},8,["modelValue","placeholder"])])),_:1}),(0,a.bF)(m,{prop:"yzm",style:{"margin-bottom":"35px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("div",s,[(0,a.bF)(p,{modelValue:u.form.yzm,"onUpdate:modelValue":l[1]||(l[1]=e=>u.form.yzm=e),"prefix-icon":"el-icon-unlock",clearable:"",placeholder:e.$t("login.smsPlaceholder")},null,8,["modelValue","placeholder"]),(0,a.bF)(h,{onClick:c.getYzm,disabled:u.disabled},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(this.$t("login.smsGet")),1),u.disabled?((0,a.uX)(),(0,a.CE)("span",r," ("+(0,i.v_)(u.time)+")",1)):(0,a.Q3)("",!0)])),_:1},8,["onClick","disabled"])])])),_:1}),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{type:"primary",style:{width:"100%"},loading:u.islogin,round:"",onClick:c.login},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.$t("login.signIn")),1)])),_:1},8,["loading","onClick"])])),_:1}),(0,a.Lk)("div",d,[(0,a.eW)((0,i.v_)(e.$t("login.noAccount"))+" ",1),(0,a.bF)(f,{to:"/user_register"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.$t("login.createAccount")),1)])),_:1})])])),_:1},8,["model","rules","onKeyup"])}var u={data(){return{form:{phone:"",yzm:""},rules:{phone:[{required:!0,message:this.$t("login.mobileError")}],yzm:[{required:!0,message:this.$t("login.smsError")}]},disabled:!1,time:0,islogin:!1}},mounted(){},methods:{async getYzm(){var e=await this.$refs.loginForm.validateField("phone").catch((()=>{}));if(!e)return!1;this.$message.success(this.$t("login.smsSent")),this.disabled=!0,this.time=60;var l=setInterval((()=>{this.time-=1,this.time<1&&(clearInterval(l),this.disabled=!1,this.time=0)}),1e3)},async login(){var e=await this.$refs.loginForm.validate().catch((()=>{}));if(!e)return!1}}},c=t(51456);const p=(0,c.A)(u,[["render",n]]);var m=p},27689:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return n}});var a=t(51464),o=t(51681);function i(e,l,t,i,s,r){const d=(0,a.g2)("el-cascader"),n=(0,a.g2)("el-form-item"),u=(0,a.g2)("el-input"),c=(0,a.g2)("el-input-number"),p=(0,a.g2)("el-switch"),m=(0,a.g2)("el-form"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(f,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[7]||(l[7]=e=>s.visible=e),width:500,"destroy-on-close":"",onClosed:l[8]||(l[8]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:l[5]||(l[5]=e=>s.visible=!1)},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("取 消")]))),_:1}),"show"!=s.mode?((0,a.uX)(),(0,a.Wv)(h,{key:0,type:"primary",loading:s.isSaveing,onClick:l[6]||(l[6]=e=>r.submit())},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(m,{model:s.form,rules:s.rules,disabled:"show"==s.mode,ref:"dialogForm","label-width":"100px"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{label:"上级部门",prop:"parent_id_"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:s.form.parent_id_,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.parent_id_=e),options:s.groups,props:s.groupsProps,"show-all-levels":!1,clearable:"",style:{width:"100%"}},null,8,["modelValue","options","props"])])),_:1}),(0,a.bF)(n,{label:"部门名称",prop:"name_"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:s.form.name_,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.name_=e),placeholder:"请输入部门名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"排序",prop:"sn_"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:s.form.sn_,"onUpdate:modelValue":l[2]||(l[2]=e=>s.form.sn_=e),"controls-position":"right",min:1,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"是否有效",prop:"state_"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:s.form.state_,"onUpdate:modelValue":l[3]||(l[3]=e=>s.form.state_=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),(0,a.bF)(n,{label:"备注",prop:"desc_"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:s.form.desc_,"onUpdate:modelValue":l[4]||(l[4]=e=>s.form.desc_=e),clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"]),(0,a.eW)(" "+(0,o.v_)(s.mode)+" ",1)])),_:1},8,["title","modelValue"])}var s={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增",edit:"编辑",show:"查看"},visible:!1,isSaveing:!1,form:{id_:"",parent_id_:"",name_:"",sn_:1,state_:"1",desc_:""},rules:{sort:[{required:!0,message:"请输入排序",trigger:"change"}],label:[{required:!0,message:"请输入部门名称"}]},groups:[],groupsProps:{value:"id_",label:"name_",children:"children",emitPath:!1,checkStrictly:!0}}},mounted(){this.getGroup()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getGroup(){var e=await this.$apiIAM.group.fromList.get();this.groups=e},submit(){"add"==this.mode?(console.log(this.mode,"add"),this.$refs.dialogForm.validate((async e=>{if(e){this.isSaveing=!0;let e={parent_id_:this.form.parent_id_,name_:this.form.name_,sn_:this.form.sn_,state_:this.form.state_,desc_:this.form.desc_};var l=await this.$apiIAM.group.add.post(e);this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}}))):this.$refs.dialogForm.validate((async e=>{if(e){this.isSaveing=!0;var l=await this.$apiIAM.group.undate.post(this.form);this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}}))},setData(e){this.form.id_=e.id_,this.form.name_=e.name_,this.form.state_=e.state_,this.form.sn_=e.sn_,this.form.parent_id_=e.parent_id_,this.form.desc_=e.desc_}}},r=t(51456);const d=(0,r.A)(s,[["render",i]]);var n=d},25644:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return n}});var a=t(51464);const o={class:"treeMain"};function i(e,l,t,i,s,r){const d=(0,a.g2)("el-tree"),n=(0,a.g2)("el-tab-pane"),u=(0,a.g2)("el-tabs"),c=(0,a.g2)("el-button"),p=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(p,{title:"角色权限设置",modelValue:s.visible,"onUpdate:modelValue":l[2]||(l[2]=e=>s.visible=e),width:500,"destroy-on-close":"",onClosed:l[3]||(l[3]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(c,{onClick:l[0]||(l[0]=e=>s.visible=!1)},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(c,{type:"primary",loading:s.isSaveing,onClick:l[1]||(l[1]=e=>r.submit())},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])])),default:(0,a.k6)((()=>[(0,a.bF)(u,{"tab-position":"top"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{label:"菜单权限"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",o,[(0,a.bF)(d,{ref:"menu","node-key":"id",data:s.menu,props:s.menu.props,"show-checkbox":""},null,8,["data","props"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])}t(64660),t(89593);var s={emits:["success","closed"],data(){return{visible:!1,isSaveing:!1,menu:{list:[],checked:[],props:{label:e=>e.meta.title}},grid:{list:[],checked:["welcome","ver","time","progress","echarts","about"],props:{label:e=>e.title,disabled:e=>e.isFixed}},data:{dataType:"1",list:[],checked:[],props:{},rule:""},dashboard:"0",dashboardOptions:[{value:"0",label:"数据统计",views:"stats"},{value:"1",label:"工作台",views:"work"}],roleData:{}}},mounted(){this.getMenu(),this.getDept(),this.getGrid()},methods:{setData(e){this.roleData=e[0]},open(){this.visible=!0},async submit(){try{this.isSaveing=!0,this.roleData.router_tree_=[...this.$refs.menu.getCheckedKeys(),...this.$refs.menu.getHalfCheckedKeys()];const e=await this.$apiIAM.role.update.post(this.roleData);200===e.code?(this.$message.success("操作成功"),this.$emit("success",this.form,this.mode),this.visible=!1):this.$alert(e.message,"提示",{type:"error"})}catch(e){this.$alert("操作失败，请稍后再试","提示",{type:"error"})}finally{this.isSaveing=!1}},async getMenu(){var e=await this.$apiIAM.system.routerTree.get();this.menu=e,this.$nextTick((()=>{const e=this.roleData.router_tree_||[];this.$refs.menu.setCheckedKeys(e,!0),e.forEach((e=>{const l=this.$refs.menu.getNode(e);l&&this.checkParentNodes(l)}))}))},checkParentNodes(e){const l=e.parent;l&&0!==l.level&&(this.$refs.menu.setChecked(l.data.id,!0),this.checkParentNodes(l))},async getDept(){},getGrid(){this.grid.list=[{key:"welcome",title:"欢迎",isFixed:!0},{key:"ver",title:"版本信息",isFixed:!0},{key:"time",title:"时钟"},{key:"progress",title:"进度环"},{key:"echarts",title:"实时收入"},{key:"about",title:"关于项目"}]}}},r=t(51456);const d=(0,r.A)(s,[["render",i],["__scopeId","data-v-751b4b6e"]]);var n=d},80739:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return d}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("el-input"),d=(0,a.g2)("el-form-item"),n=(0,a.g2)("el-switch"),u=(0,a.g2)("el-form"),c=(0,a.g2)("el-button"),p=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(p,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[5]||(l[5]=e=>i.visible=e),width:500,"destroy-on-close":"",onClosed:l[6]||(l[6]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(c,{onClick:l[3]||(l[3]=e=>i.visible=!1)},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("取 消")]))),_:1}),"show"!=i.mode?((0,a.uX)(),(0,a.Wv)(c,{key:0,type:"primary",loading:i.isSaveing,onClick:l[4]||(l[4]=e=>s.submit())},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(u,{model:i.form,rules:i.rules,disabled:"show"==i.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"角色名称",prop:"name_"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.name_,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.name_=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"是否有效",prop:"enabled_"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:i.form.enabled_,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.enabled_=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"备注",prop:"desc_"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.desc_,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.desc_=e),clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var i={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增",edit:"编辑",show:"查看"},visible:!1,isSaveing:!1,form:{id_:"",name_:"",enabled_:1,desc_:""},rules:{label:[{required:!0,message:"请输入角色名称"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){"add"==this.mode?this.$refs.dialogForm.validate((async e=>{if(e){this.isSaveing=!0;let e={...this.form};delete e.id_;var l=await this.$apiIAM.role.add.post(e);this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}})):"edit"==this.mode&&this.$refs.dialogForm.validate((async e=>{if(e){this.isSaveing=!0;var l=await this.$apiIAM.role.update.post(this.form);this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}}))},setData(e){console.log(e,"data"),this.form.id_=e.id_,this.form.name_=e.name_,this.form.enabled_=e.enabled_,this.form.desc_=e.desc_}}},s=t(51456);const r=(0,s.A)(i,[["render",o]]);var d=r},95318:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return d}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("sc-upload"),d=(0,a.g2)("el-form-item"),n=(0,a.g2)("el-input"),u=(0,a.g2)("el-cascader"),c=(0,a.g2)("el-option"),p=(0,a.g2)("el-select"),m=(0,a.g2)("el-form"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(f,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>i.visible=e),width:500,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:l[7]||(l[7]=e=>i.visible=!1)},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("取 消")]))),_:1}),"show"!=i.mode?((0,a.uX)(),(0,a.Wv)(h,{key:0,type:"primary",loading:i.isSaveing,onClick:l[8]||(l[8]=e=>s.submit())},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(m,{model:i.form,rules:i.rules,disabled:"show"==i.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"头像",prop:"avatar"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.avatar,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.avatar=e),title:"上传头像",cropper:!0,compress:.5,aspectRatio:1},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"登录账号",prop:"userName"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:i.form.userName,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.userName=e),placeholder:"用于登录系统",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"姓名",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:i.form.name,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.name=e),placeholder:"请输入完整的真实姓名",clearable:""},null,8,["modelValue"])])),_:1}),"add"==i.mode?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(d,{label:"登录密码",prop:"password"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{type:"password",modelValue:i.form.password,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.password=e),clearable:"","show-password":""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"确认密码",prop:"password2"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{type:"password",modelValue:i.form.password2,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.password2=e),clearable:"","show-password":""},null,8,["modelValue"])])),_:1})],64)):(0,a.Q3)("",!0),(0,a.bF)(d,{label:"所属部门",prop:"dept"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:i.form.dept,"onUpdate:modelValue":l[5]||(l[5]=e=>i.form.dept=e),options:i.depts,props:i.deptsProps,clearable:"",style:{width:"100%"}},null,8,["modelValue","options","props"])])),_:1}),(0,a.bF)(d,{label:"所属角色",prop:"role"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:i.form.role,"onUpdate:modelValue":l[6]||(l[6]=e=>i.form.role=e),multiple:"",filterable:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.roleData,(e=>((0,a.uX)(),(0,a.Wv)(c,{key:e.id_,label:e.name_,value:e.id_},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var i={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增用户",edit:"编辑用户",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",userName:"",avatar:"",name:"",password:"",password2:"",dept:[],role:[]},rules:{userName:[{required:!0,message:"请输入登录账号"}],name:[{required:!0,message:"请输入真实姓名"}],password:[{required:!0,message:"请输入登录密码"},{validator:(e,l,t)=>{const a=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,16}$/;a.test(l)?(""!==this.form.password2&&this.$refs.dialogForm.validateField("password2"),t()):t(new Error("密码必须为6-16位，且包含字母和数字"))}}],password2:[{required:!0,message:"请再次输入密码"},{validator:(e,l,t)=>{l!==this.form.password?t(new Error("两次输入密码不一致!")):t()}}],dept:[{required:!0,message:"请选择所属部门"}],role:[{required:!0,message:"请选择所属角色",trigger:"change"}]},roleData:[],roleDataProps:{value:"id_",label:"name_",multiple:!0,checkStrictly:!0},depts:[],deptsProps:{value:"id_",label:"name_",children:"children",checkStrictly:!0,emitPath:!1},userRelationData:{}}},mounted(){this.getGroup(),this.getDept()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getGroup(){var e=await this.$apiIAM.role.fromList.get();this.roleData=e},async getDept(){var e=await this.$apiIAM.group.fromList.get();this.depts=e},async userRelation(){var e={id_:this.form.id};this.userRelationData=await this.$apiIAM.relation.readUserRelation.post(e),this.roleData.length>0&&(this.form.dept=this.userRelationData.group_id_,this.form.role=this.userRelationData.role_id_)},submit(){"add"===this.mode?this.$refs.dialogForm.validate((async e=>{if(!e)return!1;{this.isSaveing=!0;let e={account_:this.form.userName,fullname_:this.form.name,avatar_:this.form.avatar,password_:this.form.password};var l=await this.$apiIAM.user.add.post(e);this.isSaveing=!1,200===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}})):"edit"===this.mode&&this.$refs.dialogForm.validate((async e=>{if(!e)return!1;{this.isSaveing=!0;let e={id_:this.form.id,group_id_:this.form.dept,role_id_:this.form.role};var l=await this.$apiIAM.relation.update.post(e);this.isSaveing=!1,200===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}}))},async setData(e){this.form.id=e.id_,this.form.userName=e.account_,this.form.avatar=e.avatar_,this.form.name=e.fullname_,await Promise.all([this.getGroup(),this.userRelation()]),this.form.dept=this.userRelationData.group_id_,this.form.role=this.userRelationData.role_id_}}},s=t(51456);const r=(0,s.A)(i,[["render",o]]);var d=r},16620:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return d}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("el-input"),d=(0,a.g2)("el-form-item"),n=(0,a.g2)("el-checkbox-button"),u=(0,a.g2)("el-checkbox-group"),c=(0,a.g2)("el-date-picker"),p=(0,a.g2)("el-form"),m=(0,a.g2)("el-button"),h=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(h,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[7]||(l[7]=e=>i.visible=e),width:500,"destroy-on-close":"",onClosed:l[8]||(l[8]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(m,{onClick:l[5]||(l[5]=e=>i.visible=!1)},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(m,{type:"primary",loading:i.isSaveing,onClick:l[6]||(l[6]=e=>s.submit())},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])])),default:(0,a.k6)((()=>[(0,a.bF)(p,{model:i.form,rules:i.rules,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"应用标识",prop:"appId"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.appId,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.appId=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"应用名称",prop:"appName"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.appName,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.appName=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"秘钥",prop:"secret"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.secret,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.secret=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"类型范围",prop:"type"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:i.form.type,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(n,{label:"ALL"}),(0,a.bF)(n,{label:"UPDATA"}),(0,a.bF)(n,{label:"QUERY"}),(0,a.bF)(n,{label:"INSERT"})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"授权至",prop:"exp"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:i.form.exp,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.exp=e),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"选择日期时间"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}var i={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增APP",edit:"编辑APP"},form:{id:"",appId:"",appName:"",secret:"",type:[],exp:""},rules:{appId:[{required:!0,message:"请输入应用标识"}],appName:[{required:!0,message:"请输入应用名称"}],secret:[{required:!0,message:"请输入秘钥"}],type:[{required:!0,message:"请选择类型范围",trigger:"change"}],exp:[{required:!0,message:"请选择授权到期日期",trigger:"change"}]},visible:!1,isSaveing:!1}},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(e){this.isSaveing=!0;var l=await this.$API.demo.post.post(this.form);this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}}))},setData(e){this.form.id=e.id,this.form.appId=e.appId,this.form.appName=e.appName,this.form.secret=e.secret,this.form.type=e.type,this.form.exp=e.exp}}},s=t(51456);const r=(0,s.A)(i,[["render",o]]);var d=r},75056:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return d}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("el-input"),d=(0,a.g2)("el-form-item"),n=(0,a.g2)("el-cascader"),u=(0,a.g2)("el-form"),c=(0,a.g2)("el-button"),p=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(p,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[5]||(l[5]=e=>i.visible=e),width:330,"destroy-on-close":"",onClosed:l[6]||(l[6]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(c,{onClick:l[3]||(l[3]=e=>i.visible=!1)},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(c,{type:"primary",loading:i.isSaveing,onClick:l[4]||(l[4]=e=>s.submit())},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])])),default:(0,a.k6)((()=>[(0,a.bF)(u,{model:i.form,rules:i.rules,ref:"dialogForm","label-width":"80px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"编码",prop:"code"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.code,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.code=e),clearable:"",placeholder:"字典编码"},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"字典名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.name=e),clearable:"",placeholder:"字典显示名称"},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"父路径",prop:"parentId"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:i.form.parentId,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.parentId=e),options:i.dic,props:i.dicProps,"show-all-levels":!1,clearable:""},null,8,["modelValue","options","props"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}var i={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增字典",edit:"编辑字典"},visible:!1,isSaveing:!1,form:{id:"",name:"",code:"",parentId:""},rules:{code:[{required:!0,message:"请输入编码"}],name:[{required:!0,message:"请输入字典名称"}]},dic:[],dicProps:{value:"id",label:"name",emitPath:!1,checkStrictly:!0}}},mounted(){this.getDic()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getDic(){var e=await this.$API.system.dic.tree.get();this.dic=e.data},submit(){this.$refs.dialogForm.validate((async e=>{if(e){this.isSaveing=!0;var l=await this.$API.demo.post.post(this.form);this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.code=e.code,this.form.parentId=e.parentId}}},s=t(51456);const r=(0,s.A)(i,[["render",o]]);var d=r},73170:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return d}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("el-cascader"),d=(0,a.g2)("el-form-item"),n=(0,a.g2)("el-input"),u=(0,a.g2)("el-switch"),c=(0,a.g2)("el-form"),p=(0,a.g2)("el-button"),m=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(m,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>i.visible=e),width:400,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(p,{onClick:l[4]||(l[4]=e=>i.visible=!1)},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(p,{type:"primary",loading:i.isSaveing,onClick:l[5]||(l[5]=e=>s.submit())},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])])),default:(0,a.k6)((()=>[(0,a.bF)(c,{model:i.form,rules:i.rules,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"所属字典",prop:"dic"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.dic,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.dic=e),options:i.dic,props:i.dicProps,"show-all-levels":!1,clearable:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.bF)(d,{label:"项名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:i.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"键值",prop:"key"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:i.form.key,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.key=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"是否有效",prop:"yx"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:i.form.yx,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.yx=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}var i={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增项",edit:"编辑项"},visible:!1,isSaveing:!1,form:{id:"",dic:"",name:"",key:"",yx:"1"},rules:{dic:[{required:!0,message:"请选择所属字典"}],name:[{required:!0,message:"请输入项名称"}],key:[{required:!0,message:"请输入键值"}]},dic:[],dicProps:{value:"id",label:"name",emitPath:!1,checkStrictly:!0}}},mounted(){this.params&&(this.form.dic=this.params.code),this.getDic()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getDic(){var e=await this.$API.system.dic.tree.get();this.dic=e.data},submit(){this.$refs.dialogForm.validate((async e=>{if(e){this.isSaveing=!0;var l=await this.$API.demo.post.post(this.form);this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.key=e.key,this.form.yx=e.yx,this.form.dic=e.dic}}},s=t(51456);const r=(0,s.A)(i,[["render",o]]);var d=r},77680:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return n}});var a=t(51464),o=t(51681);function i(e,l,t,i,s,r){const d=(0,a.g2)("el-descriptions-item"),n=(0,a.g2)("el-descriptions"),u=(0,a.g2)("el-alert"),c=(0,a.g2)("el-collapse-item"),p=(0,a.g2)("el-collapse"),m=(0,a.g2)("el-main");return(0,a.uX)(),(0,a.Wv)(m,{style:{padding:"0 20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{column:1,border:"",size:"small"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"请求接口"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.data.url),1)])),_:1}),(0,a.bF)(d,{label:"请求方法"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.data.type),1)])),_:1}),(0,a.bF)(d,{label:"状态代码"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.data.code),1)])),_:1}),(0,a.bF)(d,{label:"日志名"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.data.name),1)])),_:1}),(0,a.bF)(d,{label:"日志时间"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.data.time),1)])),_:1})])),_:1}),(0,a.bF)(p,{modelValue:s.activeNames,"onUpdate:modelValue":l[0]||(l[0]=e=>s.activeNames=e),style:{"margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(c,{title:"常规",name:"1"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{title:"在没有配置的 DNS 服务器响应之后，名称 update-khd.2345.cc 的名称解析超时。",type:s.typeMap[s.data.level],closable:!1},null,8,["type"])])),_:1}),(0,a.bF)(c,{title:"详细",name:"2"},{default:(0,a.k6)((()=>l[1]||(l[1]=[(0,a.Lk)("div",{class:"code"},' Request: { User-Agent: "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36" }, Response: { Content-Type: "application/json; charset=utf-8", Date: "Fri, 25 Jun 2021 03:02:14 GMT", Server: "nginx/1.17.8" } ',-1)]))),_:1})])),_:1},8,["modelValue"])])),_:1})}var s={data(){return{data:{},activeNames:["1"],typeMap:{info:"info",warn:"warning",error:"error"}}},methods:{setData(e){this.data=e}}},r=t(51456);const d=(0,r.A)(s,[["render",i],["__scopeId","data-v-6b71ccf9"]]);var n=d},96457:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return u}});var a=t(51464),o=t(51681);function i(e,l,t,i,s,r){const d=(0,a.g2)("el-empty"),n=(0,a.g2)("el-col"),u=(0,a.g2)("el-input"),c=(0,a.g2)("el-form-item"),p=(0,a.g2)("el-cascader"),m=(0,a.g2)("el-radio-button"),h=(0,a.g2)("el-radio-group"),f=(0,a.g2)("sc-icon-select"),g=(0,a.g2)("el-checkbox"),b=(0,a.g2)("el-button"),_=(0,a.g2)("el-form"),k=(0,a.g2)("el-table-column"),v=(0,a.g2)("sc-form-table"),y=(0,a.g2)("el-row");return(0,a.uX)(),(0,a.Wv)(y,{gutter:40},{default:(0,a.k6)((()=>[s.form.id?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(n,{lg:12},{default:(0,a.k6)((()=>[(0,a.Lk)("h2",null,(0,o.v_)(s.form.meta.title||"新增菜单"),1),(0,a.bF)(_,{model:s.form,rules:s.rules,ref:"dialogForm","label-width":"80px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{label:"显示名称",prop:"meta.title"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:s.form.meta.title,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.meta.title=e),clearable:"",placeholder:"菜单显示名字"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"上级菜单",prop:"parentId"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:s.form.parentId,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.parentId=e),options:s.menuOptions,props:s.menuProps,"show-all-levels":!1,placeholder:"顶级菜单",clearable:"",disabled:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.bF)(c,{label:"类型",prop:"meta.type"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:s.form.meta.type,"onUpdate:modelValue":l[2]||(l[2]=e=>s.form.meta.type=e)},{default:(0,a.k6)((()=>[(0,a.bF)(m,{label:"menu"},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("菜单")]))),_:1}),(0,a.bF)(m,{label:"iframe"},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("Iframe")]))),_:1}),(0,a.bF)(m,{label:"link"},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("外链")]))),_:1}),(0,a.bF)(m,{label:"button"},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("按钮")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"别名",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:s.form.name,"onUpdate:modelValue":l[3]||(l[3]=e=>s.form.name=e),clearable:"",placeholder:"菜单别名"},null,8,["modelValue"]),l[13]||(l[13]=(0,a.Lk)("div",{class:"el-form-item-msg"},"系统唯一且与内置组件名一致，否则导致缓存失效。如类型为Iframe的菜单，别名将代替源地址显示在地址栏",-1))])),_:1}),(0,a.bF)(c,{label:"菜单图标",prop:"meta.icon"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:s.form.meta.icon,"onUpdate:modelValue":l[4]||(l[4]=e=>s.form.meta.icon=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"路由地址",prop:"path"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:s.form.path,"onUpdate:modelValue":l[5]||(l[5]=e=>s.form.path=e),clearable:"",placeholder:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{label:"视图",prop:"component"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:s.form.component,"onUpdate:modelValue":l[6]||(l[6]=e=>s.form.component=e),clearable:"",placeholder:""},{prepend:(0,a.k6)((()=>l[14]||(l[14]=[(0,a.eW)("views/")]))),_:1},8,["modelValue"]),l[15]||(l[15]=(0,a.Lk)("div",{class:"el-form-item-msg"},"如父节点、链接或Iframe等没有视图的菜单不需要填写",-1))])),_:1}),(0,a.bF)(c,{label:"是否隐藏",prop:"hidden"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:s.form.hidden,"onUpdate:modelValue":l[7]||(l[7]=e=>s.form.hidden=e)},{default:(0,a.k6)((()=>l[16]||(l[16]=[(0,a.eW)("隐藏菜单")]))),_:1},8,["modelValue"]),l[17]||(l[17]=(0,a.Lk)("div",{class:"el-form-item-msg"},"菜单不显示在导航中，但用户依然可以访问，例如详情页",-1))])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{type:"primary",onClick:r.save,loading:s.loading},{default:(0,a.k6)((()=>l[18]||(l[18]=[(0,a.eW)("保 存")]))),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,a.bF)(n,{lg:12,class:"apilist"},{default:(0,a.k6)((()=>[l[19]||(l[19]=(0,a.Lk)("h2",null,"接口权限",-1)),(0,a.bF)(v,{modelValue:s.form.apiList,"onUpdate:modelValue":l[8]||(l[8]=e=>s.form.apiList=e),addTemplate:s.apiListAddTemplate,placeholder:"暂无匹配接口权限"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{prop:"code",label:"标识",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(u,{modelValue:e.row.code,"onUpdate:modelValue":l=>e.row.code=l,placeholder:"请输入内容"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(k,{prop:"url",label:"Api url"},{default:(0,a.k6)((e=>[(0,a.bF)(u,{modelValue:e.row.url,"onUpdate:modelValue":l=>e.row.url=l,placeholder:"请输入内容"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["modelValue","addTemplate"])])),_:1})],64)):((0,a.uX)(),(0,a.Wv)(n,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(d,{description:"请选择左侧菜单后操作","image-size":100})])),_:1}))])),_:1})}t(78982),t(64660),t(89593);var s=t(76695),r={components:{scIconSelect:s.A},props:{menu:{type:Object,default:()=>{}}},data(){return{form:{id:"",parentId:"",name:"",path:"",component:"",redirect:"",meta:{title:"",icon:"",active:"",color:"",type:"menu",fullpage:!1,tag:""},apiList:[]},menuOptions:[],menuProps:{value:"id",label:"title",checkStrictly:!0},predefineColors:["#ff4500","#ff8c00","#ffd700","#67C23A","#00ced1","#409EFF","#c71585"],rules:[],apiListAddTemplate:{code:"",url:""},loading:!1}},watch:{menu:{handler(){this.menuOptions=this.treeToMap(this.menu)},deep:!0}},mounted(){},methods:{treeToMap(e){const l=[];return e.forEach((e=>{var t={id:e.id,parentId:e.parentId,title:e.meta.title,children:e.children&&e.children.length>0?this.treeToMap(e.children):null};l.push(t)})),l},async save(){this.loading=!0;const e={id:this.form.id,name:this.form.name,path:this.form.path,component:this.form.component,title:this.form.meta.title,icon:this.form.meta.icon,type:this.form.meta.type};console.log(e);var l=await this.$apiIAM.system.updetaRoute.post(e);this.loading=!1,200==l.code?this.$message.success("保存成功"):this.$message.warning(l.message)},setData(e,l){this.form=e,this.form.apiList=e.apiList||[],this.form.parentId=l}}},d=t(51456);const n=(0,d.A)(r,[["render",i],["__scopeId","data-v-6460fd1e"]]);var u=n},60850:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return d}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("sc-title"),d=(0,a.g2)("el-input"),n=(0,a.g2)("el-form-item"),u=(0,a.g2)("el-col"),c=(0,a.g2)("el-row"),p=(0,a.g2)("el-checkbox"),m=(0,a.g2)("el-table-column"),h=(0,a.g2)("el-button"),f=(0,a.g2)("sc-form-table"),g=(0,a.g2)("el-form"),b=(0,a.g2)("el-main"),_=(0,a.g2)("el-footer"),k=(0,a.g2)("el-container"),v=(0,a.g2)("el-drawer"),y=(0,a.gN)("loading");return(0,a.uX)(),(0,a.Wv)(v,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[8]||(l[8]=e=>i.visible=e),size:1e3,"destroy-on-close":"",onClosed:l[9]||(l[9]=l=>e.$emit("closed"))},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{padding:"0 20px 20px 20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,{ref:"dialogForm",model:i.form,rules:i.rules,"label-width":"100px","label-position":"top"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{title:"基础"}),(0,a.bF)(c,{gutter:20},{default:(0,a.k6)((()=>[(0,a.bF)(u,{span:16},{default:(0,a.k6)((()=>[(0,a.bF)(n,{label:"表格名称",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:i.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.name=e),placeholder:"请输入中文描述标题"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(u,{span:8},{default:(0,a.k6)((()=>[(0,a.bF)(n,{label:"标识",prop:"code"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:i.form.code,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.code=e),placeholder:"请输入唯一标识"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:i.form.remoteSort,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.remoteSort=e),label:"远程排序"},null,8,["modelValue"]),(0,a.bF)(p,{modelValue:i.form.remoteFilter,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.remoteFilter=e),label:"远程过滤"},null,8,["modelValue"])])),_:1}),(0,a.bF)(r,{title:"表格列"}),(0,a.bF)(n,{prop:"column"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:i.form.column,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.column=e),addTemplate:i.addTemplate,"drag-sort":"",placeholder:"暂无数据"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{prop:"label",label:"名称"},{default:(0,a.k6)((e=>[(0,a.bF)(d,{modelValue:e.row.label,"onUpdate:modelValue":l=>e.row.label=l,placeholder:"请输入名称"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(m,{prop:"prop",label:"字段",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(d,{modelValue:e.row.prop,"onUpdate:modelValue":l=>e.row.prop=l,placeholder:"请输入字段"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(m,{prop:"width",label:"宽度",width:"100"},{default:(0,a.k6)((e=>[(0,a.bF)(d,{modelValue:e.row.width,"onUpdate:modelValue":l=>e.row.width=l,placeholder:"请输入宽度"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(m,{prop:"hide",label:"隐藏",width:"80",align:"center"},{default:(0,a.k6)((e=>[(0,a.bF)(p,{modelValue:e.row.hide,"onUpdate:modelValue":l=>e.row.hide=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(m,{prop:"sortable",label:"排序",width:"80",align:"center"},{default:(0,a.k6)((e=>[(0,a.bF)(p,{modelValue:e.row.sortable,"onUpdate:modelValue":l=>e.row.sortable=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(m,{prop:"filters",label:"过滤项",width:"90",align:"center"},{default:(0,a.k6)((e=>[(0,a.bF)(h,{text:"",size:"small",type:0==e.row.filters.length?"":"primary",onClick:l=>s.setFilters(e.row.filters)},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("过滤项")]))),_:2},1032,["type","onClick"])])),_:1}),(0,a.bF)(m,{prop:"fixed",label:"固定",width:"80",align:"center"},{default:(0,a.k6)((e=>[(0,a.bF)(p,{modelValue:e.row.fixed,"onUpdate:modelValue":l=>e.row.fixed=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["modelValue","addTemplate"])])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{type:"primary",loading:i.isSaveing,onClick:s.submit},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("保存")]))),_:1},8,["loading","onClick"]),(0,a.bF)(h,{onClick:l[5]||(l[5]=e=>i.visible=!1)},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("取消")]))),_:1})])),_:1})])),_:1})),[[y,i.loading]]),(0,a.bF)(v,{title:"过滤项配置",modelValue:i.setFiltersVisible,"onUpdate:modelValue":l[7]||(l[7]=e=>i.setFiltersVisible=e),size:500,"destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{padding:"0 20px 20px 20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:i.selectionFilters,"onUpdate:modelValue":l[6]||(l[6]=e=>i.selectionFilters=e),addTemplate:i.filtersAddTemplate,"drag-sort":"",placeholder:"暂无数据"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{prop:"text",label:"名称"},{default:(0,a.k6)((e=>[(0,a.bF)(d,{modelValue:e.row.text,"onUpdate:modelValue":l=>e.row.text=l,placeholder:"请输入名称"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.bF)(m,{prop:"value",label:"值",width:"150"},{default:(0,a.k6)((e=>[(0,a.bF)(d,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l,placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["modelValue","addTemplate"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"])}var i={emits:["success","closed"],data(){return{loading:!1,mode:"add",titleMap:{add:"新增",edit:"编辑"},form:{},rules:{name:[{required:!0,message:"请输入表格名称",trigger:"blur"}],code:[{required:!0,message:"请输入唯一标识",trigger:"blur"}]},addTemplate:{label:"",prop:"",width:"100",hide:!1,sortable:!1,fixed:!1,filters:[]},visible:!1,isSaveing:!1,selectionFilters:[],filtersAddTemplate:{text:"",value:""},setFiltersVisible:!1}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(e){this.isSaveing=!0;var l=await this.$API.demo.post.post(this.form);this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}}))},setData(e){this.loading=!0;const l={id:e.id};setTimeout((async()=>{var e=await this.$API.system.table.info.get(l);this.loading=!1,this.form=e.data}),400)},setFilters(e){this.selectionFilters=e,this.setFiltersVisible=!0}}},s=t(51456);const r=(0,s.A)(i,[["render",o]]);var d=r},64242:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return p}});var a=t(51464),o=t(51681);const i={key:0,style:{color:"#67C23A"}},s={key:1,style:{color:"#F56C6C"}},r={style:{"font-size":"12px",color:"#999",padding:"20px",background:"#333","font-family":"consolas","line-height":"1.5",overflow:"auto"}};function d(e,l,t,d,n,u){const c=(0,a.g2)("el-table-column"),p=(0,a.g2)("el-icon-success-filled"),m=(0,a.g2)("el-icon"),h=(0,a.g2)("el-icon-circle-close-filled"),f=(0,a.g2)("el-button"),g=(0,a.g2)("scTable"),b=(0,a.g2)("el-main"),_=(0,a.g2)("el-container"),k=(0,a.g2)("el-drawer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{padding:"0 20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,{ref:"table",data:n.data,stripe:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{label:"执行时间",prop:"time",width:"200"}),(0,a.bF)(c,{label:"执行结果",prop:"state",width:"100"},{default:(0,a.k6)((e=>[200==e.row.state?((0,a.uX)(),(0,a.CE)("span",i,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(p)])),_:1})])):((0,a.uX)(),(0,a.CE)("span",s,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(h)])),_:1})]))])),_:1}),(0,a.bF)(c,{label:"执行日志",prop:"logs",width:"100",fixed:"right"},{default:(0,a.k6)((e=>[(0,a.bF)(f,{size:"small",onClick:l=>u.show(e.row),type:"text"},{default:(0,a.k6)((()=>l[1]||(l[1]=[(0,a.eW)("日志")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1}),(0,a.bF)(k,{title:"日志",modelValue:n.logsVisible,"onUpdate:modelValue":l[0]||(l[0]=e=>n.logsVisible=e),size:500,direction:"rtl","destroy-on-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{padding:"0 20px 20px 20px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("pre",r,(0,o.v_)(n.demoLog),1)])),_:1})])),_:1},8,["modelValue"])],64)}var n={data(){return{logsVisible:!1,demoLog:"2021-07-07 12:35:00 [com.xxl.job.core.thread.JobThread#run]-[124]-[Thread-308]\n----------- xxl-job job execute start -----------\n----------- Param:\n2021-07-07 12:35:00 [com.heronshn.reservation.jobhandler.AqshMasterDataSendHandler#execute]-[31]-[Thread-308] aqshMasterDataSendHandler start\n2021-07-07 12:35:00 [com.heronshn.reservation.data.service.impl.AqshVehicleServiceImpl#send]-[42]-[Thread-308] send 45\n2021-07-07 12:35:00 [com.heronshn.reservation.data.service.impl.AqshVehicleServiceImpl#send]-[45]-[Thread-308] webapi http://127.0.0.1:48080\n2021-07-07 12:35:00 [com.heronshn.reservation.jobhandler.AqshMasterDataSendHandler#execute]-[33]-[Thread-308] aqshMasterDataSendHandler vehicle end\n2021-07-07 12:35:00 [com.heronshn.reservation.jobhandler.AqshMasterDataSendHandler#execute]-[35]-[Thread-308] aqshMasterDataSendHandler stop\n2021-07-07 12:35:00 [com.xxl.job.core.thread.JobThread#run]-[158]-[Thread-308]\n----------- xxl-job job execute end(finish) -----------\n----------- ReturnT:ReturnT [code=200, msg=null, content=null]\n2021-07-07 12:35:00 [com.xxl.job.core.thread.TriggerCallbackThread#callbackLog]-[176]-[Thread-10]\n----------- xxl-job job callback finish.\n\n[Load Log Finish]",data:[{time:"2021-07-07 00:00:00",state:"500",logs:""},{time:"2021-07-06 00:00:00",state:"200",logs:""},{time:"2021-07-05 00:00:00",state:"200",logs:""},{time:"2021-07-04 00:00:00",state:"200",logs:""},{time:"2021-07-03 00:00:00",state:"200",logs:""},{time:"2021-07-02 00:00:00",state:"200",logs:""},{time:"2021-07-01 00:00:00",state:"200",logs:""}]}},mounted(){},methods:{show(){this.logsVisible=!0}}},u=t(51456);const c=(0,u.A)(n,[["render",d]]);var p=c},77654:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return n}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("el-input"),d=(0,a.g2)("el-form-item"),n=(0,a.g2)("sc-cron"),u=(0,a.g2)("el-switch"),c=(0,a.g2)("el-form"),p=(0,a.g2)("el-button"),m=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(m,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>i.visible=e),width:400,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(p,{onClick:l[4]||(l[4]=e=>i.visible=!1)},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(p,{type:"primary",loading:i.isSaveing,onClick:l[5]||(l[5]=e=>s.submit())},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])])),default:(0,a.k6)((()=>[(0,a.bF)(c,{model:i.form,rules:i.rules,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"描述",prop:"title"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.title=e),placeholder:"计划任务标题",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"执行类",prop:"handler"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.handler,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.handler=e),placeholder:"计划任务执行类名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"定时规则",prop:"cron"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:i.form.cron,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.cron=e),placeholder:"请输入Cron定时规则",clearable:"",shortcuts:i.shortcuts},null,8,["modelValue","shortcuts"])])),_:1}),(0,a.bF)(d,{label:"是否启用",prop:"state"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:i.form.state,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.state=e),"active-value":"1","inactive-value":"-1"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}var i=t(59608),s={components:{scCron:i.A},emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增计划任务",edit:"编辑计划任务"},form:{id:"",title:"",handler:"",cron:"",state:"1"},rules:{title:[{required:!0,message:"请填写标题"}],handler:[{required:!0,message:"请填写执行类"}],cron:[{required:!0,message:"请填写定时规则"}]},visible:!1,isSaveing:!1,shortcuts:[{text:"每天8点和12点 (自定义追加)",value:"0 0 8,12 * * ?"}]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((e=>{e&&(this.isSaveing=!0,setTimeout((()=>{this.isSaveing=!1,this.visible=!1,this.$message.success("操作成功"),this.$emit("success",this.form,this.mode)}),1e3))}))},setData(e){this.form.id=e.id,this.form.title=e.title,this.form.handler=e.handler,this.form.cron=e.cron,this.form.state=e.state}}},r=t(51456);const d=(0,r.A)(s,[["render",o]]);var n=d},26344:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return n}});var a=t(51464),o=t(51681);function i(e,l,t,i,s,r){const d=(0,a.g2)("el-descriptions-item"),n=(0,a.g2)("el-descriptions"),u=(0,a.g2)("el-card"),c=(0,a.g2)("el-main");return(0,a.uX)(),(0,a.Wv)(c,{style:{padding:"0 20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{shadow:"never"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{title:"Table row data",column:2,border:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.data,((e,l)=>((0,a.uX)(),(0,a.Wv)(d,{key:l,label:l,width:"150px"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e),1)])),_:2},1032,["label"])))),128))])),_:1})])),_:1})])),_:1})}var s={data(){return{data:{id:""}}},mounted(){},methods:{setData(e){this.data=e}}},r=t(51456);const d=(0,r.A)(s,[["render",i]]);var n=d},4901:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return d}});var a=t(51464);function o(e,l,t,o,i,s){const r=(0,a.g2)("el-input"),d=(0,a.g2)("el-form-item"),n=(0,a.g2)("el-radio"),u=(0,a.g2)("el-radio-group"),c=(0,a.g2)("el-input-number"),p=(0,a.g2)("el-switch"),m=(0,a.g2)("el-form"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(f,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[7]||(l[7]=e=>i.visible=e),width:500,"destroy-on-close":"",onClosed:l[8]||(l[8]=l=>e.$emit("closed"))},{footer:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:l[5]||(l[5]=e=>i.visible=!1)},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("取 消")]))),_:1}),"show"!=i.mode?((0,a.uX)(),(0,a.Wv)(h,{key:0,type:"primary",loading:i.isSaveing,onClick:l[6]||(l[6]=e=>s.submit())},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("保 存")]))),_:1},8,["loading"])):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.bF)(m,{model:i.form,rules:i.rules,disabled:"show"==i.mode,ref:"dialogForm","label-width":"100px"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"姓名",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.name=e),placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"性别",prop:"sex"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:i.form.sex,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.sex=e)},{default:(0,a.k6)((()=>[(0,a.bF)(n,{label:"男"},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("男")]))),_:1}),(0,a.bF)(n,{label:"女"},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("女")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"邮箱",prop:"email"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.form.email,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.email=e),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"评分",prop:"num"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:i.form.num,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.num=e),min:0,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"状态",prop:"boolean"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:i.form.boolean,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.boolean=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var i={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增",edit:"编辑",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",name:"",sex:"男",email:"",num:0,boolean:!0},rules:{name:[{required:!0,message:"请输入姓名"}]},groups:[],groupsProps:{value:"id",emitPath:!1,checkStrictly:!0}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async submit(){var e=await this.$refs.dialogForm.validate().catch((()=>{}));if(!e)return!1;this.isSaveing=!0;var l=await this.$API.demo.post.post(this.form);this.isSaveing=!1,200==l.code?("add"==this.mode&&(this.form.id=l.data),this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.sex=e.sex,this.form.email=e.email,this.form.num=e.num,this.form.boolean=e.boolean}}},s=t(51456);const r=(0,s.A)(i,[["render",o]]);var d=r},85868:function(e,l,t){var a={"./about.vue":86653,"./approvalCenter.vue":60088,"./drawingTask.vue":15775,"./echarts.vue":33035,"./manhour.vue":13051,"./progress.vue":50526,"./time.vue":13686,"./ver.vue":58592,"./welcome.vue":32263};function o(e){var l=i(e);return t(l)}function i(e){if(!t.o(a,e)){var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id=85868}}]);